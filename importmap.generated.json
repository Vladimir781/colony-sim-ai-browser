{
  "imports": {
    "app/ai/brains/brain.default.u8arr.js": "data:text/javascript;base64,Y29uc3Qgc2l6ZSA9IDExMTgxOwpjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7CmZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSArPSAxKSB7CiAgZGF0YVtpXSA9IChpICogNzMgKyA5NykgJSAyNTU7Cn0KZXhwb3J0IGNvbnN0IEJSQUlOX0RFRkFVTFQgPSBkYXRhOwo=",
    "app/ai/learn/reinforce.js": "data:text/javascript;base64,aW1wb3J0IHsgY2xpcEdyYWRpZW50cywgYXBwbHlHcmFkaWVudHMgfSBmcm9tICdhcHAvYWkvbWF0aC9vcHRpbS5qcyc7CgpleHBvcnQgY2xhc3MgUmVpbmZvcmNlTGVhcm5lciB7CiAgY29uc3RydWN0b3IoeyBsZWFybmluZ1JhdGUgPSAwLjAwMDUsIGdhbW1hID0gMC45NSwgZ3JhZGllbnRDbGlwID0gNSB9ID0ge30pIHsKICAgIHRoaXMubGVhcm5pbmdSYXRlID0gbGVhcm5pbmdSYXRlOwogICAgdGhpcy5nYW1tYSA9IGdhbW1hOwogICAgdGhpcy5ncmFkaWVudENsaXAgPSBncmFkaWVudENsaXA7CiAgfQoKICAvKioKICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gd2VpZ2h0cwogICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5W119IGdyYWRpZW50cwogICAqLwogIHVwZGF0ZSh3ZWlnaHRzLCBncmFkaWVudHMpIHsKICAgIGNvbnN0IGF2Z0dyYWQgPSBuZXcgRmxvYXQzMkFycmF5KHdlaWdodHMubGVuZ3RoKTsKICAgIGZvciAoY29uc3QgZ3JhZCBvZiBncmFkaWVudHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncmFkLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgYXZnR3JhZFtpXSArPSBncmFkW2ldOwogICAgICB9CiAgICB9CiAgICBpZiAoZ3JhZGllbnRzLmxlbmd0aCkgewogICAgICBjb25zdCBzY2FsZSA9IDEgLyBncmFkaWVudHMubGVuZ3RoOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF2Z0dyYWQubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBhdmdHcmFkW2ldICo9IHNjYWxlOwogICAgICB9CiAgICB9CiAgICBjbGlwR3JhZGllbnRzKGF2Z0dyYWQsIHRoaXMuZ3JhZGllbnRDbGlwKTsKICAgIGFwcGx5R3JhZGllbnRzKHdlaWdodHMsIGF2Z0dyYWQsIHRoaXMubGVhcm5pbmdSYXRlKTsKICB9CgogIGNvbXB1dGVSZXR1cm5zKHJld2FyZHMpIHsKICAgIGNvbnN0IHJldHVybnMgPSBuZXcgQXJyYXkocmV3YXJkcy5sZW5ndGgpOwogICAgbGV0IG5leHQgPSAwOwogICAgZm9yIChsZXQgaSA9IHJld2FyZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHsKICAgICAgbmV4dCA9IHJld2FyZHNbaV0gKyB0aGlzLmdhbW1hICogbmV4dDsKICAgICAgcmV0dXJuc1tpXSA9IG5leHQ7CiAgICB9CiAgICByZXR1cm4gcmV0dXJuczsKICB9Cn0K",
    "app/ai/math/activations.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIHJlbHUodmVjdG9yKSB7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZWN0b3IubGVuZ3RoOyBpICs9IDEpIHsKICAgIHZlY3RvcltpXSA9IE1hdGgubWF4KDAsIHZlY3RvcltpXSk7CiAgfQogIHJldHVybiB2ZWN0b3I7Cn0KCmV4cG9ydCBmdW5jdGlvbiB0YW5oKHZlY3RvcikgewogIGZvciAobGV0IGkgPSAwOyBpIDwgdmVjdG9yLmxlbmd0aDsgaSArPSAxKSB7CiAgICB2ZWN0b3JbaV0gPSBNYXRoLnRhbmgodmVjdG9yW2ldKTsKICB9CiAgcmV0dXJuIHZlY3RvcjsKfQoKZXhwb3J0IGZ1bmN0aW9uIHNvZnRtYXgodmVjdG9yKSB7CiAgbGV0IG1heCA9IC1JbmZpbml0eTsKICBmb3IgKGxldCBpID0gMDsgaSA8IHZlY3Rvci5sZW5ndGg7IGkgKz0gMSkgewogICAgaWYgKHZlY3RvcltpXSA+IG1heCkgbWF4ID0gdmVjdG9yW2ldOwogIH0KICBsZXQgc3VtID0gMDsKICBmb3IgKGxldCBpID0gMDsgaSA8IHZlY3Rvci5sZW5ndGg7IGkgKz0gMSkgewogICAgY29uc3QgdiA9IE1hdGguZXhwKHZlY3RvcltpXSAtIG1heCk7CiAgICB2ZWN0b3JbaV0gPSB2OwogICAgc3VtICs9IHY7CiAgfQogIGZvciAobGV0IGkgPSAwOyBpIDwgdmVjdG9yLmxlbmd0aDsgaSArPSAxKSB7CiAgICB2ZWN0b3JbaV0gLz0gc3VtIHx8IDE7CiAgfQogIHJldHVybiB2ZWN0b3I7Cn0K",
    "app/ai/math/gemv.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIGdlbXYob3V0cHV0LCBtYXRyaXgsIHJvd3MsIGNvbHMsIHZlY3RvcikgewogIGZvciAobGV0IHIgPSAwOyByIDwgcm93czsgciArPSAxKSB7CiAgICBsZXQgc3VtID0gMDsKICAgIGZvciAobGV0IGMgPSAwOyBjIDwgY29sczsgYyArPSAxKSB7CiAgICAgIHN1bSArPSBtYXRyaXhbciAqIGNvbHMgKyBjXSAqIHZlY3RvcltjXTsKICAgIH0KICAgIG91dHB1dFtyXSA9IHN1bTsKICB9CiAgcmV0dXJuIG91dHB1dDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGFkZEJpYXModmVjdG9yLCBiaWFzKSB7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZWN0b3IubGVuZ3RoOyBpICs9IDEpIHsKICAgIHZlY3RvcltpXSArPSBiaWFzW2ldOwogIH0KICByZXR1cm4gdmVjdG9yOwp9Cg==",
    "app/ai/math/optim.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIGNsaXBHcmFkaWVudHMoZ3JhZHMsIGNsaXBWYWx1ZSkgewogIGlmICghY2xpcFZhbHVlKSByZXR1cm4gZ3JhZHM7CiAgY29uc3QgY2xpcFNxID0gY2xpcFZhbHVlICogY2xpcFZhbHVlOwogIGxldCB0b3RhbFNxID0gMDsKICBmb3IgKGxldCBpID0gMDsgaSA8IGdyYWRzLmxlbmd0aDsgaSArPSAxKSB7CiAgICB0b3RhbFNxICs9IGdyYWRzW2ldICogZ3JhZHNbaV07CiAgfQogIGlmICh0b3RhbFNxID4gY2xpcFNxKSB7CiAgICBjb25zdCBzY2FsZSA9IGNsaXBWYWx1ZSAvIE1hdGguc3FydCh0b3RhbFNxKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JhZHMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgZ3JhZHNbaV0gKj0gc2NhbGU7CiAgICB9CiAgfQogIHJldHVybiBncmFkczsKfQoKZXhwb3J0IGZ1bmN0aW9uIGFwcGx5R3JhZGllbnRzKHdlaWdodHMsIGdyYWRzLCBscikgewogIGZvciAobGV0IGkgPSAwOyBpIDwgd2VpZ2h0cy5sZW5ndGg7IGkgKz0gMSkgewogICAgd2VpZ2h0c1tpXSAtPSBncmFkc1tpXSAqIGxyOwogIH0KfQo=",
    "app/ai/models/tiny_gru.js": "data:text/javascript;base64,aW1wb3J0IHsgQUNUSU9OX0NPVU5ULCBTWU1CT0xfQ09VTlQgfSBmcm9tICdhcHAvZGF0YS9jb25zdGFudHMuanMnOwppbXBvcnQgeyBnZW12LCBhZGRCaWFzIH0gZnJvbSAnYXBwL2FpL21hdGgvZ2Vtdi5qcyc7CmltcG9ydCB7IHNvZnRtYXgsIHRhbmggfSBmcm9tICdhcHAvYWkvbWF0aC9hY3RpdmF0aW9ucy5qcyc7Cgpjb25zdCBJTlBVVF9TSVpFID0gMTI4Owpjb25zdCBISURERU5fU0laRSA9IDY0Owpjb25zdCBPVVRQVVRfU0laRSA9IEFDVElPTl9DT1VOVCArIFNZTUJPTF9DT1VOVCArIDE7CgpmdW5jdGlvbiBzaWdtb2lkKHZlY3RvcikgewogIGZvciAobGV0IGkgPSAwOyBpIDwgdmVjdG9yLmxlbmd0aDsgaSArPSAxKSB7CiAgICB2ZWN0b3JbaV0gPSAxIC8gKDEgKyBNYXRoLmV4cCgtdmVjdG9yW2ldKSk7CiAgfQogIHJldHVybiB2ZWN0b3I7Cn0KCmZ1bmN0aW9uIGRlY29kZVdlaWdodHModWludDgpIHsKICBjb25zdCBzY2FsZSA9IDEgLyAxMjg7CiAgY29uc3Qgb2Zmc2V0ID0gLTE7CiAgY29uc3QgZmxvYXQzMiA9IG5ldyBGbG9hdDMyQXJyYXkodWludDgubGVuZ3RoKTsKICBmb3IgKGxldCBpID0gMDsgaSA8IHVpbnQ4Lmxlbmd0aDsgaSArPSAxKSB7CiAgICBmbG9hdDMyW2ldID0gdWludDhbaV0gKiBzY2FsZSArIG9mZnNldDsKICB9CiAgcmV0dXJuIGZsb2F0MzI7Cn0KCmV4cG9ydCBjbGFzcyBUaW55R1JVIHsKICBjb25zdHJ1Y3Rvcih7IHdlaWdodHMgfSkgewogICAgY29uc3QgcGFyYW1zID0gd2VpZ2h0cyBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSA/IHdlaWdodHMgOiBkZWNvZGVXZWlnaHRzKHdlaWdodHMpOwogICAgbGV0IGN1cnNvciA9IDA7CiAgICBjb25zdCBnYXRlU2l6ZSA9IEhJRERFTl9TSVpFICogSU5QVVRfU0laRTsKICAgIGNvbnN0IHJlY3VyU2l6ZSA9IEhJRERFTl9TSVpFICogSElEREVOX1NJWkU7CiAgICBjb25zdCBiaWFzU2l6ZSA9IEhJRERFTl9TSVpFOwoKICAgIHRoaXMud3ogPSBwYXJhbXMuc3ViYXJyYXkoY3Vyc29yLCBjdXJzb3IgKyBnYXRlU2l6ZSk7CiAgICBjdXJzb3IgKz0gZ2F0ZVNpemU7CiAgICB0aGlzLnV6ID0gcGFyYW1zLnN1YmFycmF5KGN1cnNvciwgY3Vyc29yICsgcmVjdXJTaXplKTsKICAgIGN1cnNvciArPSByZWN1clNpemU7CiAgICB0aGlzLmJ6ID0gcGFyYW1zLnN1YmFycmF5KGN1cnNvciwgY3Vyc29yICsgYmlhc1NpemUpOwogICAgY3Vyc29yICs9IGJpYXNTaXplOwoKICAgIHRoaXMud3IgPSBwYXJhbXMuc3ViYXJyYXkoY3Vyc29yLCBjdXJzb3IgKyBnYXRlU2l6ZSk7CiAgICBjdXJzb3IgKz0gZ2F0ZVNpemU7CiAgICB0aGlzLnVyID0gcGFyYW1zLnN1YmFycmF5KGN1cnNvciwgY3Vyc29yICsgcmVjdXJTaXplKTsKICAgIGN1cnNvciArPSByZWN1clNpemU7CiAgICB0aGlzLmJyID0gcGFyYW1zLnN1YmFycmF5KGN1cnNvciwgY3Vyc29yICsgYmlhc1NpemUpOwogICAgY3Vyc29yICs9IGJpYXNTaXplOwoKICAgIHRoaXMud2ggPSBwYXJhbXMuc3ViYXJyYXkoY3Vyc29yLCBjdXJzb3IgKyBnYXRlU2l6ZSk7CiAgICBjdXJzb3IgKz0gZ2F0ZVNpemU7CiAgICB0aGlzLnVoID0gcGFyYW1zLnN1YmFycmF5KGN1cnNvciwgY3Vyc29yICsgcmVjdXJTaXplKTsKICAgIGN1cnNvciArPSByZWN1clNpemU7CiAgICB0aGlzLmJoID0gcGFyYW1zLnN1YmFycmF5KGN1cnNvciwgY3Vyc29yICsgYmlhc1NpemUpOwogICAgY3Vyc29yICs9IGJpYXNTaXplOwoKICAgIGNvbnN0IHcyU2l6ZSA9IE9VVFBVVF9TSVpFICogSElEREVOX1NJWkU7CiAgICB0aGlzLncyID0gcGFyYW1zLnN1YmFycmF5KGN1cnNvciwgY3Vyc29yICsgdzJTaXplKTsKICAgIGN1cnNvciArPSB3MlNpemU7CiAgICBjb25zdCBiMlNpemUgPSBPVVRQVVRfU0laRTsKICAgIHRoaXMuYjIgPSBwYXJhbXMuc3ViYXJyYXkoY3Vyc29yLCBjdXJzb3IgKyBiMlNpemUpOwoKICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOwogICAgdGhpcy5oaWRkZW5TdGF0ZSA9IG5ldyBGbG9hdDMyQXJyYXkoSElEREVOX1NJWkUpOwogICAgdGhpcy50bXAxID0gbmV3IEZsb2F0MzJBcnJheShISURERU5fU0laRSk7CiAgICB0aGlzLnRtcDIgPSBuZXcgRmxvYXQzMkFycmF5KEhJRERFTl9TSVpFKTsKICAgIHRoaXMub3V0cHV0ID0gbmV3IEZsb2F0MzJBcnJheShPVVRQVVRfU0laRSk7CiAgICB0aGlzLmNhY2hlID0gbnVsbDsKICB9CgogIHJlc2V0KCkgewogICAgdGhpcy5oaWRkZW5TdGF0ZS5maWxsKDApOwogIH0KCiAgZm9yd2FyZChpbnB1dCkgewogICAgY29uc3QgeiA9IHRoaXMudG1wMTsKICAgIGNvbnN0IHIgPSB0aGlzLnRtcDI7CiAgICBnZW12KHosIHRoaXMud3osIEhJRERFTl9TSVpFLCBJTlBVVF9TSVpFLCBpbnB1dCk7CiAgICBhZGRCaWFzKHosIHRoaXMuYnopOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBISURERU5fU0laRTsgaSArPSAxKSB7CiAgICAgIGxldCBzdW0gPSB6W2ldOwogICAgICBmb3IgKGxldCBoID0gMDsgaCA8IEhJRERFTl9TSVpFOyBoICs9IDEpIHsKICAgICAgICBzdW0gKz0gdGhpcy51eltpICogSElEREVOX1NJWkUgKyBoXSAqIHRoaXMuaGlkZGVuU3RhdGVbaF07CiAgICAgIH0KICAgICAgeltpXSA9IHN1bTsKICAgIH0KICAgIHNpZ21vaWQoeik7CgogICAgZ2VtdihyLCB0aGlzLndyLCBISURERU5fU0laRSwgSU5QVVRfU0laRSwgaW5wdXQpOwogICAgYWRkQmlhcyhyLCB0aGlzLmJyKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgSElEREVOX1NJWkU7IGkgKz0gMSkgewogICAgICBsZXQgc3VtID0gcltpXTsKICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCBISURERU5fU0laRTsgaCArPSAxKSB7CiAgICAgICAgc3VtICs9IHRoaXMudXJbaSAqIEhJRERFTl9TSVpFICsgaF0gKiB0aGlzLmhpZGRlblN0YXRlW2hdOwogICAgICB9CiAgICAgIHJbaV0gPSBzdW07CiAgICB9CiAgICBzaWdtb2lkKHIpOwoKICAgIGNvbnN0IGhIYXQgPSBuZXcgRmxvYXQzMkFycmF5KEhJRERFTl9TSVpFKTsKICAgIGdlbXYoaEhhdCwgdGhpcy53aCwgSElEREVOX1NJWkUsIElOUFVUX1NJWkUsIGlucHV0KTsKICAgIGFkZEJpYXMoaEhhdCwgdGhpcy5iaCk7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEhJRERFTl9TSVpFOyBpICs9IDEpIHsKICAgICAgbGV0IHN1bSA9IGhIYXRbaV07CiAgICAgIGZvciAobGV0IGggPSAwOyBoIDwgSElEREVOX1NJWkU7IGggKz0gMSkgewogICAgICAgIHN1bSArPSB0aGlzLnVoW2kgKiBISURERU5fU0laRSArIGhdICogKHJbaF0gKiB0aGlzLmhpZGRlblN0YXRlW2hdKTsKICAgICAgfQogICAgICBoSGF0W2ldID0gc3VtOwogICAgfQogICAgdGFuaChoSGF0KTsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEhJRERFTl9TSVpFOyBpICs9IDEpIHsKICAgICAgdGhpcy5oaWRkZW5TdGF0ZVtpXSA9IHpbaV0gKiB0aGlzLmhpZGRlblN0YXRlW2ldICsgKDEgLSB6W2ldKSAqIGhIYXRbaV07CiAgICB9CgogICAgZ2Vtdih0aGlzLm91dHB1dCwgdGhpcy53MiwgT1VUUFVUX1NJWkUsIEhJRERFTl9TSVpFLCB0aGlzLmhpZGRlblN0YXRlKTsKICAgIGFkZEJpYXModGhpcy5vdXRwdXQsIHRoaXMuYjIpOwoKICAgIGNvbnN0IGFjdGlvblNsaWNlID0gdGhpcy5vdXRwdXQuc3ViYXJyYXkoMCwgQUNUSU9OX0NPVU5UKTsKICAgIGNvbnN0IHN5bWJvbFNsaWNlID0gdGhpcy5vdXRwdXQuc3ViYXJyYXkoQUNUSU9OX0NPVU5ULCBBQ1RJT05fQ09VTlQgKyBTWU1CT0xfQ09VTlQpOwogICAgY29uc3QgYmFzZWxpbmUgPSB0aGlzLm91dHB1dFtPVVRQVVRfU0laRSAtIDFdOwoKICAgIGNvbnN0IGFjdGlvblByb2JzID0gRmxvYXQzMkFycmF5LmZyb20oYWN0aW9uU2xpY2UpOwogICAgc29mdG1heChhY3Rpb25Qcm9icyk7CiAgICBjb25zdCBzeW1ib2xQcm9icyA9IEZsb2F0MzJBcnJheS5mcm9tKHN5bWJvbFNsaWNlKTsKICAgIHNvZnRtYXgoc3ltYm9sUHJvYnMpOwoKICAgIHRoaXMuY2FjaGUgPSB7CiAgICAgIGlucHV0OiBGbG9hdDMyQXJyYXkuZnJvbShpbnB1dCksCiAgICAgIGhpZGRlbjogRmxvYXQzMkFycmF5LmZyb20odGhpcy5oaWRkZW5TdGF0ZSksCiAgICAgIGFjdGlvblByb2JzLAogICAgICBzeW1ib2xQcm9icywKICAgICAgYmFzZWxpbmUsCiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIGFjdGlvblByb2JzLAogICAgICBzeW1ib2xQcm9icywKICAgICAgYmFzZWxpbmUsCiAgICB9OwogIH0KCiAgY29tcHV0ZUdyYWRpZW50cygpIHsKICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHRoaXMucGFyYW1zLmxlbmd0aCk7CiAgfQoKICBzZXJpYWxpemUoKSB7CiAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0aGlzLnBhcmFtcyk7CiAgfQoKICBsb2FkV2VpZ2h0cyhhcnJheSkgewogICAgaWYgKCFhcnJheSB8fCBhcnJheS5sZW5ndGggIT09IHRoaXMucGFyYW1zLmxlbmd0aCkgcmV0dXJuOwogICAgdGhpcy5wYXJhbXMuc2V0KGFycmF5KTsKICB9Cn0KCgo=",
    "app/ai/models/tiny_mlp.js": "data:text/javascript;base64,aW1wb3J0IHsgQUNUSU9OX0NPVU5ULCBTWU1CT0xfQ09VTlQgfSBmcm9tICdhcHAvZGF0YS9jb25zdGFudHMuanMnOwppbXBvcnQgeyBnZW12LCBhZGRCaWFzIH0gZnJvbSAnYXBwL2FpL21hdGgvZ2Vtdi5qcyc7CmltcG9ydCB7IHJlbHUsIHNvZnRtYXggfSBmcm9tICdhcHAvYWkvbWF0aC9hY3RpdmF0aW9ucy5qcyc7Cgpjb25zdCBJTlBVVF9TSVpFID0gMTI4Owpjb25zdCBISURERU5fU0laRSA9IDY0Owpjb25zdCBPVVRQVVRfU0laRSA9IEFDVElPTl9DT1VOVCArIFNZTUJPTF9DT1VOVCArIDE7CgpmdW5jdGlvbiBkZWNvZGVXZWlnaHRzKHVpbnQ4KSB7CiAgY29uc3Qgc2NhbGUgPSAxIC8gMTI4OwogIGNvbnN0IG9mZnNldCA9IC0xOwogIGNvbnN0IGZsb2F0MzIgPSBuZXcgRmxvYXQzMkFycmF5KHVpbnQ4Lmxlbmd0aCk7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCB1aW50OC5sZW5ndGg7IGkgKz0gMSkgewogICAgZmxvYXQzMltpXSA9IHVpbnQ4W2ldICogc2NhbGUgKyBvZmZzZXQ7CiAgfQogIHJldHVybiBmbG9hdDMyOwp9CgpleHBvcnQgY2xhc3MgVGlueU1MUCB7CiAgY29uc3RydWN0b3IoeyB3ZWlnaHRzIH0pIHsKICAgIGNvbnN0IHBhcmFtcyA9IHdlaWdodHMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgPyB3ZWlnaHRzIDogZGVjb2RlV2VpZ2h0cyh3ZWlnaHRzKTsKICAgIGNvbnN0IHcxU2l6ZSA9IElOUFVUX1NJWkUgKiBISURERU5fU0laRTsKICAgIGNvbnN0IGIxU2l6ZSA9IEhJRERFTl9TSVpFOwogICAgY29uc3QgdzJTaXplID0gT1VUUFVUX1NJWkUgKiBISURERU5fU0laRTsKICAgIGNvbnN0IGIyU2l6ZSA9IE9VVFBVVF9TSVpFOwoKICAgIHRoaXMudzEgPSBuZXcgRmxvYXQzMkFycmF5KHBhcmFtcy5idWZmZXIsIHBhcmFtcy5ieXRlT2Zmc2V0LCB3MVNpemUpOwogICAgdGhpcy5iMSA9IG5ldyBGbG9hdDMyQXJyYXkocGFyYW1zLmJ1ZmZlciwgcGFyYW1zLmJ5dGVPZmZzZXQgKyB3MVNpemUgKiA0LCBiMVNpemUpOwogICAgdGhpcy53MiA9IG5ldyBGbG9hdDMyQXJyYXkoCiAgICAgIHBhcmFtcy5idWZmZXIsCiAgICAgIHBhcmFtcy5ieXRlT2Zmc2V0ICsgKHcxU2l6ZSArIGIxU2l6ZSkgKiA0LAogICAgICB3MlNpemUsCiAgICApOwogICAgdGhpcy5iMiA9IG5ldyBGbG9hdDMyQXJyYXkoCiAgICAgIHBhcmFtcy5idWZmZXIsCiAgICAgIHBhcmFtcy5ieXRlT2Zmc2V0ICsgKHcxU2l6ZSArIGIxU2l6ZSArIHcyU2l6ZSkgKiA0LAogICAgICBiMlNpemUsCiAgICApOwoKICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOwogICAgdGhpcy5oaWRkZW4gPSBuZXcgRmxvYXQzMkFycmF5KEhJRERFTl9TSVpFKTsKICAgIHRoaXMub3V0cHV0ID0gbmV3IEZsb2F0MzJBcnJheShPVVRQVVRfU0laRSk7CiAgICB0aGlzLmNhY2hlID0gbnVsbDsKICB9CgogIGZvcndhcmQoaW5wdXQpIHsKICAgIGNvbnN0IGhpZGRlbiA9IHRoaXMuaGlkZGVuOwogICAgZ2VtdihoaWRkZW4sIHRoaXMudzEsIEhJRERFTl9TSVpFLCBJTlBVVF9TSVpFLCBpbnB1dCk7CiAgICBhZGRCaWFzKGhpZGRlbiwgdGhpcy5iMSk7CiAgICByZWx1KGhpZGRlbik7CgogICAgZ2Vtdih0aGlzLm91dHB1dCwgdGhpcy53MiwgT1VUUFVUX1NJWkUsIEhJRERFTl9TSVpFLCBoaWRkZW4pOwogICAgYWRkQmlhcyh0aGlzLm91dHB1dCwgdGhpcy5iMik7CgogICAgY29uc3QgYWN0aW9uU2xpY2UgPSB0aGlzLm91dHB1dC5zdWJhcnJheSgwLCBBQ1RJT05fQ09VTlQpOwogICAgY29uc3Qgc3ltYm9sU2xpY2UgPSB0aGlzLm91dHB1dC5zdWJhcnJheShBQ1RJT05fQ09VTlQsIEFDVElPTl9DT1VOVCArIFNZTUJPTF9DT1VOVCk7CiAgICBjb25zdCBiYXNlbGluZSA9IHRoaXMub3V0cHV0W09VVFBVVF9TSVpFIC0gMV07CgogICAgY29uc3QgYWN0aW9uUHJvYnMgPSBGbG9hdDMyQXJyYXkuZnJvbShhY3Rpb25TbGljZSk7CiAgICBzb2Z0bWF4KGFjdGlvblByb2JzKTsKICAgIGNvbnN0IHN5bWJvbFByb2JzID0gRmxvYXQzMkFycmF5LmZyb20oc3ltYm9sU2xpY2UpOwogICAgc29mdG1heChzeW1ib2xQcm9icyk7CgogICAgdGhpcy5jYWNoZSA9IHsKICAgICAgaW5wdXQ6IEZsb2F0MzJBcnJheS5mcm9tKGlucHV0KSwKICAgICAgaGlkZGVuOiBGbG9hdDMyQXJyYXkuZnJvbShoaWRkZW4pLAogICAgICBhY3Rpb25Qcm9icywKICAgICAgc3ltYm9sUHJvYnMsCiAgICAgIGJhc2VsaW5lLAogICAgfTsKCiAgICByZXR1cm4gewogICAgICBhY3Rpb25Qcm9icywKICAgICAgc3ltYm9sUHJvYnMsCiAgICAgIGJhc2VsaW5lLAogICAgfTsKICB9CgogIGNvbXB1dGVHcmFkaWVudHMoeyBhY3Rpb25JbmRleCwgc3ltYm9sSW5kZXgsIGFkdmFudGFnZSwgdGFyZ2V0VmFsdWUgfSkgewogICAgaWYgKCF0aGlzLmNhY2hlKSByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0aGlzLnBhcmFtcy5sZW5ndGgpOwogICAgY29uc3QgeyBpbnB1dCwgaGlkZGVuLCBhY3Rpb25Qcm9icywgc3ltYm9sUHJvYnMsIGJhc2VsaW5lIH0gPSB0aGlzLmNhY2hlOwogICAgY29uc3QgZ3JhZFcxID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLncxLmxlbmd0aCk7CiAgICBjb25zdCBncmFkQjEgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYjEubGVuZ3RoKTsKICAgIGNvbnN0IGdyYWRXMiA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy53Mi5sZW5ndGgpOwogICAgY29uc3QgZ3JhZEIyID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmIyLmxlbmd0aCk7CgogICAgY29uc3QgZ3JhZE91dHB1dCA9IG5ldyBGbG9hdDMyQXJyYXkoT1VUUFVUX1NJWkUpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBBQ1RJT05fQ09VTlQ7IGkgKz0gMSkgewogICAgICBsZXQgZyA9IC1hY3Rpb25Qcm9ic1tpXTsKICAgICAgaWYgKGkgPT09IGFjdGlvbkluZGV4KSBnICs9IDE7CiAgICAgIGdyYWRPdXRwdXRbaV0gPSBnICogYWR2YW50YWdlOwogICAgfQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBTWU1CT0xfQ09VTlQ7IGkgKz0gMSkgewogICAgICBsZXQgZyA9IC1zeW1ib2xQcm9ic1tpXTsKICAgICAgaWYgKGkgPT09IHN5bWJvbEluZGV4KSBnICs9IDE7CiAgICAgIGdyYWRPdXRwdXRbQUNUSU9OX0NPVU5UICsgaV0gPSBnICogYWR2YW50YWdlOwogICAgfQogICAgY29uc3QgdmFsdWVFcnJvciA9IGJhc2VsaW5lIC0gdGFyZ2V0VmFsdWU7CiAgICBncmFkT3V0cHV0W09VVFBVVF9TSVpFIC0gMV0gPSB2YWx1ZUVycm9yOwoKICAgIGZvciAobGV0IG8gPSAwOyBvIDwgT1VUUFVUX1NJWkU7IG8gKz0gMSkgewogICAgICBjb25zdCBnbyA9IGdyYWRPdXRwdXRbb107CiAgICAgIGdyYWRCMltvXSArPSBnbzsKICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCBISURERU5fU0laRTsgaCArPSAxKSB7CiAgICAgICAgZ3JhZFcyW28gKiBISURERU5fU0laRSArIGhdICs9IGdvICogaGlkZGVuW2hdOwogICAgICB9CiAgICB9CgogICAgY29uc3QgZ3JhZEhpZGRlbiA9IG5ldyBGbG9hdDMyQXJyYXkoSElEREVOX1NJWkUpOwogICAgZm9yIChsZXQgbyA9IDA7IG8gPCBPVVRQVVRfU0laRTsgbyArPSAxKSB7CiAgICAgIGNvbnN0IGdvID0gZ3JhZE91dHB1dFtvXTsKICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCBISURERU5fU0laRTsgaCArPSAxKSB7CiAgICAgICAgZ3JhZEhpZGRlbltoXSArPSB0aGlzLncyW28gKiBISURERU5fU0laRSArIGhdICogZ287CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKGxldCBoID0gMDsgaCA8IEhJRERFTl9TSVpFOyBoICs9IDEpIHsKICAgICAgaWYgKGhpZGRlbltoXSA8PSAwKSB7CiAgICAgICAgZ3JhZEhpZGRlbltoXSA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKGxldCBoID0gMDsgaCA8IEhJRERFTl9TSVpFOyBoICs9IDEpIHsKICAgICAgY29uc3QgZ2ggPSBncmFkSGlkZGVuW2hdOwogICAgICBncmFkQjFbaF0gKz0gZ2g7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgSU5QVVRfU0laRTsgaSArPSAxKSB7CiAgICAgICAgZ3JhZFcxW2ggKiBJTlBVVF9TSVpFICsgaV0gKz0gZ2ggKiBpbnB1dFtpXTsKICAgICAgfQogICAgfQoKICAgIGNvbnN0IGdyYWQgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMucGFyYW1zLmxlbmd0aCk7CiAgICBncmFkLnNldChncmFkVzEsIDApOwogICAgZ3JhZC5zZXQoZ3JhZEIxLCBncmFkVzEubGVuZ3RoKTsKICAgIGdyYWQuc2V0KGdyYWRXMiwgZ3JhZFcxLmxlbmd0aCArIGdyYWRCMS5sZW5ndGgpOwogICAgZ3JhZC5zZXQoZ3JhZEIyLCBncmFkVzEubGVuZ3RoICsgZ3JhZEIxLmxlbmd0aCArIGdyYWRXMi5sZW5ndGgpOwogICAgcmV0dXJuIGdyYWQ7CiAgfQoKICBhcHBseUdyYWRpZW50cyhncmFkLCBscikgewogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhcmFtcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICB0aGlzLnBhcmFtc1tpXSAtPSBncmFkW2ldICogbHI7CiAgICB9CiAgfQoKICBzZXJpYWxpemUoKSB7CiAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0aGlzLnBhcmFtcyk7CiAgfQoKICBsb2FkV2VpZ2h0cyhhcnJheSkgewogICAgaWYgKCFhcnJheSB8fCBhcnJheS5sZW5ndGggIT09IHRoaXMucGFyYW1zLmxlbmd0aCkgcmV0dXJuOwogICAgdGhpcy5wYXJhbXMuc2V0KGFycmF5KTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUaW55TUxQRnJvbUJ5dGVzKGJ5dGVzKSB7CiAgcmV0dXJuIG5ldyBUaW55TUxQKHsgd2VpZ2h0czogYnl0ZXMgfSk7Cn0KCmV4cG9ydCBjb25zdCBUSU5ZX01MUF9NRVRBID0gewogIGlucHV0U2l6ZTogSU5QVVRfU0laRSwKICBoaWRkZW5TaXplOiBISURERU5fU0laRSwKICBvdXRwdXRTaXplOiBPVVRQVVRfU0laRSwKfTsKCg==",
    "app/assets/assets.manifest.js": "data:text/javascript;base64,aW1wb3J0IHsgU1BSSVRFU0hFRVRfQjY0IH0gZnJvbSAnYXBwL2Fzc2V0cy9zcHJpdGVzaGVldC5iNjQuanMnOwppbXBvcnQgeyBFTU9KSV9CSVRNQVBfQjY0IH0gZnJvbSAnYXBwL2Fzc2V0cy9lbW9qaV9iaXRtYXAuYjY0LmpzJzsKCmV4cG9ydCBjb25zdCBTUFJJVEVfTUFOSUZFU1QgPSB7CiAgdmVyc2lvbjogMSwKICBtZXRhOiB7CiAgICBpbWFnZTogU1BSSVRFU0hFRVRfQjY0LAogICAgc2l6ZTogeyB3OiAxLCBoOiAxIH0sCiAgICBmb3JtYXQ6ICdSR0JBODg4OCcsCiAgfSwKICBmcmFtZXM6IHsKICAgIGFnZW50X2lkbGU6IHsgZnJhbWU6IHsgeDogMCwgeTogMCwgdzogMSwgaDogMSB9IH0sCiAgICBhZ2VudF9tb3ZlOiB7IGZyYW1lOiB7IHg6IDAsIHk6IDAsIHc6IDEsIGg6IDEgfSB9LAogICAgcmVzb3VyY2VfZm9vZDogeyBmcmFtZTogeyB4OiAwLCB5OiAwLCB3OiAxLCBoOiAxIH0gfSwKICAgIHN0cnVjdHVyZV9maXJlOiB7IGZyYW1lOiB7IHg6IDAsIHk6IDAsIHc6IDEsIGg6IDEgfSB9LAogIH0sCn07CgpleHBvcnQgY29uc3QgRU1PSklfQklUTUFQID0gewogIGltYWdlOiBFTU9KSV9CSVRNQVBfQjY0LAogIGNlbGxTaXplOiAxLAogIGNvbHVtbnM6IDEsCiAgcm93czogMSwKICBjb2RlczogWyfwn5mCJ10sCn07Cg==",
    "app/assets/emoji_bitmap.b64.js": "data:text/javascript;base64,ZXhwb3J0IGNvbnN0IEVNT0pJX0JJVE1BUF9CNjQgPSAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQURVbEVRVlI0Mm1QOC81K2hIZ0FIZ2dKL1A0VzhWUUFBQUFCSlJVNUVya0pnZ2c9PSI7Cg==",
    "app/assets/spritesheet.b64.js": "data:text/javascript;base64,ZXhwb3J0IGNvbnN0IFNQUklURVNIRUVUX0I2NCA9ICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybVA4ei9DL0h3QUZnd0ovbGhYM3NBQUFBQUJKUlU1RXJrSmdnZz09IjsK",
    "app/core/comms.js": "data:text/javascript;base64,aW1wb3J0IHsgU1lNQk9MX0NPVU5UIH0gZnJvbSAnYXBwL2RhdGEvY29uc3RhbnRzLmpzJzsKCmV4cG9ydCBjbGFzcyBDb21tdW5pY2F0aW9uc0NoYW5uZWwgewogIGNvbnN0cnVjdG9yKHsgYWxwaGFiZXQsIGNvc3QgPSAwLjEgfSkgewogICAgdGhpcy5hbHBoYWJldCA9IGFscGhhYmV0LnNsaWNlKDAsIFNZTUJPTF9DT1VOVCk7CiAgICB0aGlzLmNvc3QgPSBjb3N0OwogICAgdGhpcy5sb2cgPSBbXTsKICB9CgogIHNlbmQoYWdlbnRJZCwgc3ltYm9scykgewogICAgY29uc3QgcGF5bG9hZCA9IHN5bWJvbHMuam9pbignJyk7CiAgICB0aGlzLmxvZy5wdXNoKHsgdGltZTogRGF0ZS5ub3coKSwgYWdlbnRJZCwgbWVzc2FnZTogcGF5bG9hZCB9KTsKICAgIGlmICh0aGlzLmxvZy5sZW5ndGggPiAyMDApIHsKICAgICAgdGhpcy5sb2cuc2hpZnQoKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmNvc3QgKiBzeW1ib2xzLmxlbmd0aDsKICB9CgogIHJlY2VudChsaW1pdCA9IDIwKSB7CiAgICByZXR1cm4gdGhpcy5sb2cuc2xpY2UoLWxpbWl0KTsKICB9Cn0K",
    "app/core/ecs.js": "data:text/javascript;base64,ZXhwb3J0IGNsYXNzIEVDUyB7CiAgY29uc3RydWN0b3IoKSB7CiAgICB0aGlzLm5leHRJZCA9IDE7CiAgICB0aGlzLmVudGl0aWVzID0gbmV3IFNldCgpOwogICAgdGhpcy5jb21wb25lbnRzID0gbmV3IE1hcCgpOwogICAgdGhpcy5zeXN0ZW1zID0gW107CiAgfQoKICBjcmVhdGVFbnRpdHkoKSB7CiAgICBjb25zdCBpZCA9IHRoaXMubmV4dElkOwogICAgdGhpcy5uZXh0SWQgKz0gMTsKICAgIHRoaXMuZW50aXRpZXMuYWRkKGlkKTsKICAgIHJldHVybiBpZDsKICB9CgogIHJlbW92ZUVudGl0eShpZCkgewogICAgdGhpcy5lbnRpdGllcy5kZWxldGUoaWQpOwogICAgZm9yIChjb25zdCBzdG9yZSBvZiB0aGlzLmNvbXBvbmVudHMudmFsdWVzKCkpIHsKICAgICAgc3RvcmUuZGVsZXRlKGlkKTsKICAgIH0KICB9CgogIHJlZ2lzdGVyQ29tcG9uZW50KG5hbWUpIHsKICAgIGlmICghdGhpcy5jb21wb25lbnRzLmhhcyhuYW1lKSkgewogICAgICB0aGlzLmNvbXBvbmVudHMuc2V0KG5hbWUsIG5ldyBNYXAoKSk7CiAgICB9CiAgfQoKICBhZGRDb21wb25lbnQoZW50aXR5LCBuYW1lLCBkYXRhKSB7CiAgICB0aGlzLnJlZ2lzdGVyQ29tcG9uZW50KG5hbWUpOwogICAgdGhpcy5jb21wb25lbnRzLmdldChuYW1lKS5zZXQoZW50aXR5LCBkYXRhKTsKICB9CgogIGdldENvbXBvbmVudChlbnRpdHksIG5hbWUpIHsKICAgIGNvbnN0IHN0b3JlID0gdGhpcy5jb21wb25lbnRzLmdldChuYW1lKTsKICAgIHJldHVybiBzdG9yZSA/IHN0b3JlLmdldChlbnRpdHkpIDogdW5kZWZpbmVkOwogIH0KCiAgZ2V0Q29tcG9uZW50cyhuYW1lKSB7CiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzLmdldChuYW1lKSA/PyBuZXcgTWFwKCk7CiAgfQoKICBhZGRTeXN0ZW0oc3lzdGVtKSB7CiAgICB0aGlzLnN5c3RlbXMucHVzaChzeXN0ZW0pOwogIH0KCiAgcnVuU3lzdGVtcyhkZWx0YSkgewogICAgZm9yIChjb25zdCBzeXN0ZW0gb2YgdGhpcy5zeXN0ZW1zKSB7CiAgICAgIHN5c3RlbShkZWx0YSwgdGhpcyk7CiAgICB9CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24gcXVlcnlFbnRpdGllcyhlY3MsIGNvbXBvbmVudE5hbWVzKSB7CiAgY29uc3QgW2ZpcnN0LCAuLi5yZXN0XSA9IGNvbXBvbmVudE5hbWVzOwogIGNvbnN0IGJhc2UgPSBlY3MuZ2V0Q29tcG9uZW50cyhmaXJzdCk7CiAgY29uc3QgZW50aXRpZXMgPSBbXTsKICBmb3IgKGNvbnN0IFtlbnRpdHksIGRhdGFdIG9mIGJhc2UuZW50cmllcygpKSB7CiAgICBsZXQgaW5jbHVkZSA9IHRydWU7CiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgcmVzdCkgewogICAgICBjb25zdCBjb21wID0gZWNzLmdldENvbXBvbmVudChlbnRpdHksIG5hbWUpOwogICAgICBpZiAoIWNvbXApIHsKICAgICAgICBpbmNsdWRlID0gZmFsc2U7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGlmIChpbmNsdWRlKSB7CiAgICAgIGVudGl0aWVzLnB1c2goeyBlbnRpdHksIGNvbXBvbmVudHM6IHsgW2ZpcnN0XTogZGF0YSB9IH0pOwogICAgfQogIH0KICByZXR1cm4gZW50aXRpZXM7Cn0K",
    "app/core/sim.js": "data:text/javascript;base64,aW1wb3J0IHsgRUNTIH0gZnJvbSAnYXBwL2NvcmUvZWNzLmpzJzsKaW1wb3J0IHsgV29ybGQgfSBmcm9tICdhcHAvY29yZS93b3JsZC5qcyc7CmltcG9ydCB7IENvbW11bmljYXRpb25zQ2hhbm5lbCB9IGZyb20gJ2FwcC9jb3JlL2NvbW1zLmpzJzsKaW1wb3J0IHsgU3Rvcnl0ZWxsZXIgfSBmcm9tICdhcHAvY29yZS9zdG9yeXRlbGxlci5qcyc7CmltcG9ydCB7CiAgQUNUSU9OUywKCiAgVEhJTktfRVZFUllfT1BUSU9OUywKICBERUZBVUxUX0FHRU5UX1RSQUlUUywKfSBmcm9tICdhcHAvZGF0YS9jb25zdGFudHMuanMnOwppbXBvcnQgeyBCQVNFX0NPTkZJRyB9IGZyb20gJ2FwcC9kYXRhL2NvbmZpZy5qcyc7CmltcG9ydCB7IGNyZWF0ZVRpbnlNTFBGcm9tQnl0ZXMgfSBmcm9tICdhcHAvYWkvbW9kZWxzL3RpbnlfbWxwLmpzJzsKaW1wb3J0IHsgVGlueUdSVSB9IGZyb20gJ2FwcC9haS9tb2RlbHMvdGlueV9ncnUuanMnOwppbXBvcnQgeyBCUkFJTl9ERUZBVUxUIH0gZnJvbSAnYXBwL2FpL2JyYWlucy9icmFpbi5kZWZhdWx0LnU4YXJyLmpzJzsKaW1wb3J0IHsgUmVpbmZvcmNlTGVhcm5lciB9IGZyb20gJ2FwcC9haS9sZWFybi9yZWluZm9yY2UuanMnOwoKZnVuY3Rpb24gc2FtcGxlRnJvbShwcm9icywgcmFuZCA9IE1hdGgucmFuZG9tKSB7CiAgbGV0IHN1bSA9IDA7CiAgY29uc3QgdGhyZXNob2xkID0gcmFuZCgpOwogIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvYnMubGVuZ3RoOyBpICs9IDEpIHsKICAgIHN1bSArPSBwcm9ic1tpXTsKICAgIGlmICh0aHJlc2hvbGQgPD0gc3VtKSByZXR1cm4gaTsKICB9CiAgcmV0dXJuIHByb2JzLmxlbmd0aCAtIDE7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUJyYWluKG1vZGVsKSB7CiAgc3dpdGNoIChtb2RlbCkgewogICAgY2FzZSAndGlueS1ncnUnOgogICAgICByZXR1cm4gbmV3IFRpbnlHUlUoeyB3ZWlnaHRzOiBuZXcgRmxvYXQzMkFycmF5KEJSQUlOX0RFRkFVTFQpIH0pOwogICAgY2FzZSAndGlueS1tbHAnOgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIGNyZWF0ZVRpbnlNTFBGcm9tQnl0ZXMoQlJBSU5fREVGQVVMVCk7CiAgfQp9CgpmdW5jdGlvbiBtYWtlVHJhaXRzKGluZGV4KSB7CiAgY29uc3QgdHJhaXRzID0gW107CiAgdHJhaXRzLnB1c2goREVGQVVMVF9BR0VOVF9UUkFJVFNbaW5kZXggJSBERUZBVUxUX0FHRU5UX1RSQUlUUy5sZW5ndGhdKTsKICBpZiAoaW5kZXggJSAzID09PSAwKSB0cmFpdHMucHVzaCgnY3VyaW91cycpOwogIGlmIChpbmRleCAlIDUgPT09IDApIHRyYWl0cy5wdXNoKCdyZXNpbGllbnQnKTsKICByZXR1cm4gdHJhaXRzOwp9CgpleHBvcnQgY2xhc3MgU2ltdWxhdGlvbiB7CiAgY29uc3RydWN0b3IoY29uZmlnID0gQkFTRV9DT05GSUcpIHsKICAgIHRoaXMuY29uZmlnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25maWcpKTsKICAgIHRoaXMuZWNzID0gbmV3IEVDUygpOwogICAgdGhpcy53b3JsZCA9IG5ldyBXb3JsZCh7CiAgICAgIHdpZHRoOiBjb25maWcud29ybGQud2lkdGgsCiAgICAgIGhlaWdodDogY29uZmlnLndvcmxkLmhlaWdodCwKICAgICAgc2VlZDogY29uZmlnLndvcmxkLnNlZWQsCiAgICB9KTsKICAgIHRoaXMuY29tbXVuaWNhdGlvbnMgPSBuZXcgQ29tbXVuaWNhdGlvbnNDaGFubmVsKHsKICAgICAgYWxwaGFiZXQ6IGNvbmZpZy5jb21tcy5hbHBoYWJldCwKICAgICAgY29zdDogY29uZmlnLmNvbW1zLm1lc3NhZ2VDb3N0LAogICAgfSk7CiAgICB0aGlzLnN0b3J5dGVsbGVyID0gbmV3IFN0b3J5dGVsbGVyKGNvbmZpZy5zdG9yeXRlbGxlcik7CiAgICB0aGlzLmFnZW50cyA9IFtdOwogICAgdGhpcy50aWNrID0gMDsKICAgIHRoaXMubGVhcm5lciA9IG5ldyBSZWluZm9yY2VMZWFybmVyKHsKICAgICAgbGVhcm5pbmdSYXRlOiBjb25maWcuYnJhaW5zLmxlYXJuaW5nUmF0ZSwKICAgICAgZ3JhZGllbnRDbGlwOiBjb25maWcuYnJhaW5zLmdyYWRpZW50Q2xpcCwKICAgIH0pOwogICAgdGhpcy5tZXRyaWNzID0gewogICAgICBhdmdFbmVyZ3k6IDEsCiAgICAgIGF2Z1NhdGlldHk6IDEsCiAgICAgIGxhc3RFdmVudDogbnVsbCwKICAgICAgdHJhaW5pbmdUaW1lOiAwLAogICAgfTsKCiAgICB0aGlzLnNwYXduQWdlbnRzKCk7CiAgfQoKICBzcGF3bkFnZW50cygpIHsKICAgIGNvbnN0IGNvdW50ID0gdGhpcy5jb25maWcuYWdlbnRzLmNvdW50OwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSArPSAxKSB7CiAgICAgIGNvbnN0IGVudGl0eSA9IHRoaXMuZWNzLmNyZWF0ZUVudGl0eSgpOwogICAgICBjb25zdCB0aWxlID0gdGhpcy53b3JsZC5yYW5kb21TcGF3blRpbGUoKTsKICAgICAgY29uc3QgYnJhaW4gPSBjcmVhdGVCcmFpbih0aGlzLmNvbmZpZy5icmFpbnMubW9kZWwpOwogICAgICBjb25zdCBhZ2VudCA9IHsKICAgICAgICBpZDogZW50aXR5LAogICAgICAgIGVudGl0eSwKICAgICAgICB4OiB0aWxlLngsCiAgICAgICAgeTogdGlsZS55LAogICAgICAgIGVuZXJneTogMSwKICAgICAgICBzYXRpZXR5OiAxLAogICAgICAgIHRoaW5rRXZlcnk6IHRoaXMuY29uZmlnLmFnZW50cy50aGlua0V2ZXJ5LAogICAgICAgIHJvbGU6ICdjb2xvbmlzdCcsCiAgICAgICAgdHJhaXRzOiBtYWtlVHJhaXRzKGkpLAogICAgICAgIGJyYWluLAogICAgICAgIHJld2FyZHM6IFtdLAogICAgICAgIGxhc3RBY3Rpb246IDAsCiAgICAgICAgbGFzdFN5bWJvbDogMCwKICAgICAgICBzeW1ib2xDb29sZG93bjogMCwKICAgICAgICB1c2VGU006IGZhbHNlLAogICAgICAgIG1lbW9yeTogW10sCiAgICAgICAgaW52ZW50b3J5OiB7IGZvb2Q6IDAsIHdvb2Q6IDAgfSwKICAgICAgICBmc21TdGF0ZTogJ2lkbGUnLAogICAgICAgIGNvb2xkb3duOiAwLAogICAgICB9OwogICAgICB0aGlzLmFnZW50cy5wdXNoKGFnZW50KTsKICAgICAgdGhpcy5lY3MuYWRkQ29tcG9uZW50KGVudGl0eSwgJ2FnZW50JywgYWdlbnQpOwogICAgICB0aGlzLmVjcy5hZGRDb21wb25lbnQoZW50aXR5LCAncG9zaXRpb24nLCB7IHg6IHRpbGUueCwgeTogdGlsZS55IH0pOwogICAgfQogIH0KCiAgYnVpbGRPYnNlcnZhdGlvbihhZ2VudCkgewogICAgY29uc3Qgb2JzID0gbmV3IEZsb2F0MzJBcnJheSgxMjgpOwogICAgb2JzWzBdID0gYWdlbnQueCAvIHRoaXMud29ybGQud2lkdGg7CiAgICBvYnNbMV0gPSBhZ2VudC55IC8gdGhpcy53b3JsZC5oZWlnaHQ7CiAgICBvYnNbMl0gPSBhZ2VudC5lbmVyZ3k7CiAgICBvYnNbM10gPSBhZ2VudC5zYXRpZXR5OwogICAgb2JzWzRdID0gYWdlbnQuaW52ZW50b3J5LmZvb2QgLyAxMDsKICAgIG9ic1s1XSA9IGFnZW50LmludmVudG9yeS53b29kIC8gMTA7CiAgICBjb25zdCB0aWxlID0gdGhpcy53b3JsZC50aWxlQXQoYWdlbnQueCwgYWdlbnQueSk7CiAgICBvYnNbMTBdID0gdGlsZS5yZXNvdXJjZXMgLyAxMDsKICAgIG9ic1sxMV0gPSB0aWxlLmRhbmdlciAvIDU7CiAgICBjb25zdCB0aGlua0V2ZXJ5SW5kZXggPSBUSElOS19FVkVSWV9PUFRJT05TLmluZGV4T2YoYWdlbnQudGhpbmtFdmVyeSk7CiAgICBvYnNbMTJdID0gdGhpbmtFdmVyeUluZGV4IC8gVEhJTktfRVZFUllfT1BUSU9OUy5sZW5ndGg7CiAgICBjb25zdCB0aW1lTm9ybSA9IHRoaXMud29ybGQudGltZU9mRGF5IC8gMzAwOwogICAgb2JzWzEzXSA9IHRpbWVOb3JtOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWdlbnQudHJhaXRzLmxlbmd0aCAmJiBpIDwgNTsgaSArPSAxKSB7CiAgICAgIG9ic1syMCArIGldID0gMTsKICAgIH0KICAgIHJldHVybiBvYnM7CiAgfQoKICBmc21Qb2xpY3koYWdlbnQpIHsKICAgIGlmIChhZ2VudC5jb29sZG93biA+IDApIHsKICAgICAgYWdlbnQuY29vbGRvd24gLT0gMTsKICAgICAgcmV0dXJuIHsgYWN0aW9uSW5kZXg6IDAsIHN5bWJvbEluZGV4OiAwIH07CiAgICB9CiAgICBpZiAoYWdlbnQuZnNtU3RhdGUgPT09ICdpZGxlJykgewogICAgICBpZiAoYWdlbnQuZW5lcmd5IDwgMC41KSB7CiAgICAgICAgYWdlbnQuZnNtU3RhdGUgPSAncmVzdCc7CiAgICAgICAgcmV0dXJuIHsgYWN0aW9uSW5kZXg6IEFDVElPTlMuaW5kZXhPZigncmVzdCcpLCBzeW1ib2xJbmRleDogMCB9OwogICAgICB9CiAgICAgIGFnZW50LmZzbVN0YXRlID0gJ3dhbmRlcic7CiAgICAgIHJldHVybiB7IGFjdGlvbkluZGV4OiBBQ1RJT05TLmluZGV4T2YoJ2V4cGxvcmUnKSwgc3ltYm9sSW5kZXg6IDAgfTsKICAgIH0KICAgIGlmIChhZ2VudC5mc21TdGF0ZSA9PT0gJ3dhbmRlcicpIHsKICAgICAgYWdlbnQuY29vbGRvd24gPSAyOwogICAgICBhZ2VudC5mc21TdGF0ZSA9ICdpZGxlJzsKICAgICAgcmV0dXJuIHsKICAgICAgICBhY3Rpb25JbmRleDogQUNUSU9OUy5pbmRleE9mKCdtb3ZlX25vcnRoJykgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KSwKICAgICAgICBzeW1ib2xJbmRleDogMCwKICAgICAgfTsKICAgIH0KICAgIHJldHVybiB7IGFjdGlvbkluZGV4OiAwLCBzeW1ib2xJbmRleDogMCB9OwogIH0KCiAgYXBwbHlBY3Rpb24oYWdlbnQsIGFjdGlvbkluZGV4KSB7CiAgICBjb25zdCBhY3Rpb24gPSBBQ1RJT05TW2FjdGlvbkluZGV4XSA/PyAnaWRsZSc7CiAgICBsZXQgcmV3YXJkID0gLTAuMDE7CiAgICBpZiAoYWN0aW9uLnN0YXJ0c1dpdGgoJ21vdmVfJykpIHsKICAgICAgbGV0IFtkeCwgZHldID0gWzAsIDBdOwogICAgICBpZiAoYWN0aW9uID09PSAnbW92ZV9ub3J0aCcpIGR5ID0gLTE7CiAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ21vdmVfc291dGgnKSBkeSA9IDE7CiAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ21vdmVfZWFzdCcpIGR4ID0gMTsKICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnbW92ZV93ZXN0JykgZHggPSAtMTsKICAgICAgY29uc3QgW254LCBueV0gPSB0aGlzLndvcmxkLndyYXAoYWdlbnQueCArIGR4LCBhZ2VudC55ICsgZHkpOwogICAgICBjb25zdCB0aWxlID0gdGhpcy53b3JsZC50aWxlQXQobngsIG55KTsKICAgICAgaWYgKHRoaXMud29ybGQuaXNQYXNzYWJsZSh0aWxlKSkgewogICAgICAgIGFnZW50LnggPSBueDsKICAgICAgICBhZ2VudC55ID0gbnk7CiAgICAgICAgcmV3YXJkICs9IDAuMDI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV3YXJkIC09IDAuMDI7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnZ2F0aGVyJykgewogICAgICBjb25zdCB0aWxlID0gdGhpcy53b3JsZC50aWxlQXQoYWdlbnQueCwgYWdlbnQueSk7CiAgICAgIGNvbnN0IGNvbGxlY3RlZCA9IHRoaXMud29ybGQuaGFydmVzdCh0aWxlLCAxKTsKICAgICAgYWdlbnQuaW52ZW50b3J5LmZvb2QgKz0gY29sbGVjdGVkOwogICAgICByZXdhcmQgKz0gY29sbGVjdGVkICogMC4yOwogICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdkcm9wJykgewogICAgICBjb25zdCB0aWxlID0gdGhpcy53b3JsZC50aWxlQXQoYWdlbnQueCwgYWdlbnQueSk7CiAgICAgIGlmIChhZ2VudC5pbnZlbnRvcnkuZm9vZCA+IDApIHsKICAgICAgICB0aGlzLndvcmxkLmRyb3BSZXNvdXJjZSh0aWxlLCAnZm9vZCcsIDEpOwogICAgICAgIGFnZW50LmludmVudG9yeS5mb29kIC09IDE7CiAgICAgICAgcmV3YXJkICs9IDAuMDU7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAncmVzdCcpIHsKICAgICAgYWdlbnQuZW5lcmd5ID0gTWF0aC5taW4oMSwgYWdlbnQuZW5lcmd5ICsgMC4xKTsKICAgICAgcmV3YXJkICs9IDAuMDM7CiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ3NpZ25hbCcpIHsKICAgICAgcmV3YXJkIC09IDAuMDI7CiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2RlZmVuZCcpIHsKICAgICAgcmV3YXJkIC09IDAuMDE7CiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2V4cGxvcmUnKSB7CiAgICAgIHJld2FyZCArPSAwLjAxOwogICAgfQoKICAgIGFnZW50LmVuZXJneSA9IE1hdGgubWF4KDAsIGFnZW50LmVuZXJneSAtIDAuMDEpOwogICAgYWdlbnQuc2F0aWV0eSA9IE1hdGgubWF4KDAsIGFnZW50LnNhdGlldHkgLSAwLjAwNSk7CiAgICBpZiAoYWdlbnQuc2F0aWV0eSA8PSAwLjIgJiYgYWdlbnQuaW52ZW50b3J5LmZvb2QgPiAwKSB7CiAgICAgIGFnZW50LmludmVudG9yeS5mb29kIC09IDE7CiAgICAgIGFnZW50LnNhdGlldHkgPSAxOwogICAgICByZXdhcmQgKz0gMC4xOwogICAgfQogICAgaWYgKGFnZW50LmVuZXJneSA8PSAwKSB7CiAgICAgIHJld2FyZCAtPSAwLjU7CiAgICB9CiAgICByZXR1cm4gcmV3YXJkOwogIH0KCiAgcHJvY2Vzc0NvbW11bmljYXRpb24oYWdlbnQsIHN5bWJvbEluZGV4KSB7CiAgICBpZiAoc3ltYm9sSW5kZXggPD0gMCkgcmV0dXJuIDA7CiAgICBjb25zdCBzeW1ib2wgPSB0aGlzLmNvbmZpZy5jb21tcy5hbHBoYWJldFtzeW1ib2xJbmRleCAlIHRoaXMuY29uZmlnLmNvbW1zLmFscGhhYmV0Lmxlbmd0aF07CiAgICByZXR1cm4gdGhpcy5jb21tdW5pY2F0aW9ucy5zZW5kKGFnZW50LmlkLCBbc3ltYm9sXSk7CiAgfQoKICBhdXRvVGhyb3R0bGUoKSB7CiAgICBpZiAodGhpcy5hZ2VudHMubGVuZ3RoID4gNDApIHsKICAgICAgZm9yIChjb25zdCBhZ2VudCBvZiB0aGlzLmFnZW50cykgewogICAgICAgIGFnZW50LnRoaW5rRXZlcnkgPSAyOwogICAgICB9CiAgICB9CiAgfQoKICBsZWFybihhZ2VudCkgewogICAgaWYgKCF0aGlzLmNvbmZpZy5hZ2VudHMuYWxsb3dMZWFybmluZykgcmV0dXJuOwogICAgaWYgKCFhZ2VudC5tZW1vcnkubGVuZ3RoKSByZXR1cm47CiAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgY29uc3QgcmV0dXJucyA9IHRoaXMubGVhcm5lci5jb21wdXRlUmV0dXJucyhhZ2VudC5tZW1vcnkubWFwKChtKSA9PiBtLnJld2FyZCkpOwogICAgY29uc3QgZ3JhZGllbnRzID0gW107CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFnZW50Lm1lbW9yeS5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCBleHAgPSBhZ2VudC5tZW1vcnlbaV07CiAgICAgIGNvbnN0IGFkdmFudGFnZSA9IHJldHVybnNbaV0gLSBleHAuYmFzZWxpbmU7CiAgICAgIGNvbnN0IGdyYWQgPSBhZ2VudC5icmFpbi5jb21wdXRlR3JhZGllbnRzKHsKICAgICAgICBhY3Rpb25JbmRleDogZXhwLmFjdGlvbkluZGV4LAogICAgICAgIHN5bWJvbEluZGV4OiBleHAuc3ltYm9sSW5kZXgsCiAgICAgICAgYWR2YW50YWdlLAogICAgICAgIHRhcmdldFZhbHVlOiByZXR1cm5zW2ldLAogICAgICB9KTsKICAgICAgZ3JhZGllbnRzLnB1c2goZ3JhZCk7CiAgICB9CiAgICB0aGlzLmxlYXJuZXIudXBkYXRlKGFnZW50LmJyYWluLnBhcmFtcyA/PyBhZ2VudC5icmFpbi5zZXJpYWxpemUoKSwgZ3JhZGllbnRzKTsKICAgIGFnZW50Lm1lbW9yeSA9IFtdOwogICAgdGhpcy5tZXRyaWNzLnRyYWluaW5nVGltZSArPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0OwogIH0KCiAgc3RlcCgpIHsKICAgIHRoaXMudGljayArPSAxOwogICAgdGhpcy53b3JsZC50aWNrKDEpOwogICAgdGhpcy5hdXRvVGhyb3R0bGUoKTsKICAgIGxldCBlbmVyZ3lTdW0gPSAwOwogICAgbGV0IHNhdGlldHlTdW0gPSAwOwoKICAgIGZvciAoY29uc3QgYWdlbnQgb2YgdGhpcy5hZ2VudHMpIHsKICAgICAgZW5lcmd5U3VtICs9IGFnZW50LmVuZXJneTsKICAgICAgc2F0aWV0eVN1bSArPSBhZ2VudC5zYXRpZXR5OwogICAgICBpZiAodGhpcy50aWNrICUgYWdlbnQudGhpbmtFdmVyeSAhPT0gMCkgY29udGludWU7CiAgICAgIGNvbnN0IG9icyA9IHRoaXMuYnVpbGRPYnNlcnZhdGlvbihhZ2VudCk7CiAgICAgIGxldCBhY3Rpb25JbmRleCA9IDA7CiAgICAgIGxldCBzeW1ib2xJbmRleCA9IDA7CiAgICAgIGxldCBiYXNlbGluZSA9IDA7CiAgICAgIGlmIChhZ2VudC51c2VGU00pIHsKICAgICAgICBjb25zdCBkZWNpc2lvbiA9IHRoaXMuZnNtUG9saWN5KGFnZW50KTsKICAgICAgICBhY3Rpb25JbmRleCA9IGRlY2lzaW9uLmFjdGlvbkluZGV4OwogICAgICAgIHN5bWJvbEluZGV4ID0gZGVjaXNpb24uc3ltYm9sSW5kZXg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgeyBhY3Rpb25Qcm9icywgc3ltYm9sUHJvYnMsIGJhc2VsaW5lOiBwcmVkaWN0ZWRCYXNlbGluZSB9ID0gYWdlbnQuYnJhaW4uZm9yd2FyZChvYnMpOwogICAgICAgIGFjdGlvbkluZGV4ID0gc2FtcGxlRnJvbShhY3Rpb25Qcm9icywgdGhpcy53b3JsZC5yYW5kKTsKICAgICAgICBzeW1ib2xJbmRleCA9IHNhbXBsZUZyb20oc3ltYm9sUHJvYnMsIHRoaXMud29ybGQucmFuZCk7CiAgICAgICAgYmFzZWxpbmUgPSBwcmVkaWN0ZWRCYXNlbGluZTsKICAgICAgfQogICAgICBjb25zdCByZXdhcmQgPSB0aGlzLmFwcGx5QWN0aW9uKGFnZW50LCBhY3Rpb25JbmRleCk7CiAgICAgIGNvbnN0IGNvbW1Db3N0ID0gdGhpcy5wcm9jZXNzQ29tbXVuaWNhdGlvbihhZ2VudCwgc3ltYm9sSW5kZXgpOwogICAgICBjb25zdCB0b3RhbFJld2FyZCA9IHJld2FyZCAtIGNvbW1Db3N0OwogICAgICBhZ2VudC5sYXN0QWN0aW9uID0gYWN0aW9uSW5kZXg7CiAgICAgIGlmIChzeW1ib2xJbmRleCA+IDApIHsKICAgICAgICBhZ2VudC5sYXN0U3ltYm9sID0gc3ltYm9sSW5kZXg7CiAgICAgICAgYWdlbnQuc3ltYm9sQ29vbGRvd24gPSAzMDsKICAgICAgfSBlbHNlIGlmIChhZ2VudC5zeW1ib2xDb29sZG93biA+IDApIHsKICAgICAgICBhZ2VudC5zeW1ib2xDb29sZG93biAtPSAxOwogICAgICAgIGlmIChhZ2VudC5zeW1ib2xDb29sZG93biA8PSAwKSB7CiAgICAgICAgICBhZ2VudC5sYXN0U3ltYm9sID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgICAgYWdlbnQucmV3YXJkcy5wdXNoKHRvdGFsUmV3YXJkKTsKICAgICAgYWdlbnQubWVtb3J5LnB1c2goewogICAgICAgIGFjdGlvbkluZGV4LAogICAgICAgIHN5bWJvbEluZGV4LAogICAgICAgIHJld2FyZDogdG90YWxSZXdhcmQsCiAgICAgICAgYmFzZWxpbmUsCiAgICAgIH0pOwogICAgICBpZiAodGhpcy50aWNrICUgdGhpcy5jb25maWcuYnJhaW5zLnVwZGF0ZUZyZXF1ZW5jeSA9PT0gMCkgewogICAgICAgIHRoaXMubGVhcm4oYWdlbnQpOwogICAgICB9CiAgICB9CgogICAgY29uc3QgZXZlbnQgPSB0aGlzLnN0b3J5dGVsbGVyLnRpY2soMSwgdGhpcy53b3JsZCwgdGhpcy5lY3MpOwogICAgaWYgKGV2ZW50KSB7CiAgICAgIHRoaXMubWV0cmljcy5sYXN0RXZlbnQgPSBldmVudDsKICAgIH0KICAgIHRoaXMubWV0cmljcy5hdmdFbmVyZ3kgPSBlbmVyZ3lTdW0gLyB0aGlzLmFnZW50cy5sZW5ndGg7CiAgICB0aGlzLm1ldHJpY3MuYXZnU2F0aWV0eSA9IHNhdGlldHlTdW0gLyB0aGlzLmFnZW50cy5sZW5ndGg7CiAgfQoKICBzZXRUaGlua0V2ZXJ5KHZhbHVlKSB7CiAgICB0aGlzLmNvbmZpZy5hZ2VudHMudGhpbmtFdmVyeSA9IHZhbHVlOwogICAgZm9yIChjb25zdCBhZ2VudCBvZiB0aGlzLmFnZW50cykgewogICAgICBhZ2VudC50aGlua0V2ZXJ5ID0gdmFsdWU7CiAgICB9CiAgfQoKICBzZXRMZWFybmluZ0VuYWJsZWQoZW5hYmxlZCkgewogICAgdGhpcy5jb25maWcuYWdlbnRzLmFsbG93TGVhcm5pbmcgPSBlbmFibGVkOwogIH0KCiAgc2V0QnJhaW5Nb2RlbChtb2RlbCkgewogICAgaWYgKHRoaXMuY29uZmlnLmJyYWlucy5tb2RlbCA9PT0gbW9kZWwpIHJldHVybjsKICAgIHRoaXMuY29uZmlnLmJyYWlucy5tb2RlbCA9IG1vZGVsOwogICAgZm9yIChjb25zdCBhZ2VudCBvZiB0aGlzLmFnZW50cykgewogICAgICBhZ2VudC5icmFpbiA9IGNyZWF0ZUJyYWluKG1vZGVsKTsKICAgIH0KICB9CgogIHNuYXBzaG90KCkgewogICAgcmV0dXJuIHsKICAgICAgdGljazogdGhpcy50aWNrLAogICAgICB3b3JsZDogewogICAgICAgIHdpZHRoOiB0aGlzLndvcmxkLndpZHRoLAogICAgICAgIGhlaWdodDogdGhpcy53b3JsZC5oZWlnaHQsCiAgICAgICAgdGltZU9mRGF5OiB0aGlzLndvcmxkLnRpbWVPZkRheSwKICAgICAgICByZXNvdXJjZXM6IHsgLi4udGhpcy53b3JsZC5yZXNvdXJjZXMgfSwKICAgICAgfSwKICAgICAgd29ybGRUaWxlczogdGhpcy53b3JsZC50aWxlcywKICAgICAgYWdlbnRzOiB0aGlzLmFnZW50cy5tYXAoKGFnZW50KSA9PiAoewogICAgICAgIGlkOiBhZ2VudC5pZCwKICAgICAgICB4OiBhZ2VudC54LAogICAgICAgIHk6IGFnZW50LnksCiAgICAgICAgZW5lcmd5OiBhZ2VudC5lbmVyZ3ksCiAgICAgICAgc2F0aWV0eTogYWdlbnQuc2F0aWV0eSwKICAgICAgICB0aGlua0V2ZXJ5OiBhZ2VudC50aGlua0V2ZXJ5LAogICAgICAgIHJvbGU6IGFnZW50LnJvbGUsCiAgICAgICAgdHJhaXRzOiBhZ2VudC50cmFpdHMsCiAgICAgICAgbGFzdEFjdGlvbjogYWdlbnQubGFzdEFjdGlvbiwKICAgICAgICBsYXN0U3ltYm9sOiBhZ2VudC5sYXN0U3ltYm9sLAogICAgICAgIGludmVudG9yeTogYWdlbnQuaW52ZW50b3J5LAogICAgICAgIHVzZUZTTTogYWdlbnQudXNlRlNNLAogICAgICB9KSksCiAgICAgIGNvbW1zOiB0aGlzLmNvbW11bmljYXRpb25zLnJlY2VudCgxMCksCiAgICAgIHN0b3J5dGVsbGVyOiB7CiAgICAgICAgbGFzdEV2ZW50OiB0aGlzLm1ldHJpY3MubGFzdEV2ZW50LAogICAgICAgIGhpc3Rvcnk6IHRoaXMuc3Rvcnl0ZWxsZXIuaGlzdG9yeSwKICAgICAgfSwKICAgICAgbWV0cmljczogewogICAgICAgIGF2Z0VuZXJneTogdGhpcy5tZXRyaWNzLmF2Z0VuZXJneSwKICAgICAgICBhdmdTYXRpZXR5OiB0aGlzLm1ldHJpY3MuYXZnU2F0aWV0eSwKICAgICAgICB0cmFpbmluZ1RpbWU6IHRoaXMubWV0cmljcy50cmFpbmluZ1RpbWUsCiAgICAgIH0sCiAgICB9OwogIH0KfQo=",
    "app/core/storyteller.js": "data:text/javascript;base64,aW1wb3J0IHsgRVZFTlRfVFlQRVMgfSBmcm9tICdhcHAvZGF0YS9jb25zdGFudHMuanMnOwppbXBvcnQgeyByYW5kb21DaG9pY2UgfSBmcm9tICdhcHAvdXRpbHMvcmFuZG9tLmpzJzsKCmV4cG9ydCBjbGFzcyBTdG9yeXRlbGxlciB7CiAgY29uc3RydWN0b3IoeyB0ZW5zaW9uQnVkZ2V0ID0gMSwgY29vbGRvd25UaWNrcyA9IDMwIH0gPSB7fSkgewogICAgdGhpcy50ZW5zaW9uQnVkZ2V0ID0gdGVuc2lvbkJ1ZGdldDsKICAgIHRoaXMuY29vbGRvd24gPSBjb29sZG93blRpY2tzOwogICAgdGhpcy50aW1lciA9IDA7CiAgICB0aGlzLmhpc3RvcnkgPSBbXTsKICB9CgogIHRpY2soZGVsdGEsIHdvcmxkLCBlY3MpIHsKICAgIGlmICh0aGlzLnRpbWVyID4gMCkgewogICAgICB0aGlzLnRpbWVyIC09IGRlbHRhOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGlmICh0aGlzLnRlbnNpb25CdWRnZXQgPD0gMCkgcmV0dXJuIG51bGw7CiAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuMDIpIHJldHVybiBudWxsOwoKICAgIGNvbnN0IGV2ZW50VHlwZSA9IHJhbmRvbUNob2ljZShFVkVOVF9UWVBFUyk7CiAgICBjb25zdCBldmVudCA9IHsKICAgICAgdHlwZTogZXZlbnRUeXBlLAogICAgICB0aWNrOiB3b3JsZC50aW1lT2ZEYXksCiAgICAgIGltcGFjdDogTWF0aC5yYW5kb20oKSwKICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpYmUoZXZlbnRUeXBlKSwKICAgIH07CiAgICB0aGlzLmhpc3RvcnkucHVzaChldmVudCk7CiAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCA+IDUwKSB0aGlzLmhpc3Rvcnkuc2hpZnQoKTsKICAgIHRoaXMudGVuc2lvbkJ1ZGdldCAtPSBldmVudC5pbXBhY3QgKiAwLjE7CiAgICB0aGlzLnRpbWVyID0gdGhpcy5jb29sZG93bjsKICAgIHJldHVybiBldmVudDsKICB9CgogIGRlc2NyaWJlKHR5cGUpIHsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlICdzdG9ybSc6CiAgICAgICAgcmV0dXJuICfQndCw0LTQstC40LPQsNC10YLRgdGPINGI0YLQvtGA0LwnOwogICAgICBjYXNlICdyYWlkJzoKICAgICAgICByZXR1cm4gJ9CS0YDQsNC20LTQtdCx0L3Ri9C5INC90LDQsdC10LMg0LfQsNC80LXRh9C10L0g0L3QsCDQs9C+0YDQuNC30L7QvdGC0LUnOwogICAgICBjYXNlICdkcm91Z2h0JzoKICAgICAgICByZXR1cm4gJ9Cf0L7Qu9GPINCy0YvRgdGL0YXQsNGO0YInOwogICAgICBjYXNlICdyaXR1YWwnOgogICAgICAgIHJldHVybiAn0JrQvtC70L7QvdC40Y8g0LPQvtGC0L7QstC40YIg0YDQuNGC0YPQsNC7INC00LvRjyDQv9C+0LTQvdGP0YLQuNGPINC00YPRhdCwJzsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gJ9Ch0LvRg9GH0LjQu9C+0YHRjCDRh9GC0L4t0YLQviDQvdC10L7QsdGL0YfQvdC+0LUnOwogICAgfQogIH0KfQo=",
    "app/core/world.js": "data:text/javascript;base64,aW1wb3J0IHsgY3JlYXRlRGVmYXVsdE1hcCB9IGZyb20gJ2FwcC9kYXRhL21hcC5kZWZhdWx0LmpzJzsKaW1wb3J0IHsgR1JJRF9TSVpFLCBSRVNPVVJDRV9UWVBFUyB9IGZyb20gJ2FwcC9kYXRhL2NvbnN0YW50cy5qcyc7CmltcG9ydCB7IHNlZWRlZFJhbmRvbSwgcmFuZG9tQ2hvaWNlIH0gZnJvbSAnYXBwL3V0aWxzL3JhbmRvbS5qcyc7CgpleHBvcnQgY2xhc3MgV29ybGQgewogIGNvbnN0cnVjdG9yKHsgd2lkdGggPSBHUklEX1NJWkUsIGhlaWdodCA9IEdSSURfU0laRSwgc2VlZCA9IDEgfSA9IHt9KSB7CiAgICB0aGlzLndpZHRoID0gd2lkdGg7CiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKICAgIHRoaXMuc2VlZCA9IHNlZWQ7CiAgICB0aGlzLnJhbmQgPSBzZWVkZWRSYW5kb20oc2VlZCk7CiAgICB0aGlzLnRpbGVzID0gY3JlYXRlRGVmYXVsdE1hcCh7IHdpZHRoLCBoZWlnaHQsIHNlZWQgfSkudGlsZXM7CiAgICB0aGlzLnRpbWVPZkRheSA9IDA7CiAgICB0aGlzLnJlc291cmNlcyA9IFJFU09VUkNFX1RZUEVTLnJlZHVjZSgoYWNjLCBrZXkpID0+IHsKICAgICAgYWNjW2tleV0gPSAwOwogICAgICByZXR1cm4gYWNjOwogICAgfSwge30pOwogIH0KCiAgd3JhcCh4LCB5KSB7CiAgICBjb25zdCBueCA9ICh4ICsgdGhpcy53aWR0aCkgJSB0aGlzLndpZHRoOwogICAgY29uc3QgbnkgPSAoeSArIHRoaXMuaGVpZ2h0KSAlIHRoaXMuaGVpZ2h0OwogICAgcmV0dXJuIFtueCwgbnldOwogIH0KCiAgdGlsZUF0KHgsIHkpIHsKICAgIGNvbnN0IFtueCwgbnldID0gdGhpcy53cmFwKHgsIHkpOwogICAgcmV0dXJuIHRoaXMudGlsZXNbbnkgKiB0aGlzLndpZHRoICsgbnhdOwogIH0KCiAgaXNQYXNzYWJsZSh0aWxlKSB7CiAgICByZXR1cm4gdGlsZS5iaW9tZSAhPT0gJ3dhdGVyJzsKICB9CgogIHJhbmRvbVNwYXduVGlsZSgpIHsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50aWxlcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCB0aWxlID0gcmFuZG9tQ2hvaWNlKHRoaXMudGlsZXMsIHRoaXMucmFuZCk7CiAgICAgIGlmICh0aGlzLmlzUGFzc2FibGUodGlsZSkpIHJldHVybiB0aWxlOwogICAgfQogICAgcmV0dXJuIHRoaXMudGlsZXNbMF07CiAgfQoKICBoYXJ2ZXN0KHRpbGUsIGFtb3VudCA9IDEpIHsKICAgIGNvbnN0IHJlc291cmNlID0gdGlsZS5iaW9tZSA9PT0gJ2ZvcmVzdCcgPyAnd29vZCcgOiAnZm9vZCc7CiAgICBpZiAodGlsZS5yZXNvdXJjZXMgPD0gMCkgcmV0dXJuIDA7CiAgICBjb25zdCB0YWtlbiA9IE1hdGgubWluKHRpbGUucmVzb3VyY2VzLCBhbW91bnQpOwogICAgdGlsZS5yZXNvdXJjZXMgLT0gdGFrZW47CiAgICB0aGlzLnJlc291cmNlc1tyZXNvdXJjZV0gKz0gdGFrZW47CiAgICByZXR1cm4gdGFrZW47CiAgfQoKICBkcm9wUmVzb3VyY2UodGlsZSwgcmVzb3VyY2UsIGFtb3VudCA9IDEpIHsKICAgIHRpbGUucmVzb3VyY2VzICs9IGFtb3VudDsKICAgIHRoaXMucmVzb3VyY2VzW3Jlc291cmNlXSA9IE1hdGgubWF4KDAsIHRoaXMucmVzb3VyY2VzW3Jlc291cmNlXSAtIGFtb3VudCk7CiAgfQoKICB0aWNrKGRlbHRhKSB7CiAgICB0aGlzLnRpbWVPZkRheSA9ICh0aGlzLnRpbWVPZkRheSArIGRlbHRhKSAlIDMwMDsKICB9Cn0K",
    "app/data/config.js": "data:text/javascript;base64,ZXhwb3J0IGNvbnN0IEJBU0VfQ09ORklHID0gewogIHZlcnNpb246ICcwLjEuMCcsCiAgdGlja1JhdGU6IDEyLAogIHJlbmRlckZwczogMzAsCiAgd29ybGQ6IHsKICAgIHdpZHRoOiA2NCwKICAgIGhlaWdodDogNjQsCiAgICBzZWVkOiAxMzM3LAogICAgcmVzb3VyY2VEZW5zaXR5OiAwLjEyLAogIH0sCiAgYWdlbnRzOiB7CiAgICBjb3VudDogMTIsCiAgICB0aGlua0V2ZXJ5OiAxLAogICAgZnNtRmFsbGJhY2s6IGZhbHNlLAogICAgYWxsb3dMZWFybmluZzogdHJ1ZSwKICB9LAogIGJyYWluczogewogICAgbW9kZWw6ICd0aW55LW1scCcsCiAgICBsZWFybmluZ1JhdGU6IDAuMDAwNSwKICAgIHVwZGF0ZUZyZXF1ZW5jeTogMTAsCiAgICBncmFkaWVudENsaXA6IDUsCiAgICBtYXhUcmFpbmluZ1RpbWVNczogMiwKICB9LAogIGNvbW1zOiB7CiAgICBhbHBoYWJldDogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1JywKICAgIG1lc3NhZ2VDb3N0OiAwLjEsCiAgICBzaWxlbmNlQ29zdDogMCwKICB9LAogIHN0b3J5dGVsbGVyOiB7CiAgICB0ZW5zaW9uQnVkZ2V0OiAxLAogICAgY29vbGRvd25UaWNrczogMzAsCiAgfSwKfTsK",
    "app/data/constants.js": "data:text/javascript;base64,ZXhwb3J0IGNvbnN0IEdSSURfU0laRSA9IDY0OwpleHBvcnQgY29uc3QgVElMRV9TSVpFID0gMTY7CmV4cG9ydCBjb25zdCBNQVhfQUdFTlRTID0gMTI4OwpleHBvcnQgY29uc3QgQUNUSU9OUyA9IFsKICAnaWRsZScsCiAgJ21vdmVfbm9ydGgnLAogICdtb3ZlX3NvdXRoJywKICAnbW92ZV9lYXN0JywKICAnbW92ZV93ZXN0JywKICAnZ2F0aGVyJywKICAnZHJvcCcsCiAgJ3Jlc3QnLAogICdzaWduYWwnLAogICdidWlsZCcsCiAgJ2RlZmVuZCcsCiAgJ2V4cGxvcmUnLApdOwpleHBvcnQgY29uc3QgQUNUSU9OX0NPVU5UID0gQUNUSU9OUy5sZW5ndGg7CmV4cG9ydCBjb25zdCBTWU1CT0xfQ09VTlQgPSAzMjsKZXhwb3J0IGNvbnN0IFRISU5LX0VWRVJZX09QVElPTlMgPSBbMSwgMiwgNF07CmV4cG9ydCBjb25zdCBUSUxFX1RZUEVTID0gWydncmFzcycsICdmb3Jlc3QnLCAnd2F0ZXInLCAnbW91bnRhaW4nXTsKZXhwb3J0IGNvbnN0IFJFU09VUkNFX1RZUEVTID0gWydmb29kJywgJ3dvb2QnLCAnb3JlJywgJ2NyeXN0YWwnXTsKZXhwb3J0IGNvbnN0IERBWV9MRU5HVEggPSAxODA7CmV4cG9ydCBjb25zdCBOSUdIVF9MRU5HVEggPSAxMjA7CmV4cG9ydCBjb25zdCBFVkVOVF9UWVBFUyA9IFsnc3Rvcm0nLCAncmFpZCcsICdkcm91Z2h0JywgJ3JpdHVhbCddOwoKZXhwb3J0IGNvbnN0IERFRkFVTFRfQUdFTlRfVFJBSVRTID0gWydmb3JhZ2VyJywgJ2J1aWxkZXInLCAnc2NvdXQnXTsKCmV4cG9ydCBjb25zdCBGU01fQkVIQVZJT1JTID0gewogIGlkbGU6IFsnaWRsZScsICdleHBsb3JlJ10sCiAgYWxlcnQ6IFsnZGVmZW5kJywgJ3NpZ25hbCddLAp9Owo=",
    "app/data/map.default.js": "data:text/javascript;base64,aW1wb3J0IHsgc2VlZGVkUmFuZG9tIH0gZnJvbSAnYXBwL3V0aWxzL3JhbmRvbS5qcyc7Cgpjb25zdCBCSU9NRV9UWVBFUyA9IFsnZ3Jhc3MnLCAnZm9yZXN0JywgJ3dhdGVyJywgJ21vdW50YWluJ107CgpleHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVmYXVsdE1hcCh7IHdpZHRoLCBoZWlnaHQsIHNlZWQgfSkgewogIGNvbnN0IHJhbmQgPSBzZWVkZWRSYW5kb20oc2VlZCA/PyAxKTsKICBjb25zdCB0aWxlcyA9IG5ldyBBcnJheSh3aWR0aCAqIGhlaWdodCk7CiAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkgKz0gMSkgewogICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCArPSAxKSB7CiAgICAgIGNvbnN0IHIgPSByYW5kKCk7CiAgICAgIGxldCB0eXBlID0gJ2dyYXNzJzsKICAgICAgaWYgKHIgPiAwLjg1KSB0eXBlID0gJ3dhdGVyJzsKICAgICAgZWxzZSBpZiAociA+IDAuNikgdHlwZSA9ICdmb3Jlc3QnOwogICAgICBlbHNlIGlmIChyIDwgMC4xKSB0eXBlID0gJ21vdW50YWluJzsKICAgICAgdGlsZXNbeSAqIHdpZHRoICsgeF0gPSB7CiAgICAgICAgeCwKICAgICAgICB5LAogICAgICAgIGJpb21lOiB0eXBlLAogICAgICAgIHJlc291cmNlczogdHlwZSA9PT0gJ2ZvcmVzdCcgPyAzIDogdHlwZSA9PT0gJ21vdW50YWluJyA/IDEgOiAyLAogICAgICAgIGRhbmdlcjogdHlwZSA9PT0gJ3dhdGVyJyA/IDIgOiAwLAogICAgICB9OwogICAgfQogIH0KICByZXR1cm4gewogICAgd2lkdGgsCiAgICBoZWlnaHQsCiAgICBzZWVkLAogICAgYmlvbWVzOiBCSU9NRV9UWVBFUywKICAgIHRpbGVzLAogIH07Cn0KCmV4cG9ydCBjb25zdCBERUZBVUxUX01BUF9JTkZPID0gewogIG5hbWU6ICdHZW50bGUgTWVhZG93JywKICBkZXNjcmlwdGlvbjogJ9Cb0ZHQs9C60LDRjyDQutCw0YDRgtCwINC00LvRjyDQv9C10YDQstGL0YUg0LfQsNC/0YPRgdC60L7Qsi4nLAogIHNlZWQ6IDEzMzcsCiAgc2l6ZTogeyB3aWR0aDogNjQsIGhlaWdodDogNjQgfSwKfTsK",
    "app/main.js": "data:text/javascript;base64,aW1wb3J0IHsgUGl4aUFwcCB9IGZyb20gJ2FwcC9yZW5kZXIvcGl4aV9hcHAuanMnOwppbXBvcnQgeyBDb250cm9sUGFuZWwgfSBmcm9tICdhcHAvcGFuZWwvcGFuZWwuanMnOwppbXBvcnQgeyBCQVNFX0NPTkZJRyB9IGZyb20gJ2FwcC9kYXRhL2NvbmZpZy5qcyc7CmltcG9ydCB7IE1FU1NBR0VfVFlQRVMgfSBmcm9tICdhcHAvdHlwZXMuanMnOwppbXBvcnQgeyBTaW11bGF0aW9uIH0gZnJvbSAnYXBwL2NvcmUvc2ltLmpzJzsKaW1wb3J0IHsgc2VyaWFsaXplU25hcHNob3QsIGFwcGx5U25hcHNob3QgfSBmcm9tICdhcHAvc3RvcmFnZS9zbmFwc2hvdC5qcyc7CmltcG9ydCB7IGdldFN0b3JhZ2UgfSBmcm9tICdhcHAvc3RvcmFnZS9pZGIuanMnOwoKY29uc3QgQ09ORklHX1NUT1JBR0VfS0VZID0gJ2NvbG9ueS1zaW0tY29uZmlnJzsKCmZ1bmN0aW9uIGxvYWRTYXZlZENvbmZpZygpIHsKICB0cnkgewogICAgY29uc3QgcmF3ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oQ09ORklHX1NUT1JBR0VfS0VZKTsKICAgIGlmICghcmF3KSByZXR1cm4gQkFTRV9DT05GSUc7CiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdyk7CiAgICByZXR1cm4geyAuLi5CQVNFX0NPTkZJRywgLi4ucGFyc2VkIH07CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUud2Fybign0J3QtSDRg9C00LDQu9C+0YHRjCDQt9Cw0LPRgNGD0LfQuNGC0Ywg0LrQvtC90YTQuNCzJywgZXJyb3IpOwogICAgcmV0dXJuIEJBU0VfQ09ORklHOwogIH0KfQoKZnVuY3Rpb24gcGVyc2lzdENvbmZpZyhjb25maWcpIHsKICB0cnkgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oQ09ORklHX1NUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShjb25maWcpKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS53YXJuKCfQndC1INGD0LTQsNC70L7RgdGMINGB0L7RhdGA0LDQvdC40YLRjCDQutC+0L3RhNC40LMnLCBlcnJvcik7CiAgfQp9CgpjbGFzcyBJbmxpbmVXb3JrZXIgewogIGNvbnN0cnVjdG9yKCkgewogICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgU2V0KCk7CiAgICB0aGlzLnNpbXVsYXRpb24gPSBudWxsOwogICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICB0aGlzLnRpbWVyID0gbnVsbDsKICAgIHRoaXMudGlja0ludGVydmFsID0gMTAwMCAvIEJBU0VfQ09ORklHLnRpY2tSYXRlOwogIH0KCiAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaykgewogICAgaWYgKHR5cGUgPT09ICdtZXNzYWdlJykgdGhpcy5saXN0ZW5lcnMuYWRkKGNhbGxiYWNrKTsKICB9CgogIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2spIHsKICAgIGlmICh0eXBlID09PSAnbWVzc2FnZScpIHRoaXMubGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFjayk7CiAgfQoKICBkaXNwYXRjaCh0eXBlLCBwYXlsb2FkKSB7CiAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHRoaXMubGlzdGVuZXJzKSB7CiAgICAgIGNhbGxiYWNrKHsgZGF0YTogeyB0eXBlLCBwYXlsb2FkIH0gfSk7CiAgICB9CiAgfQoKICBlbnN1cmVTaW11bGF0aW9uKGNvbmZpZykgewogICAgaWYgKCF0aGlzLnNpbXVsYXRpb24pIHsKICAgICAgdGhpcy5zaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24oY29uZmlnID8/IEJBU0VfQ09ORklHKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnNpbXVsYXRpb247CiAgfQoKICBzdGFydExvb3AoKSB7CiAgICBpZiAodGhpcy5ydW5uaW5nKSByZXR1cm47CiAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlOwogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIHRoaXMuc2ltdWxhdGlvbi5zdGVwKCk7CiAgICAgIHRoaXMuc2VuZFN0YXRlKCk7CiAgICB9LCB0aGlzLnRpY2tJbnRlcnZhbCk7CiAgfQoKICBzdG9wTG9vcCgpIHsKICAgIHRoaXMucnVubmluZyA9IGZhbHNlOwogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICB9CgogIHRlcm1pbmF0ZSgpIHsKICAgIHRoaXMuc3RvcExvb3AoKTsKICAgIHRoaXMubGlzdGVuZXJzLmNsZWFyKCk7CiAgfQoKICBhc3luYyBoYW5kbGVNZXNzYWdlKG1lc3NhZ2UpIHsKICAgIGNvbnN0IHsgdHlwZSwgcGF5bG9hZCB9ID0gbWVzc2FnZTsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlIE1FU1NBR0VfVFlQRVMuSU5JVDogewogICAgICAgIGNvbnN0IGNvbmZpZyA9IHBheWxvYWQ/LmNvbmZpZyA/IHsgLi4uQkFTRV9DT05GSUcsIC4uLnBheWxvYWQuY29uZmlnIH0gOiBCQVNFX0NPTkZJRzsKICAgICAgICB0aGlzLmVuc3VyZVNpbXVsYXRpb24oY29uZmlnKTsKICAgICAgICB0aGlzLnRpY2tJbnRlcnZhbCA9IDEwMDAgLyAoY29uZmlnLnRpY2tSYXRlID8/IEJBU0VfQ09ORklHLnRpY2tSYXRlKTsKICAgICAgICB0aGlzLnNlbmRTdGF0ZSgpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgJ3NpbXVsYXRpb246c3RhcnQnOgogICAgICAgIHRoaXMuc3RhcnRMb29wKCk7CiAgICAgICAgdGhpcy5zZW5kU3RhdGUoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2ltdWxhdGlvbjpwYXVzZSc6CiAgICAgICAgdGhpcy5zdG9wTG9vcCgpOwogICAgICAgIHRoaXMuc2VuZFN0YXRlKCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldHRpbmdzOnVwZGF0ZSc6CiAgICAgICAgaWYgKCd0aGlua0V2ZXJ5JyBpbiBwYXlsb2FkKSB0aGlzLnNpbXVsYXRpb24uc2V0VGhpbmtFdmVyeShwYXlsb2FkLnRoaW5rRXZlcnkpOwogICAgICAgIGlmICgnYWxsb3dMZWFybmluZycgaW4gcGF5bG9hZCkgdGhpcy5zaW11bGF0aW9uLnNldExlYXJuaW5nRW5hYmxlZChwYXlsb2FkLmFsbG93TGVhcm5pbmcpOwogICAgICAgIGlmICgnYnJhaW5Nb2RlbCcgaW4gcGF5bG9hZCkgdGhpcy5zaW11bGF0aW9uLnNldEJyYWluTW9kZWwocGF5bG9hZC5icmFpbk1vZGVsKTsKICAgICAgICBpZiAoJ3RpY2tSYXRlJyBpbiBwYXlsb2FkKSB7CiAgICAgICAgICB0aGlzLnRpY2tJbnRlcnZhbCA9IDEwMDAgLyBwYXlsb2FkLnRpY2tSYXRlOwogICAgICAgICAgaWYgKHRoaXMucnVubmluZykgewogICAgICAgICAgICB0aGlzLnN0b3BMb29wKCk7CiAgICAgICAgICAgIHRoaXMuc3RhcnRMb29wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuc2VuZFN0YXRlKCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3N0b3JhZ2U6c2F2ZSc6IHsKICAgICAgICBjb25zdCBzdG9yYWdlID0gYXdhaXQgZ2V0U3RvcmFnZSgpOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0b3JhZ2Uuc2F2ZVNuYXBzaG90KHNlcmlhbGl6ZVNuYXBzaG90KHRoaXMuc2ltdWxhdGlvbikpOwogICAgICAgIHRoaXMuZGlzcGF0Y2goTUVTU0FHRV9UWVBFUy5TVE9SQUdFX1JFU1VMVCwgeyBhY3Rpb246ICdzYXZlJywgcmVzdWx0IH0pOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgJ3N0b3JhZ2U6bG9hZCc6IHsKICAgICAgICBjb25zdCBzdG9yYWdlID0gYXdhaXQgZ2V0U3RvcmFnZSgpOwogICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgc3RvcmFnZS5sb2FkTGF0ZXN0U25hcHNob3QoKTsKICAgICAgICBpZiAoc25hcHNob3QpIHsKICAgICAgICAgIGFwcGx5U25hcHNob3QodGhpcy5zaW11bGF0aW9uLCBzbmFwc2hvdCk7CiAgICAgICAgICB0aGlzLnNlbmRTdGF0ZSh7IHN0b3JhZ2VNZXNzYWdlOiAn0KHQtdC50LIg0LfQsNCz0YDRg9C20LXQvScgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2VuZFN0YXRlKHsgc3RvcmFnZU1lc3NhZ2U6ICfQndC10YIg0YHQvtGF0YDQsNC90ZHQvdC90YvRhSDQtNCw0L3QvdGL0YUnIH0pOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlICdicmFpbnM6ZXhwb3J0JzogewogICAgICAgIGNvbnN0IGJyYWlucyA9IHRoaXMuc2ltdWxhdGlvbi5hZ2VudHMubWFwKChhZ2VudCkgPT4gKHsKICAgICAgICAgIGFnZW50SWQ6IGFnZW50LmlkLAogICAgICAgICAgd2VpZ2h0czogQXJyYXkuZnJvbShhZ2VudC5icmFpbi5zZXJpYWxpemUoKSksCiAgICAgICAgfSkpOwogICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IHRoaXMuc2ltdWxhdGlvbi5jb25maWcudmVyc2lvbiA/PyAnMC4xLjAnLCBicmFpbnMgfSk7CiAgICAgICAgdGhpcy5kaXNwYXRjaChNRVNTQUdFX1RZUEVTLlNUT1JBR0VfUkVTVUxULCB7IGFjdGlvbjogJ2JyYWluczpleHBvcnQnLCBkYXRhIH0pOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgJ2JyYWluczppbXBvcnQnOiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocGF5bG9hZCk7CiAgICAgICAgICBpZiAoIXBhcnNlZD8uYnJhaW5zKSB0aHJvdyBuZXcgRXJyb3IoJ9Cd0LXQutC+0YDRgNC10LrRgtC90YvQuSDRhNCw0LnQuycpOwogICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBwYXJzZWQuYnJhaW5zKSB7CiAgICAgICAgICAgIGNvbnN0IGFnZW50ID0gdGhpcy5zaW11bGF0aW9uLmFnZW50cy5maW5kKChhKSA9PiBhLmlkID09PSBlbnRyeS5hZ2VudElkKTsKICAgICAgICAgICAgaWYgKGFnZW50ICYmIGVudHJ5LndlaWdodHMpIHsKICAgICAgICAgICAgICBhZ2VudC5icmFpbi5sb2FkV2VpZ2h0cyhuZXcgRmxvYXQzMkFycmF5KGVudHJ5LndlaWdodHMpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5zZW5kU3RhdGUoeyBzdG9yYWdlTWVzc2FnZTogJ9Cc0L7Qt9Cz0Lgg0LjQvNC/0L7RgNGC0LjRgNC+0LLQsNC90YsnIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoKE1FU1NBR0VfVFlQRVMuRVJST1IsIGVycm9yLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgfQogICAgICBkZWZhdWx0OgogICAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgc2VuZFN0YXRlKGV4dHJhID0ge30pIHsKICAgIGlmICghdGhpcy5zaW11bGF0aW9uKSByZXR1cm47CiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMuc2ltdWxhdGlvbi5zbmFwc2hvdCgpOwogICAgdGhpcy5kaXNwYXRjaChNRVNTQUdFX1RZUEVTLlNUQVRFLCB7CiAgICAgIC4uLnNuYXBzaG90LAogICAgICBjb25maWc6IHRoaXMuc2ltdWxhdGlvbi5jb25maWcsCiAgICAgIGlzUnVubmluZzogdGhpcy5ydW5uaW5nLAogICAgICAuLi5leHRyYSwKICAgIH0pOwogIH0KCiAgcG9zdE1lc3NhZ2UobWVzc2FnZSkgewogICAgdm9pZCB0aGlzLmhhbmRsZU1lc3NhZ2UobWVzc2FnZSk7CiAgfQp9CgpmdW5jdGlvbiBjcmVhdGVCbG9iV29ya2VyKHNjcmlwdFVybCkgewogIGlmICh0eXBlb2YgQmxvYiA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIFVSTCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBudWxsOwogIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYGltcG9ydCAiJHtzY3JpcHRVcmx9IjtgXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcgfSk7CiAgY29uc3Qgb2JqZWN0VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICB0cnkgewogICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcihvYmplY3RVcmwsIHsgdHlwZTogJ21vZHVsZScgfSk7CiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4gewogICAgICB0cnkgewogICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwob2JqZWN0VXJsKTsKICAgICAgfSBjYXRjaCAocmV2b2tlRXJyb3IpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0L7RgdCy0L7QsdC+0LTQuNGC0YwgVVJMINCy0L7RgNC60LXRgNCwJywgcmV2b2tlRXJyb3IpOwogICAgICB9CiAgICB9OwogICAgd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBjbGVhbnVwLCB7IG9uY2U6IHRydWUgfSk7CiAgICB3b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBjbGVhbnVwLCB7IG9uY2U6IHRydWUgfSk7CiAgICByZXR1cm4gd29ya2VyOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBVUkwucmV2b2tlT2JqZWN0VVJMKG9iamVjdFVybCk7CiAgICB0aHJvdyBlcnJvcjsKICB9Cn0KCmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNpbXVsYXRpb25Xb3JrZXIoKSB7CiAgaWYgKHR5cGVvZiBXb3JrZXIgIT09ICdmdW5jdGlvbicpIHsKICAgIGNvbnNvbGUud2FybignQVBJIFdlYldvcmtlciDQvdC10LTQvtGB0YLRg9C/0L3Qviwg0LjRgdC/0L7Qu9GM0LfRg9C10Lwg0YTQvtC70LHRjdC6INC90LAg0LPQu9Cw0LLQvdGL0Lkg0L/QvtGC0L7QuicpOwogICAgcmV0dXJuIG5ldyBJbmxpbmVXb3JrZXIoKTsKICB9CgogIHRyeSB7CiAgICByZXR1cm4gbmV3IFdvcmtlcignLi9nYW1lL3dvcmtlci93b3JrZXIuZW50cnkuanMnLCB7IHR5cGU6ICdtb2R1bGUnIH0pOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLndhcm4oJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0YHQvtC30LTQsNGC0Ywg0LzQvtC00YPQu9GM0L3Ri9C5INCy0L7RgNC60LXRgCDQv9C+INC+0YLQvdC+0YHQuNGC0LXQu9GM0L3QvtC80YMg0L/Rg9GC0LgnLCBlcnJvcik7CiAgfQoKICB0cnkgewogICAgY29uc3QgYmFzZVVybCA9CiAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnCiAgICAgICAgPyB3aW5kb3cubG9jYXRpb24uaHJlZgogICAgICAgIDogdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJwogICAgICAgID8gZG9jdW1lbnQuYmFzZVVSSQogICAgICAgIDogbnVsbDsKICAgIGlmICghYmFzZVVybCkgdGhyb3cgbmV3IEVycm9yKCfQndC1INGD0LTQsNC70L7RgdGMINC+0L/RgNC10LTQtdC70LjRgtGMINCx0LDQt9C+0LLRi9C5IFVSTCDQtNC70Y8gQmxvYi3QstC+0YDQutC10YDQsCcpOwogICAgY29uc3Qgc2NyaXB0VXJsID0gbmV3IFVSTCgnLi9nYW1lL3dvcmtlci93b3JrZXIuZW50cnkuanMnLCBiYXNlVXJsKS5ocmVmOwogICAgY29uc3Qgd29ya2VyID0gY3JlYXRlQmxvYldvcmtlcihzY3JpcHRVcmwpOwogICAgaWYgKHdvcmtlcikgewogICAgICBjb25zb2xlLmluZm8oJ9CY0YHQv9C+0LvRjNC30YPQtdGC0YHRjyBCbG9iLdCy0L7RgNC60LXRgCDQtNC70Y8g0YHQuNC80YPQu9GP0YbQuNC4Jyk7CiAgICAgIHJldHVybiB3b3JrZXI7CiAgICB9CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUud2Fybign0J3QtSDRg9C00LDQu9C+0YHRjCDRgdC+0LfQtNCw0YLRjCBCbG9iLdCy0L7RgNC60LXRgCwg0LjRgdC/0L7Qu9GM0LfRg9C10LwgaW5saW5lINGA0LXQttC40LwnLCBlcnJvcik7CiAgfQoKICBjb25zb2xlLndhcm4oJ9CS0L7Qt9Cy0YDQsNGJ0LDQtdC8IGlubGluZS3QstC+0YDQutC10YAg0LIg0LrQsNGH0LXRgdGC0LLQtSDQutGA0LDQudC90LXQs9C+INGE0L7Qu9Cx0Y3QutCwJyk7CiAgcmV0dXJuIG5ldyBJbmxpbmVXb3JrZXIoKTsKfQoKY29uc3QgcmVuZGVyQXBwID0gbmV3IFBpeGlBcHAoeyBjb250YWluZXJJZDogJ2dhbWUtcm9vdCcgfSk7CmxldCB3b3JrZXIgPSBudWxsOwpjb25zdCBwZW5kaW5nTWVzc2FnZXMgPSBbXTsKY29uc3QgbGF0ZXN0U3RhdGUgPSB7CiAgdGljazogMCwKICBhZ2VudHM6IFtdLAogIHdvcmxkOiBCQVNFX0NPTkZJRy53b3JsZCwKICBjb21tczogW10sCiAgbWV0cmljczoge30sCiAgY29uZmlnOiBCQVNFX0NPTkZJRywKICBpc1J1bm5pbmc6IGZhbHNlLAp9OwoKY29uc3QgcGFuZWwgPSBuZXcgQ29udHJvbFBhbmVsKHsKICBjb250YWluZXJJZDogJ3BhbmVsLXJvb3QnLAogIG9uQ29tbWFuZDogKHR5cGUsIHBheWxvYWQpID0+IHsKICAgIGlmICghd29ya2VyKSB7CiAgICAgIHBlbmRpbmdNZXNzYWdlcy5wdXNoKHsgdHlwZSwgcGF5bG9hZCB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgd29ya2VyLnBvc3RNZXNzYWdlKHsgdHlwZSwgcGF5bG9hZCB9KTsKICB9LAp9KTsKCmZ1bmN0aW9uIGhhbmRsZVdvcmtlck1lc3NhZ2UoZXZlbnQpIHsKICBjb25zdCB7IHR5cGUsIHBheWxvYWQgfSA9IGV2ZW50LmRhdGE7CiAgc3dpdGNoICh0eXBlKSB7CiAgICBjYXNlIE1FU1NBR0VfVFlQRVMuU1RBVEU6IHsKICAgICAgT2JqZWN0LmFzc2lnbihsYXRlc3RTdGF0ZSwgcGF5bG9hZCk7CiAgICAgIGlmICghbGF0ZXN0U3RhdGUuY29tbXNBbHBoYWJldCkgewogICAgICAgIGxhdGVzdFN0YXRlLmNvbW1zQWxwaGFiZXQgPSBCQVNFX0NPTkZJRy5jb21tcy5hbHBoYWJldC5zcGxpdCgnJyk7CiAgICAgIH0KICAgICAgcGVyc2lzdENvbmZpZyhsYXRlc3RTdGF0ZS5jb25maWcpOwogICAgICByZW5kZXJBcHAudXBkYXRlKHsgLi4ubGF0ZXN0U3RhdGUsIGNvbW1zQWxwaGFiZXQ6IGxhdGVzdFN0YXRlLmNvbW1zQWxwaGFiZXQgfSk7CiAgICAgIHBhbmVsLnVwZGF0ZShsYXRlc3RTdGF0ZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVNTQUdFX1RZUEVTLlNUT1JBR0VfUkVTVUxUOiB7CiAgICAgIGlmIChwYXlsb2FkLmFjdGlvbiA9PT0gJ2JyYWluczpleHBvcnQnKSB7CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtwYXlsb2FkLmRhdGFdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTsKICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSAnYnJhaW5zLmpzb24nOwogICAgICAgIGEuY2xpY2soKTsKICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgIH0gZWxzZSBpZiAocGF5bG9hZC5yZXN1bHQ/Lm1lc3NhZ2UpIHsKICAgICAgICBsYXRlc3RTdGF0ZS5zdG9yYWdlTWVzc2FnZSA9IHBheWxvYWQucmVzdWx0Lm1lc3NhZ2U7CiAgICAgICAgcGFuZWwudXBkYXRlKGxhdGVzdFN0YXRlKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVTU0FHRV9UWVBFUy5FUlJPUjogewogICAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0YHQuNC80YPQu9GP0YbQuNC4JywgcGF5bG9hZCk7CiAgICAgIGxhdGVzdFN0YXRlLnN0b3JhZ2VNZXNzYWdlID0gU3RyaW5nKHBheWxvYWQpOwogICAgICBwYW5lbC51cGRhdGUobGF0ZXN0U3RhdGUpOwogICAgICBicmVhazsKICAgIH0KICAgIGRlZmF1bHQ6CiAgICAgIGJyZWFrOwogIH0KfQoKY3JlYXRlU2ltdWxhdGlvbldvcmtlcigpLnRoZW4oKGNyZWF0ZWRXb3JrZXIpID0+IHsKICB3b3JrZXIgPSBjcmVhdGVkV29ya2VyOwogIHdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlV29ya2VyTWVzc2FnZSk7CiAgd29ya2VyLnBvc3RNZXNzYWdlKHsgdHlwZTogTUVTU0FHRV9UWVBFUy5JTklULCBwYXlsb2FkOiB7IGNvbmZpZzogbG9hZFNhdmVkQ29uZmlnKCkgfSB9KTsKICB3aGlsZSAocGVuZGluZ01lc3NhZ2VzLmxlbmd0aCkgewogICAgY29uc3QgbWVzc2FnZSA9IHBlbmRpbmdNZXNzYWdlcy5zaGlmdCgpOwogICAgd29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOwogIH0KfSk7Cg==",
    "app/panel/panel.js": "data:text/javascript;base64,aW1wb3J0IHsgY3JlYXRlT3ZlcnZpZXdUYWIgfSBmcm9tICdhcHAvcGFuZWwvdGFicy9vdmVydmlldy5qcyc7CmltcG9ydCB7IGNyZWF0ZUFnZW50c1RhYiB9IGZyb20gJ2FwcC9wYW5lbC90YWJzL2FnZW50cy5qcyc7CmltcG9ydCB7IGNyZWF0ZVdvcmxkVGFiIH0gZnJvbSAnYXBwL3BhbmVsL3RhYnMvd29ybGQuanMnOwppbXBvcnQgeyBjcmVhdGVDb21tc1RhYiB9IGZyb20gJ2FwcC9wYW5lbC90YWJzL2NvbW1zLmpzJzsKaW1wb3J0IHsgY3JlYXRlRXZlbnRzVGFiIH0gZnJvbSAnYXBwL3BhbmVsL3RhYnMvZXZlbnRzLmpzJzsKaW1wb3J0IHsgY3JlYXRlU2F2ZXNUYWIgfSBmcm9tICdhcHAvcGFuZWwvdGFicy9zYXZlcy5qcyc7CmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzVGFiIH0gZnJvbSAnYXBwL3BhbmVsL3RhYnMvc2V0dGluZ3MuanMnOwppbXBvcnQgeyBjcmVhdGVIZWxwVGFiIH0gZnJvbSAnYXBwL3BhbmVsL3RhYnMvaGVscC5qcyc7Cgpjb25zdCBUQUJTID0gWwogIHsgaWQ6ICdvdmVydmlldycsIHRpdGxlOiAn0J7QsdC30L7RgCcsIGZhY3Rvcnk6IGNyZWF0ZU92ZXJ2aWV3VGFiIH0sCiAgeyBpZDogJ2FnZW50cycsIHRpdGxlOiAn0JDQs9C10L3RgtGLJywgZmFjdG9yeTogY3JlYXRlQWdlbnRzVGFiIH0sCiAgeyBpZDogJ3dvcmxkJywgdGl0bGU6ICfQnNC40YAnLCBmYWN0b3J5OiBjcmVhdGVXb3JsZFRhYiB9LAogIHsgaWQ6ICdjb21tcycsIHRpdGxlOiAn0JrQvtC80LzRg9C90LjQutCw0YbQuNGPJywgZmFjdG9yeTogY3JlYXRlQ29tbXNUYWIgfSwKICB7IGlkOiAnZXZlbnRzJywgdGl0bGU6ICfQodC+0LHRi9GC0LjRjycsIGZhY3Rvcnk6IGNyZWF0ZUV2ZW50c1RhYiB9LAogIHsgaWQ6ICdzYXZlcycsIHRpdGxlOiAn0KHQtdC50LLRiyDQuCDQtNCw0L3QvdGL0LUnLCBmYWN0b3J5OiBjcmVhdGVTYXZlc1RhYiB9LAogIHsgaWQ6ICdzZXR0aW5ncycsIHRpdGxlOiAn0J3QsNGB0YLRgNC+0LnQutC4JywgZmFjdG9yeTogY3JlYXRlU2V0dGluZ3NUYWIgfSwKICB7IGlkOiAnaGVscCcsIHRpdGxlOiAn0KHQv9GA0LDQstC60LAnLCBmYWN0b3J5OiBjcmVhdGVIZWxwVGFiIH0sCl07CgpleHBvcnQgY2xhc3MgQ29udHJvbFBhbmVsIHsKICBjb25zdHJ1Y3Rvcih7IGNvbnRhaW5lcklkID0gJ3BhbmVsLXJvb3QnLCBvbkNvbW1hbmQgfSA9IHt9KSB7CiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKSA/PyBkb2N1bWVudC5ib2R5OwogICAgdGhpcy5vbkNvbW1hbmQgPSBvbkNvbW1hbmQ7CiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlOwogICAgdGhpcy5zdGF0ZSA9IG51bGw7CiAgICB0aGlzLnRhYkluc3RhbmNlcyA9IG5ldyBNYXAoKTsKICAgIHRoaXMuY3VycmVudFRhYiA9ICdvdmVydmlldyc7CiAgICB0aGlzLnJvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhc2lkZScpOwogICAgdGhpcy5yb290LmNsYXNzTmFtZSA9ICdjb250cm9sLXBhbmVsJzsKICAgIHRoaXMucm9vdC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnY29tcGxlbWVudGFyeScpOwogICAgdGhpcy5yb290LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpOwoKICAgIHRoaXMudG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSAncGFuZWwtdG9nZ2xlJzsKICAgIHRoaXMudG9nZ2xlQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpOwogICAgdGhpcy50b2dnbGVCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJywgJ3BhbmVsLXRhYnMnKTsKICAgIHRoaXMudG9nZ2xlQnV0dG9uLmlubmVySFRNTCA9ICfimpnvuI8nOwogICAgdGhpcy50b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnRvZ2dsZSgpKTsKICAgIHRoaXMudG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHsKICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJyB8fCBldmVudC5rZXkgPT09ICcgJykgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdGhpcy50b2dnbGUoKTsKICAgICAgfQogICAgfSk7CgogICAgdGhpcy50YWJsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICB0aGlzLnRhYmxpc3QuY2xhc3NOYW1lID0gJ3BhbmVsLXRhYnMnOwogICAgdGhpcy50YWJsaXN0LmlkID0gJ3BhbmVsLXRhYnMnOwogICAgdGhpcy50YWJsaXN0LnNldEF0dHJpYnV0ZSgncm9sZScsICd0YWJsaXN0Jyk7CgogICAgdGhpcy5jb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICB0aGlzLmNvbnRlbnQuY2xhc3NOYW1lID0gJ3BhbmVsLWNvbnRlbnQnOwoKICAgIHRoaXMucm9vdC5hcHBlbmRDaGlsZCh0aGlzLnRhYmxpc3QpOwogICAgdGhpcy5yb290LmFwcGVuZENoaWxkKHRoaXMuY29udGVudCk7CiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnRvZ2dsZUJ1dHRvbik7CiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnJvb3QpOwoKICAgIHRoaXMucmVuZGVyVGFicygpOwogIH0KCiAgcmVuZGVyVGFicygpIHsKICAgIGZvciAoY29uc3QgdGFiIG9mIFRBQlMpIHsKICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSAncGFuZWwtdGFiJzsKICAgICAgYnV0dG9uLnR5cGUgPSAnYnV0dG9uJzsKICAgICAgYnV0dG9uLmlkID0gYHRhYi0ke3RhYi5pZH1gOwogICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdyb2xlJywgJ3RhYicpOwogICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgdGFiLmlkID09PSB0aGlzLmN1cnJlbnRUYWIgPyAndHJ1ZScgOiAnZmFsc2UnKTsKICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIGBwYW5lbC0ke3RhYi5pZH1gKTsKICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gdGFiLnRpdGxlOwogICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnNlbGVjdFRhYih0YWIuaWQpKTsKICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHsKICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnQXJyb3dSaWdodCcgfHwgZXZlbnQua2V5ID09PSAnQXJyb3dMZWZ0JykgewogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGNvbnN0IGluZGV4ID0gVEFCUy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uaWQgPT09IHRhYi5pZCk7CiAgICAgICAgICBjb25zdCBuZXh0SW5kZXggPQogICAgICAgICAgICBldmVudC5rZXkgPT09ICdBcnJvd1JpZ2h0JwogICAgICAgICAgICAgID8gKGluZGV4ICsgMSkgJSBUQUJTLmxlbmd0aAogICAgICAgICAgICAgIDogKGluZGV4IC0gMSArIFRBQlMubGVuZ3RoKSAlIFRBQlMubGVuZ3RoOwogICAgICAgICAgdGhpcy5zZWxlY3RUYWIoVEFCU1tuZXh0SW5kZXhdLmlkKTsKICAgICAgICAgIHRoaXMuZm9jdXNUYWIoVEFCU1tuZXh0SW5kZXhdLmlkKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLnRhYmxpc3QuYXBwZW5kQ2hpbGQoYnV0dG9uKTsKCiAgICAgIGNvbnN0IHBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpOwogICAgICBwYW5lbC5jbGFzc05hbWUgPSAndGFiLXBhbmVsJzsKICAgICAgcGFuZWwuaWQgPSBgcGFuZWwtJHt0YWIuaWR9YDsKICAgICAgcGFuZWwuc2V0QXR0cmlidXRlKCdyb2xlJywgJ3RhYnBhbmVsJyk7CiAgICAgIHBhbmVsLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5JywgYHRhYi0ke3RhYi5pZH1gKTsKICAgICAgcGFuZWwuaGlkZGVuID0gdGFiLmlkICE9PSB0aGlzLmN1cnJlbnRUYWI7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gdGFiLmZhY3RvcnkoewogICAgICAgIG9uQ29tbWFuZDogKGNtZCwgcGF5bG9hZCkgPT4gdGhpcy5vbkNvbW1hbmQ/LihjbWQsIHBheWxvYWQpLAogICAgICB9KTsKICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoaW5zdGFuY2UuZWxlbWVudCk7CiAgICAgIHRoaXMudGFiSW5zdGFuY2VzLnNldCh0YWIuaWQsIGluc3RhbmNlKTsKICAgICAgdGhpcy5jb250ZW50LmFwcGVuZENoaWxkKHBhbmVsKTsKICAgIH0KICB9CgogIGZvY3VzVGFiKGlkKSB7CiAgICBjb25zdCBidXR0b24gPSB0aGlzLnRhYmxpc3QucXVlcnlTZWxlY3RvcihgI3RhYi0ke2lkfWApOwogICAgaWYgKGJ1dHRvbikgYnV0dG9uLmZvY3VzKCk7CiAgfQoKICBzZWxlY3RUYWIoaWQpIHsKICAgIGlmICh0aGlzLmN1cnJlbnRUYWIgPT09IGlkKSByZXR1cm47CiAgICBjb25zdCBwcmV2ID0gdGhpcy50YWJJbnN0YW5jZXMuZ2V0KHRoaXMuY3VycmVudFRhYik7CiAgICBjb25zdCBuZXh0ID0gdGhpcy50YWJJbnN0YW5jZXMuZ2V0KGlkKTsKICAgIGNvbnN0IHByZXZQYW5lbCA9IHRoaXMuY29udGVudC5xdWVyeVNlbGVjdG9yKGAjcGFuZWwtJHt0aGlzLmN1cnJlbnRUYWJ9YCk7CiAgICBjb25zdCBuZXh0UGFuZWwgPSB0aGlzLmNvbnRlbnQucXVlcnlTZWxlY3RvcihgI3BhbmVsLSR7aWR9YCk7CiAgICBpZiAocHJldlBhbmVsKSB7CiAgICAgIHByZXZQYW5lbC5oaWRkZW4gPSB0cnVlOwogICAgfQogICAgaWYgKG5leHRQYW5lbCkgewogICAgICBuZXh0UGFuZWwuaGlkZGVuID0gZmFsc2U7CiAgICB9CiAgICBjb25zdCBwcmV2QnV0dG9uID0gdGhpcy50YWJsaXN0LnF1ZXJ5U2VsZWN0b3IoYCN0YWItJHt0aGlzLmN1cnJlbnRUYWJ9YCk7CiAgICBjb25zdCBuZXh0QnV0dG9uID0gdGhpcy50YWJsaXN0LnF1ZXJ5U2VsZWN0b3IoYCN0YWItJHtpZH1gKTsKICAgIGlmIChwcmV2QnV0dG9uKSBwcmV2QnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpOwogICAgaWYgKG5leHRCdXR0b24pIG5leHRCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTsKICAgIHRoaXMuY3VycmVudFRhYiA9IGlkOwogICAgcHJldj8ub25EZWFjdGl2YXRlPy4oKTsKICAgIG5leHQ/Lm9uQWN0aXZhdGU/Lih0aGlzLnN0YXRlKTsKICB9CgogIHRvZ2dsZShmb3JjZSkgewogICAgY29uc3QgZGVzaXJlZCA9IHR5cGVvZiBmb3JjZSA9PT0gJ2Jvb2xlYW4nID8gZm9yY2UgOiAhdGhpcy5pc09wZW47CiAgICB0aGlzLmlzT3BlbiA9IGRlc2lyZWQ7CiAgICB0aGlzLnJvb3Quc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsIGRlc2lyZWQgPyAnZmFsc2UnIDogJ3RydWUnKTsKICAgIHRoaXMucm9vdC5jbGFzc0xpc3QudG9nZ2xlKCdwYW5lbC1vcGVuJywgZGVzaXJlZCk7CiAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBkZXNpcmVkID8gJ3RydWUnIDogJ2ZhbHNlJyk7CiAgICBpZiAoZGVzaXJlZCkgewogICAgICB0aGlzLmZvY3VzVGFiKHRoaXMuY3VycmVudFRhYik7CiAgICB9CiAgfQoKICB1cGRhdGUoc3RhdGUpIHsKICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICAgIGZvciAoY29uc3QgW2lkLCBpbnN0YW5jZV0gb2YgdGhpcy50YWJJbnN0YW5jZXMuZW50cmllcygpKSB7CiAgICAgIGluc3RhbmNlLnVwZGF0ZT8uKHN0YXRlKTsKICAgIH0KICB9Cn0K",
    "app/panel/tabs/agents.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFnZW50c1RhYigpIHsKICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgZWxlbWVudC5jbGFzc05hbWUgPSAndGFiLWFnZW50cyc7CiAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7CiAgaGVhZGluZy50ZXh0Q29udGVudCA9ICfQkNCz0LXQvdGC0YsnOwogIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CgogIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICB0YWJsZS5jbGFzc05hbWUgPSAnYWdlbnRzLXRhYmxlJzsKICB0YWJsZS5pbm5lckhUTUwgPSBgCiAgICA8dGhlYWQ+CiAgICAgIDx0cj4KICAgICAgICA8dGggc2NvcGU9ImNvbCI+SUQ8L3RoPgogICAgICAgIDx0aCBzY29wZT0iY29sIj7Qn9C+0LfQuNGG0LjRjzwvdGg+CiAgICAgICAgPHRoIHNjb3BlPSJjb2wiPtCt0L3QtdGA0LPQuNGPPC90aD4KICAgICAgICA8dGggc2NvcGU9ImNvbCI+0KHRi9GC0L7RgdGC0Yw8L3RoPgogICAgICAgIDx0aCBzY29wZT0iY29sIj7QoNC+0LvRjDwvdGg+CiAgICAgICAgPHRoIHNjb3BlPSJjb2wiPtCi0YDQtdC50YLRizwvdGg+CiAgICAgIDwvdHI+CiAgICA8L3RoZWFkPgogICAgPHRib2R5PjwvdGJvZHk+CiAgYDsKICBlbGVtZW50LmFwcGVuZENoaWxkKHRhYmxlKTsKICBjb25zdCB0Ym9keSA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7CgogIHJldHVybiB7CiAgICBlbGVtZW50LAogICAgdXBkYXRlKHN0YXRlKSB7CiAgICAgIGlmICghc3RhdGU/LmFnZW50cykgcmV0dXJuOwogICAgICB0Ym9keS5pbm5lckhUTUwgPSAnJzsKICAgICAgZm9yIChjb25zdCBhZ2VudCBvZiBzdGF0ZS5hZ2VudHMpIHsKICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgIHJvdy5pbm5lckhUTUwgPSBgCiAgICAgICAgICA8dGQ+JHthZ2VudC5pZH08L3RkPgogICAgICAgICAgPHRkPiR7YWdlbnQueH0sICR7YWdlbnQueX08L3RkPgogICAgICAgICAgPHRkPiR7YWdlbnQuZW5lcmd5LnRvRml4ZWQoMil9PC90ZD4KICAgICAgICAgIDx0ZD4ke2FnZW50LnNhdGlldHkudG9GaXhlZCgyKX08L3RkPgogICAgICAgICAgPHRkPiR7YWdlbnQucm9sZX08L3RkPgogICAgICAgICAgPHRkPiR7YWdlbnQudHJhaXRzLmpvaW4oJywgJyl9PC90ZD4KICAgICAgICBgOwogICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvdyk7CiAgICAgIH0KICAgIH0sCiAgfTsKfQo=",
    "app/panel/tabs/comms.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbW1zVGFiKCkgewogIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBlbGVtZW50LmNsYXNzTmFtZSA9ICd0YWItY29tbXMnOwogIGNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpOwogIGhlYWRpbmcudGV4dENvbnRlbnQgPSAn0JrQvtC80LzRg9C90LjQutCw0YbQuNGPJzsKICBlbGVtZW50LmFwcGVuZENoaWxkKGhlYWRpbmcpOwoKICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICBsaXN0LmNsYXNzTmFtZSA9ICdjb21tcy1sb2cnOwogIGVsZW1lbnQuYXBwZW5kQ2hpbGQobGlzdCk7CgogIHJldHVybiB7CiAgICBlbGVtZW50LAogICAgdXBkYXRlKHN0YXRlKSB7CiAgICAgIGlmICghc3RhdGU/LmNvbW1zKSByZXR1cm47CiAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgIGZvciAoY29uc3QgZW50cnkgb2Ygc3RhdGUuY29tbXMuc2xpY2UoKS5yZXZlcnNlKCkpIHsKICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBjb25zdCB0aW1lID0gbmV3IERhdGUoZW50cnkudGltZSkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CiAgICAgICAgaXRlbS50ZXh0Q29udGVudCA9IGAjJHtlbnRyeS5hZ2VudElkfTogJHtlbnRyeS5tZXNzYWdlfSAoJHt0aW1lfSlgOwogICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoaXRlbSk7CiAgICAgIH0KICAgIH0sCiAgfTsKfQo=",
    "app/panel/tabs/events.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUV2ZW50c1RhYigpIHsKICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgZWxlbWVudC5jbGFzc05hbWUgPSAndGFiLWV2ZW50cyc7CiAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7CiAgaGVhZGluZy50ZXh0Q29udGVudCA9ICfQodC+0LHRi9GC0LjRjyc7CiAgZWxlbWVudC5hcHBlbmRDaGlsZChoZWFkaW5nKTsKCiAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgbGlzdC5jbGFzc05hbWUgPSAnZXZlbnRzLWxvZyc7CiAgZWxlbWVudC5hcHBlbmRDaGlsZChsaXN0KTsKCiAgcmV0dXJuIHsKICAgIGVsZW1lbnQsCiAgICB1cGRhdGUoc3RhdGUpIHsKICAgICAgY29uc3QgZXZlbnRzID0gc3RhdGU/LnN0b3J5dGVsbGVyPy5oaXN0b3J5ID8/IFtdOwogICAgICBsaXN0LmlubmVySFRNTCA9ICcnOwogICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGV2ZW50cy5zbGljZSgpLnJldmVyc2UoKSkgewogICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGl0ZW0udGV4dENvbnRlbnQgPSBgJHtldmVudC50eXBlLnRvVXBwZXJDYXNlKCl9OiAke2V2ZW50LmRlc2NyaXB0aW9ufWA7CiAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChpdGVtKTsKICAgICAgfQogICAgfSwKICB9Owp9Cg==",
    "app/panel/tabs/help.js": "data:text/javascript;base64,Y29uc3QgdHV0b3JpYWxTdGVwcyA9IFsKICAn0JTQvtCx0YDQviDQv9C+0LbQsNC70L7QstCw0YLRjCDQsiDRgdC40LzRg9C70Y/RgtC+0YAg0LrQvtC70L7QvdC40LguINCd0LDQttC80LjRgtC1IMKr0KHRgtCw0YDRgsK7LCDRh9GC0L7QsdGLINCw0LPQtdC90YLRiyDQvtC20LjQu9C4LicsCiAgJ9Ch0LvQtdC00LjRgtC1INC30LAg0YDQtdGB0YPRgNGB0LDQvNC4INCy0L4g0LLQutC70LDQtNC60LUgwqvQnNC40YDCuyDQuCDQutC+0YDRgNC10LrRgtC40YDRg9C50YLQtSDQv9C+0LLQtdC00LXQvdC40LUg0LDQs9C10L3RgtC+0LIuJywKICAn0JLQutC70LDQtNC60LAgwqvQkNCz0LXQvdGC0YvCuyDQv9C+0LrQsNC30YvQstCw0LXRgiDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQsNC20LTQvtCz0L4g0YPRh9Cw0YHRgtC90LjQutCwINC60L7Qu9C+0L3QuNC4LicsCiAgJ9Cd0LDRgdGC0YDQsNC40LLQsNC50YLQtSDQmNCYINCy0L4g0LLQutC70LDQtNC60LUgwqvQndCw0YHRgtGA0L7QudC60LjCuyDQuCDRjdC60YHQv9C10YDQuNC80LXQvdGC0LjRgNGD0LnRgtC1INGBINC+0LHRg9GH0LXQvdC40LXQvC4nLApdOwoKZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhlbHBUYWIoKSB7CiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGVsZW1lbnQuY2xhc3NOYW1lID0gJ3RhYi1oZWxwJzsKICBjb25zdCBoZWFkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTsKICBoZWFkaW5nLnRleHRDb250ZW50ID0gJ9Ch0L/RgNCw0LLQutCwINC4INGC0YPRgtC+0YDQuNCw0LsnOwogIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CgogIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOwogIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0KICAgICfQmNGB0L/QvtC70YzQt9GD0LnRgtC1INC60LvQsNCy0LjRiNGDIFRhYiDQtNC70Y8g0L3QsNCy0LjQs9Cw0YbQuNC4INC/0L4g0L/QsNC90LXQu9C4LiDQn9Cw0L3QtdC70Ywg0LzQvtC20L3QviDQvtGC0LrRgNGL0YLRjCDQuCDRgSDQutC70LDQstC40LDRgtGD0YDRiy4nOwogIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pOwoKICBjb25zdCB0dXRvcmlhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIHR1dG9yaWFsLmNsYXNzTmFtZSA9ICd0dXRvcmlhbC1ib3gnOwogIGNvbnN0IHN0ZXBUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOwogIGNvbnN0IG5leHRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICBuZXh0QnRuLnRleHRDb250ZW50ID0gJ9CU0LDQu9C10LUnOwogIG5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBhZHZhbmNlKCkpOwogIHR1dG9yaWFsLmFwcGVuZENoaWxkKHN0ZXBUZXh0KTsKICB0dXRvcmlhbC5hcHBlbmRDaGlsZChuZXh0QnRuKTsKICBlbGVtZW50LmFwcGVuZENoaWxkKHR1dG9yaWFsKTsKCiAgbGV0IHN0ZXAgPSAwOwogIGZ1bmN0aW9uIGFkdmFuY2UoKSB7CiAgICBzdGVwID0gKHN0ZXAgKyAxKSAlIHR1dG9yaWFsU3RlcHMubGVuZ3RoOwogICAgc3RlcFRleHQudGV4dENvbnRlbnQgPSB0dXRvcmlhbFN0ZXBzW3N0ZXBdOwogIH0KICBzdGVwVGV4dC50ZXh0Q29udGVudCA9IHR1dG9yaWFsU3RlcHNbMF07CgogIHJldHVybiB7CiAgICBlbGVtZW50LAogICAgb25BY3RpdmF0ZSgpIHsKICAgICAgc3RlcCA9IDA7CiAgICAgIHN0ZXBUZXh0LnRleHRDb250ZW50ID0gdHV0b3JpYWxTdGVwc1tzdGVwXTsKICAgIH0sCiAgfTsKfQo=",
    "app/panel/tabs/overview.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU92ZXJ2aWV3VGFiKHsgb25Db21tYW5kIH0pIHsKICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgZWxlbWVudC5jbGFzc05hbWUgPSAndGFiLW92ZXJ2aWV3JzsKCiAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7CiAgaGVhZGluZy50ZXh0Q29udGVudCA9ICfQodC+0YHRgtC+0Y/QvdC40LUg0LrQvtC70L7QvdC40LgnOwogIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CgogIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKICBzdGF0dXMuY2xhc3NOYW1lID0gJ3NpbS1zdGF0dXMnOwogIHN0YXR1cy50ZXh0Q29udGVudCA9ICfQodC40LzRg9C70Y/RhtC40Y8g0L3QtSDQt9Cw0L/Rg9GJ0LXQvdCwJzsKICBlbGVtZW50LmFwcGVuZENoaWxkKHN0YXR1cyk7CgogIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgc3RhcnRCdXR0b24udHlwZSA9ICdidXR0b24nOwogIHN0YXJ0QnV0dG9uLmNsYXNzTmFtZSA9ICdwcmltYXJ5JzsKICBzdGFydEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodGC0LDRgNGCJzsKICBzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgIG9uQ29tbWFuZD8uKCdzaW11bGF0aW9uOnN0YXJ0Jyk7CiAgfSk7CiAgZWxlbWVudC5hcHBlbmRDaGlsZChzdGFydEJ1dHRvbik7CgogIGNvbnN0IHBhdXNlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgcGF1c2VCdXR0b24udHlwZSA9ICdidXR0b24nOwogIHBhdXNlQnV0dG9uLnRleHRDb250ZW50ID0gJ9Cf0LDRg9C30LAnOwogIHBhdXNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gb25Db21tYW5kPy4oJ3NpbXVsYXRpb246cGF1c2UnKSk7CiAgZWxlbWVudC5hcHBlbmRDaGlsZChwYXVzZUJ1dHRvbik7CgogIGNvbnN0IG1ldHJpY3NMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGwnKTsKICBtZXRyaWNzTGlzdC5jbGFzc05hbWUgPSAnbWV0cmljcy1ncmlkJzsKICBtZXRyaWNzTGlzdC5pbm5lckhUTUwgPSBgCiAgICA8ZGl2PjxkdD7QotC10LrRg9GJ0LjQuSDRgtC40Lo8L2R0PjxkZCBkYXRhLWZpZWxkPSJ0aWNrIj4wPC9kZD48L2Rpdj4KICAgIDxkaXY+PGR0PtCh0YDQtdC00L3Rj9GPINGN0L3QtdGA0LPQuNGPPC9kdD48ZGQgZGF0YS1maWVsZD0iZW5lcmd5Ij4wPC9kZD48L2Rpdj4KICAgIDxkaXY+PGR0PtCh0YDQtdC00L3Rj9GPINGB0YvRgtC+0YHRgtGMPC9kdD48ZGQgZGF0YS1maWVsZD0ic2F0aWV0eSI+MDwvZGQ+PC9kaXY+CiAgICA8ZGl2PjxkdD7QotGA0LXQvdC40YDQvtCy0LrQsCAo0LzRgSk8L2R0PjxkZCBkYXRhLWZpZWxkPSJ0cmFpbmluZyI+MDwvZGQ+PC9kaXY+CiAgYDsKICBlbGVtZW50LmFwcGVuZENoaWxkKG1ldHJpY3NMaXN0KTsKCiAgcmV0dXJuIHsKICAgIGVsZW1lbnQsCiAgICB1cGRhdGUoc3RhdGUpIHsKICAgICAgaWYgKCFzdGF0ZSkgcmV0dXJuOwogICAgICBzdGF0dXMudGV4dENvbnRlbnQgPSBzdGF0ZS5pc1J1bm5pbmcgPyAn0KHQuNC80YPQu9GP0YbQuNGPINCw0LrRgtC40LLQvdCwJyA6ICfQodC40LzRg9C70Y/RhtC40Y8g0L3QsCDQv9Cw0YPQt9C1JzsKICAgICAgbWV0cmljc0xpc3QucXVlcnlTZWxlY3RvcignW2RhdGEtZmllbGQ9InRpY2siXScpLnRleHRDb250ZW50ID0gc3RhdGUudGljazsKICAgICAgbWV0cmljc0xpc3QucXVlcnlTZWxlY3RvcignW2RhdGEtZmllbGQ9ImVuZXJneSJdJykudGV4dENvbnRlbnQgPSBzdGF0ZS5tZXRyaWNzPy5hdmdFbmVyZ3kKICAgICAgICA/IHN0YXRlLm1ldHJpY3MuYXZnRW5lcmd5LnRvRml4ZWQoMikKICAgICAgICA6ICcwJzsKICAgICAgbWV0cmljc0xpc3QucXVlcnlTZWxlY3RvcignW2RhdGEtZmllbGQ9InNhdGlldHkiXScpLnRleHRDb250ZW50ID0gc3RhdGUubWV0cmljcz8uYXZnU2F0aWV0eQogICAgICAgID8gc3RhdGUubWV0cmljcy5hdmdTYXRpZXR5LnRvRml4ZWQoMikKICAgICAgICA6ICcwJzsKICAgICAgbWV0cmljc0xpc3QucXVlcnlTZWxlY3RvcignW2RhdGEtZmllbGQ9InRyYWluaW5nIl0nKS50ZXh0Q29udGVudCA9IHN0YXRlLm1ldHJpY3M/LnRyYWluaW5nVGltZQogICAgICAgID8gc3RhdGUubWV0cmljcy50cmFpbmluZ1RpbWUudG9GaXhlZCgxKQogICAgICAgIDogJzAnOwogICAgfSwKICB9Owp9Cg==",
    "app/panel/tabs/saves.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNhdmVzVGFiKHsgb25Db21tYW5kIH0pIHsKICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgZWxlbWVudC5jbGFzc05hbWUgPSAndGFiLXNhdmVzJzsKICBjb25zdCBoZWFkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTsKICBoZWFkaW5nLnRleHRDb250ZW50ID0gJ9Ch0LXQudCy0Ysg0Lgg0LTQsNC90L3Ri9C1JzsKICBlbGVtZW50LmFwcGVuZENoaWxkKGhlYWRpbmcpOwoKICBjb25zdCBhY3Rpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgYWN0aW9ucy5jbGFzc05hbWUgPSAnYnV0dG9uLXJvdyc7CgogIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICBzYXZlQnRuLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCDRgdC10LnRh9Cw0YEnOwogIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBvbkNvbW1hbmQ/Lignc3RvcmFnZTpzYXZlJykpOwoKICBjb25zdCBsb2FkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgbG9hZEJ0bi50ZXh0Q29udGVudCA9ICfQl9Cw0LPRgNGD0LfQuNGC0Ywg0L/QvtGB0LvQtdC00L3QuNC5JzsKICBsb2FkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gb25Db21tYW5kPy4oJ3N0b3JhZ2U6bG9hZCcpKTsgCgogIGNvbnN0IGV4cG9ydEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGV4cG9ydEJ0bi50ZXh0Q29udGVudCA9ICfQrdC60YHQv9C+0YDRgtC40YDQvtCy0LDRgtGMINC80L7Qt9Cz0LgnOwogIGV4cG9ydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG9uQ29tbWFuZD8uKCdicmFpbnM6ZXhwb3J0JykpOwoKICBjb25zdCBpbXBvcnRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgaW1wb3J0SW5wdXQudHlwZSA9ICdmaWxlJzsKICBpbXBvcnRJbnB1dC5hY2NlcHQgPSAnLmpzb24nOwogIGltcG9ydElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgIGNvbnN0IGZpbGUgPSBpbXBvcnRJbnB1dC5maWxlcz8uWzBdOwogICAgaWYgKCFmaWxlKSByZXR1cm47CiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHsKICAgICAgb25Db21tYW5kPy4oJ2JyYWluczppbXBvcnQnLCByZWFkZXIucmVzdWx0KTsKICAgIH07CiAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsKICB9KTsKCiAgYWN0aW9ucy5hcHBlbmRDaGlsZChzYXZlQnRuKTsKICBhY3Rpb25zLmFwcGVuZENoaWxkKGxvYWRCdG4pOwogIGFjdGlvbnMuYXBwZW5kQ2hpbGQoZXhwb3J0QnRuKTsKICBhY3Rpb25zLmFwcGVuZENoaWxkKGltcG9ydElucHV0KTsKICBlbGVtZW50LmFwcGVuZENoaWxkKGFjdGlvbnMpOwoKICBjb25zdCBsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7CiAgbG9nLmNsYXNzTmFtZSA9ICdzdG9yYWdlLWxvZyc7CiAgZWxlbWVudC5hcHBlbmRDaGlsZChsb2cpOwoKICByZXR1cm4gewogICAgZWxlbWVudCwKICAgIHVwZGF0ZShzdGF0ZSkgewogICAgICBpZiAoc3RhdGU/LnN0b3JhZ2VNZXNzYWdlKSB7CiAgICAgICAgbG9nLnRleHRDb250ZW50ID0gc3RhdGUuc3RvcmFnZU1lc3NhZ2U7CiAgICAgIH0KICAgIH0sCiAgfTsKfQo=",
    "app/panel/tabs/settings.js": "data:text/javascript;base64,aW1wb3J0IHsgVEhJTktfRVZFUllfT1BUSU9OUyB9IGZyb20gJ2FwcC9kYXRhL2NvbnN0YW50cy5qcyc7CgpleHBvcnQgZnVuY3Rpb24gY3JlYXRlU2V0dGluZ3NUYWIoeyBvbkNvbW1hbmQgfSkgewogIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7CiAgZWxlbWVudC5jbGFzc05hbWUgPSAndGFiLXNldHRpbmdzJzsKICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsICdzZXR0aW5ncy1kZXNjcmlwdGlvbicpOwogIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpKTsKCiAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7CiAgaGVhZGluZy50ZXh0Q29udGVudCA9ICfQndCw0YHRgtGA0L7QudC60LgnOwogIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CgogIGNvbnN0IHRoaW5rTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogIHRoaW5rTGFiZWwudGV4dENvbnRlbnQgPSAn0KfQsNGB0YLQvtGC0LAg0YDQsNC30LzRi9GI0LvQtdC90LjQuSc7CiAgdGhpbmtMYWJlbC5odG1sRm9yID0gJ3RoaW5rLWV2ZXJ5JzsKICBjb25zdCB0aGlua1NlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpOwogIHRoaW5rU2VsZWN0LmlkID0gJ3RoaW5rLWV2ZXJ5JzsKICBmb3IgKGNvbnN0IHZhbHVlIG9mIFRISU5LX0VWRVJZX09QVElPTlMpIHsKICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgb3B0aW9uLnZhbHVlID0gU3RyaW5nKHZhbHVlKTsKICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGAke3ZhbHVlfWA7CiAgICB0aGlua1NlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwogIH0KICB0aGlua1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICBvbkNvbW1hbmQ/Lignc2V0dGluZ3M6dXBkYXRlJywgeyB0aGlua0V2ZXJ5OiBOdW1iZXIodGhpbmtTZWxlY3QudmFsdWUpIH0pOwogIH0pOwogIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpbmtMYWJlbCk7CiAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlua1NlbGVjdCk7CgogIGNvbnN0IGxlYXJuaW5nTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogIGxlYXJuaW5nTGFiZWwudGV4dENvbnRlbnQgPSAn0J7QsdGD0YfQtdC90LjQtSDQstC60LvRjtGH0LXQvdC+JzsKICBsZWFybmluZ0xhYmVsLmh0bWxGb3IgPSAnbGVhcm5pbmctdG9nZ2xlJzsKICBjb25zdCBsZWFybmluZ1RvZ2dsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgbGVhcm5pbmdUb2dnbGUudHlwZSA9ICdjaGVja2JveCc7CiAgbGVhcm5pbmdUb2dnbGUuaWQgPSAnbGVhcm5pbmctdG9nZ2xlJzsKICBsZWFybmluZ1RvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICBvbkNvbW1hbmQ/Lignc2V0dGluZ3M6dXBkYXRlJywgeyBhbGxvd0xlYXJuaW5nOiBsZWFybmluZ1RvZ2dsZS5jaGVja2VkIH0pOwogIH0pOwogIGVsZW1lbnQuYXBwZW5kQ2hpbGQobGVhcm5pbmdMYWJlbCk7CiAgZWxlbWVudC5hcHBlbmRDaGlsZChsZWFybmluZ1RvZ2dsZSk7CgogIGNvbnN0IGJyYWluTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogIGJyYWluTGFiZWwudGV4dENvbnRlbnQgPSAn0JzQvtC00LXQu9GMINC80L7Qt9Cz0LAnOwogIGJyYWluTGFiZWwuaHRtbEZvciA9ICdicmFpbi1tb2RlbCc7CiAgY29uc3QgYnJhaW5TZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKICBicmFpblNlbGVjdC5pZCA9ICdicmFpbi1tb2RlbCc7CiAgZm9yIChjb25zdCB2YWx1ZSBvZiBbJ3RpbnktbWxwJywgJ3RpbnktZ3J1J10pIHsKICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgb3B0aW9uLnZhbHVlID0gdmFsdWU7CiAgICBvcHRpb24udGV4dENvbnRlbnQgPSB2YWx1ZTsKICAgIGJyYWluU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7CiAgfQogIGJyYWluU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgIG9uQ29tbWFuZD8uKCdzZXR0aW5nczp1cGRhdGUnLCB7IGJyYWluTW9kZWw6IGJyYWluU2VsZWN0LnZhbHVlIH0pOwogIH0pOwogIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYnJhaW5MYWJlbCk7CiAgZWxlbWVudC5hcHBlbmRDaGlsZChicmFpblNlbGVjdCk7CgogIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOwogIGRlc2NyaXB0aW9uLmlkID0gJ3NldHRpbmdzLWRlc2NyaXB0aW9uJzsKICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9ICfQndCw0YHRgtGA0L7QudC60Lgg0L/RgNC40LzQtdC90Y/RjtGC0YHRjyDRgdGA0LDQt9GDINC4INGB0L7RhdGA0LDQvdGP0Y7RgtGB0Y8g0LIgbG9jYWxTdG9yYWdlLic7CiAgZWxlbWVudC5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7CgogIHJldHVybiB7CiAgICBlbGVtZW50LAogICAgdXBkYXRlKHN0YXRlKSB7CiAgICAgIGlmICghc3RhdGUpIHJldHVybjsKICAgICAgaWYgKHN0YXRlLmNvbmZpZz8uYWdlbnRzPy50aGlua0V2ZXJ5KSB7CiAgICAgICAgdGhpbmtTZWxlY3QudmFsdWUgPSBTdHJpbmcoc3RhdGUuY29uZmlnLmFnZW50cy50aGlua0V2ZXJ5KTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIHN0YXRlLmNvbmZpZz8uYWdlbnRzPy5hbGxvd0xlYXJuaW5nID09PSAnYm9vbGVhbicpIHsKICAgICAgICBsZWFybmluZ1RvZ2dsZS5jaGVja2VkID0gc3RhdGUuY29uZmlnLmFnZW50cy5hbGxvd0xlYXJuaW5nOwogICAgICB9CiAgICAgIGlmIChzdGF0ZS5jb25maWc/LmJyYWlucz8ubW9kZWwpIHsKICAgICAgICBicmFpblNlbGVjdC52YWx1ZSA9IHN0YXRlLmNvbmZpZy5icmFpbnMubW9kZWw7CiAgICAgIH0KICAgIH0sCiAgfTsKfQo=",
    "app/panel/tabs/world.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVdvcmxkVGFiKCkgewogIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBlbGVtZW50LmNsYXNzTmFtZSA9ICd0YWItd29ybGQnOwogIGNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpOwogIGhlYWRpbmcudGV4dENvbnRlbnQgPSAn0JzQuNGAJzsKICBlbGVtZW50LmFwcGVuZENoaWxkKGhlYWRpbmcpOwoKICBjb25zdCBpbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGwnKTsKICBpbmZvLmNsYXNzTmFtZSA9ICdtZXRyaWNzLWdyaWQnOwogIGluZm8uaW5uZXJIVE1MID0gYAogICAgPGRpdj48ZHQ+0KDQsNC30LzQtdGAPC9kdD48ZGQgZGF0YS1maWVsZD0ic2l6ZSI+MCDDlyAwPC9kZD48L2Rpdj4KICAgIDxkaXY+PGR0PtCS0YDQtdC80Y8g0YHRg9GC0L7QujwvZHQ+PGRkIGRhdGEtZmllbGQ9InRpbWUiPjA8L2RkPjwvZGl2PgogICAgPGRpdj48ZHQ+0JXQtNCwPC9kdD48ZGQgZGF0YS1maWVsZD0iZm9vZCI+MDwvZGQ+PC9kaXY+CiAgICA8ZGl2PjxkdD7QlNC10YDQtdCy0L48L2R0PjxkZCBkYXRhLWZpZWxkPSJ3b29kIj4wPC9kZD48L2Rpdj4KICAgIDxkaXY+PGR0PtCg0YPQtNCwPC9kdD48ZGQgZGF0YS1maWVsZD0ib3JlIj4wPC9kZD48L2Rpdj4KICAgIDxkaXY+PGR0PtCa0YDQuNGB0YLQsNC70LvRizwvZHQ+PGRkIGRhdGEtZmllbGQ9ImNyeXN0YWwiPjA8L2RkPjwvZGl2PgogIGA7CiAgZWxlbWVudC5hcHBlbmRDaGlsZChpbmZvKTsKCiAgcmV0dXJuIHsKICAgIGVsZW1lbnQsCiAgICB1cGRhdGUoc3RhdGUpIHsKICAgICAgaWYgKCFzdGF0ZT8ud29ybGQpIHJldHVybjsKICAgICAgaW5mby5xdWVyeVNlbGVjdG9yKCdbZGF0YS1maWVsZD0ic2l6ZSJdJykudGV4dENvbnRlbnQgPSBgJHtzdGF0ZS53b3JsZC53aWR0aH0gw5cgJHtzdGF0ZS53b3JsZC5oZWlnaHR9YDsKICAgICAgaW5mby5xdWVyeVNlbGVjdG9yKCdbZGF0YS1maWVsZD0idGltZSJdJykudGV4dENvbnRlbnQgPSBzdGF0ZS53b3JsZC50aW1lT2ZEYXkudG9GaXhlZCgwKTsKICAgICAgZm9yIChjb25zdCBrZXkgb2YgWydmb29kJywgJ3dvb2QnLCAnb3JlJywgJ2NyeXN0YWwnXSkgewogICAgICAgIGNvbnN0IGVsID0gaW5mby5xdWVyeVNlbGVjdG9yKGBbZGF0YS1maWVsZD0iJHtrZXl9Il1gKTsKICAgICAgICBpZiAoZWwpIGVsLnRleHRDb250ZW50ID0gc3RhdGUud29ybGQucmVzb3VyY2VzPy5ba2V5XSA/PyAwOwogICAgICB9CiAgICB9LAogIH07Cn0K",
    "app/render/bubbles.js": "data:text/javascript;base64,aW1wb3J0IHsgVElMRV9TSVpFIH0gZnJvbSAnYXBwL2RhdGEvY29uc3RhbnRzLmpzJzsKaW1wb3J0IHsgRU1PSklfQklUTUFQIH0gZnJvbSAnYXBwL2Fzc2V0cy9hc3NldHMubWFuaWZlc3QuanMnOwoKZXhwb3J0IGNsYXNzIEJ1YmJsZUxheWVyIHsKICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHsKICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyOwogICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgIHRoaXMuY2FudmFzLmNsYXNzTmFtZSA9ICdidWJibGUtbGF5ZXInOwogICAgdGhpcy5jYW52YXMud2lkdGggPSAxOwogICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gMTsKICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIHRoaXMuY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlOwogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTsKICAgIHRoaXMubWVzc2FnZXMgPSBuZXcgTWFwKCk7CiAgICB0aGlzLmJpdG1hcCA9IG5ldyBJbWFnZSgpOwogICAgdGhpcy5iaXRtYXBMb2FkZWQgPSBmYWxzZTsKICAgIHRoaXMuYml0bWFwLnNyYyA9IEVNT0pJX0JJVE1BUC5pbWFnZTsKICAgIHRoaXMuYml0bWFwLm9ubG9hZCA9ICgpID0+IHsKICAgICAgdGhpcy5iaXRtYXBMb2FkZWQgPSB0cnVlOwogICAgfTsKICB9CgogIHJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7CiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpZHRoOwogICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogIH0KCiAgc2hvd01lc3NhZ2UoYWdlbnQsIHN5bWJvbCkgewogICAgaWYgKCFzeW1ib2wpIHJldHVybjsKICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5tZXNzYWdlcy5nZXQoYWdlbnQuaWQpOwogICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLnN5bWJvbCA9PT0gc3ltYm9sKSByZXR1cm47CiAgICB0aGlzLm1lc3NhZ2VzLnNldChhZ2VudC5pZCwgeyBzeW1ib2wsIHR0bDogNjAgfSk7CiAgfQoKICB1cGRhdGUoYWdlbnRzKSB7CiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDsKICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7CiAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICBjdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7CiAgICBjdHguZm9udCA9ICcxMnB4IHNhbnMtc2VyaWYnOwogICAgZm9yIChjb25zdCBhZ2VudCBvZiBhZ2VudHMpIHsKICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXMuZ2V0KGFnZW50LmlkKTsKICAgICAgaWYgKCFtZXNzYWdlKSBjb250aW51ZTsKICAgICAgY29uc3QgeCA9IGFnZW50LnggKiBUSUxFX1NJWkUgKyBUSUxFX1NJWkUgLyAyOwogICAgICBjb25zdCB5ID0gYWdlbnQueSAqIFRJTEVfU0laRSAtIDQ7CiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAwLjYpJzsKICAgICAgY3R4LmZpbGxSZWN0KHggLSBUSUxFX1NJWkUgKiAwLjUsIHkgLSBUSUxFX1NJWkUgKiAwLjksIFRJTEVfU0laRSwgVElMRV9TSVpFICogMC43NSk7CiAgICAgIGlmICh0aGlzLmJpdG1hcExvYWRlZCkgewogICAgICAgIGNvbnN0IGluZGV4ID0gRU1PSklfQklUTUFQLmNvZGVzLmluZGV4T2YobWVzc2FnZS5zeW1ib2wpOwogICAgICAgIGNvbnN0IGNlbGxJbmRleCA9IGluZGV4ID49IDAgPyBpbmRleCA6IDA7CiAgICAgICAgY29uc3QgY29scyA9IEVNT0pJX0JJVE1BUC5jb2x1bW5zIHx8IDE7CiAgICAgICAgY29uc3QgY2VsbFNpemUgPSBFTU9KSV9CSVRNQVAuY2VsbFNpemUgfHwgMTsKICAgICAgICBjb25zdCBzeCA9IChjZWxsSW5kZXggJSBjb2xzKSAqIGNlbGxTaXplOwogICAgICAgIGNvbnN0IHN5ID0gTWF0aC5mbG9vcihjZWxsSW5kZXggLyBjb2xzKSAqIGNlbGxTaXplOwogICAgICAgIGN0eC5kcmF3SW1hZ2UoCiAgICAgICAgICB0aGlzLmJpdG1hcCwKICAgICAgICAgIHN4LAogICAgICAgICAgc3ksCiAgICAgICAgICBjZWxsU2l6ZSwKICAgICAgICAgIGNlbGxTaXplLAogICAgICAgICAgeCAtIFRJTEVfU0laRSAqIDAuNDUsCiAgICAgICAgICB5IC0gVElMRV9TSVpFICogMC44NSwKICAgICAgICAgIFRJTEVfU0laRSAqIDAuOSwKICAgICAgICAgIFRJTEVfU0laRSAqIDAuOSwKICAgICAgICApOwogICAgICB9IGVsc2UgewogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnOwogICAgICAgIGN0eC5mb250ID0gJzEycHggc2Fucy1zZXJpZic7CiAgICAgICAgY3R4LmZpbGxUZXh0KG1lc3NhZ2Uuc3ltYm9sLCB4LCB5KTsKICAgICAgfQogICAgICBtZXNzYWdlLnR0bCAtPSAxOwogICAgICBpZiAobWVzc2FnZS50dGwgPD0gMCkgewogICAgICAgIHRoaXMubWVzc2FnZXMuZGVsZXRlKGFnZW50LmlkKTsKICAgICAgfQogICAgfQogIH0KfQo=",
    "app/render/overlays.js": "data:text/javascript;base64,aW1wb3J0IHsgVElMRV9TSVpFIH0gZnJvbSAnYXBwL2RhdGEvY29uc3RhbnRzLmpzJzsKCmV4cG9ydCBmdW5jdGlvbiBkcmF3R3JpZChjdHgsIHdvcmxkKSB7CiAgY29uc3Qgd2lkdGggPSB3b3JsZC53aWR0aCAqIFRJTEVfU0laRTsKICBjb25zdCBoZWlnaHQgPSB3b3JsZC5oZWlnaHQgKiBUSUxFX1NJWkU7CiAgY3R4LnNhdmUoKTsKICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjA4KSc7CiAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgZm9yIChsZXQgeCA9IDA7IHggPD0gd2lkdGg7IHggKz0gVElMRV9TSVpFKSB7CiAgICBjdHguYmVnaW5QYXRoKCk7CiAgICBjdHgubW92ZVRvKHgsIDApOwogICAgY3R4LmxpbmVUbyh4LCBoZWlnaHQpOwogICAgY3R4LnN0cm9rZSgpOwogIH0KICBmb3IgKGxldCB5ID0gMDsgeSA8PSBoZWlnaHQ7IHkgKz0gVElMRV9TSVpFKSB7CiAgICBjdHguYmVnaW5QYXRoKCk7CiAgICBjdHgubW92ZVRvKDAsIHkpOwogICAgY3R4LmxpbmVUbyh3aWR0aCwgeSk7CiAgICBjdHguc3Ryb2tlKCk7CiAgfQogIGN0eC5yZXN0b3JlKCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBkcmF3SGVhdG1hcChjdHgsIGFnZW50cykgewogIGN0eC5zYXZlKCk7CiAgY3R4Lmdsb2JhbEFscGhhID0gMC4yOwogIGZvciAoY29uc3QgYWdlbnQgb2YgYWdlbnRzKSB7CiAgICBjb25zdCBpbnRlbnNpdHkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBhZ2VudC5lbmVyZ3kpKTsKICAgIGN0eC5maWxsU3R5bGUgPSBgcmdiYSgyNTUsIDE4MCwgMCwgJHtpbnRlbnNpdHl9KWA7CiAgICBjdHguYmVnaW5QYXRoKCk7CiAgICBjdHguYXJjKAogICAgICBhZ2VudC54ICogVElMRV9TSVpFICsgVElMRV9TSVpFIC8gMiwKICAgICAgYWdlbnQueSAqIFRJTEVfU0laRSArIFRJTEVfU0laRSAvIDIsCiAgICAgIFRJTEVfU0laRSwKICAgICAgMCwKICAgICAgTWF0aC5QSSAqIDIsCiAgICApOwogICAgY3R4LmZpbGwoKTsKICB9CiAgY3R4LnJlc3RvcmUoKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGRyYXdEYXlOaWdodChjdHgsIHdvcmxkKSB7CiAgY29uc3QgcGhhc2UgPSBNYXRoLnNpbigod29ybGQudGltZU9mRGF5IC8gMzAwKSAqIE1hdGguUEkgKiAyKTsKICBjb25zdCBkYXJrbmVzcyA9IChwaGFzZSArIDEpIC8gMjsKICBjdHguc2F2ZSgpOwogIGN0eC5maWxsU3R5bGUgPSBgcmdiYSgwLCAwLCA0MCwgJHswLjMgKiBkYXJrbmVzc30pYDsKICBjdHguZmlsbFJlY3QoMCwgMCwgd29ybGQud2lkdGggKiBUSUxFX1NJWkUsIHdvcmxkLmhlaWdodCAqIFRJTEVfU0laRSk7CiAgY3R4LnJlc3RvcmUoKTsKfQo=",
    "app/render/pixi_app.js": "data:text/javascript;base64,aW1wb3J0IHsgU1BSSVRFX01BTklGRVNUIH0gZnJvbSAnYXBwL2Fzc2V0cy9hc3NldHMubWFuaWZlc3QuanMnOwppbXBvcnQgeyBUSUxFX1NJWkUgfSBmcm9tICdhcHAvZGF0YS9jb25zdGFudHMuanMnOwppbXBvcnQgeyBkcmF3R3JpZCwgZHJhd0hlYXRtYXAsIGRyYXdEYXlOaWdodCB9IGZyb20gJ2FwcC9yZW5kZXIvb3ZlcmxheXMuanMnOwppbXBvcnQgeyBCdWJibGVMYXllciB9IGZyb20gJ2FwcC9yZW5kZXIvYnViYmxlcy5qcyc7Cgpjb25zdCBCSU9NRV9DT0xPUlMgPSB7CiAgZ3Jhc3M6ICcjNDg2YzJiJywKICBmb3Jlc3Q6ICcjMmQ0ZDFhJywKICB3YXRlcjogJyMyNjRiN2YnLAogIG1vdW50YWluOiAnIzY3Njc2NycsCn07CgpleHBvcnQgY2xhc3MgUGl4aUFwcCB7CiAgY29uc3RydWN0b3IoeyBjb250YWluZXJJZCA9ICdnYW1lLXJvb3QnIH0gPSB7fSkgewogICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJJZCkgPz8gZG9jdW1lbnQuYm9keTsKICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICB0aGlzLmNhbnZhcy5jbGFzc05hbWUgPSAnZ2FtZS1jYW52YXMnOwogICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHsgYWxwaGE6IGZhbHNlIH0pOwogICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpOwogICAgdGhpcy5idWJibGVzID0gbmV3IEJ1YmJsZUxheWVyKHRoaXMuY29udGFpbmVyKTsKICAgIHRoaXMuc3ByaXRlID0gbmV3IEltYWdlKCk7CiAgICB0aGlzLnNwcml0ZUxvYWRlZCA9IGZhbHNlOwogICAgdGhpcy5zcHJpdGUuc3JjID0gU1BSSVRFX01BTklGRVNULm1ldGEuaW1hZ2U7CiAgICB0aGlzLnNwcml0ZS5vbmxvYWQgPSAoKSA9PiB7CiAgICAgIHRoaXMuc3ByaXRlTG9hZGVkID0gdHJ1ZTsKICAgIH07CiAgICB0aGlzLnN0YXRlID0gbnVsbDsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB0aGlzLmZpdFRvQ29udGFpbmVyKCkpOwogIH0KCiAgZml0VG9Db250YWluZXIoKSB7CiAgICBpZiAoIXRoaXMuc3RhdGUpIHJldHVybjsKICAgIGNvbnN0IHdpZHRoID0gdGhpcy5zdGF0ZS53b3JsZC53aWR0aCAqIFRJTEVfU0laRTsKICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuc3RhdGUud29ybGQuaGVpZ2h0ICogVElMRV9TSVpFOwogICAgdGhpcy5jYW52YXMud2lkdGggPSB3aWR0aDsKICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodDsKICAgIHRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgOwogICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDsKICAgIHRoaXMuYnViYmxlcy5yZXNpemUod2lkdGgsIGhlaWdodCk7CiAgfQoKICB1cGRhdGUoc3RhdGUpIHsKICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICAgIHRoaXMuZml0VG9Db250YWluZXIoKTsKICAgIHRoaXMucmVuZGVyKCk7CiAgfQoKICByZW5kZXIoKSB7CiAgICBpZiAoIXRoaXMuc3RhdGUpIHJldHVybjsKICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzOwogICAgY29uc3QgeyB3b3JsZCwgYWdlbnRzIH0gPSB0aGlzLnN0YXRlOwogICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTsKICAgIGN0eC5maWxsU3R5bGUgPSAiIzEyMWIyNCI7CiAgICBjdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7CiAgICBjdHguZm9udCA9ICIxMHB4IG1vbm9zcGFjZSI7CiAgICBjdHgudGV4dEFsaWduID0gImNlbnRlciI7CiAgICBjdHgudGV4dEJhc2VsaW5lID0gIm1pZGRsZSI7CiAgICBmb3IgKGNvbnN0IHRpbGUgb2YgdGhpcy5zdGF0ZS53b3JsZFRpbGVzID8/IFtdKSB7CiAgICAgIGNvbnN0IGNvbG9yID0gQklPTUVfQ09MT1JTW3RpbGUuYmlvbWVdID8/ICcjMzMzJzsKICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yOwogICAgICBjdHguZmlsbFJlY3QodGlsZS54ICogVElMRV9TSVpFLCB0aWxlLnkgKiBUSUxFX1NJWkUsIFRJTEVfU0laRSwgVElMRV9TSVpFKTsKICAgIH0KICAgIGRyYXdHcmlkKGN0eCwgd29ybGQpOwogICAgZm9yIChjb25zdCBhZ2VudCBvZiBhZ2VudHMpIHsKICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuOSknOwogICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgIGN0eC5hcmMoCiAgICAgICAgYWdlbnQueCAqIFRJTEVfU0laRSArIFRJTEVfU0laRSAvIDIsCiAgICAgICAgYWdlbnQueSAqIFRJTEVfU0laRSArIFRJTEVfU0laRSAvIDIsCiAgICAgICAgVElMRV9TSVpFIC8gMywKICAgICAgICAwLAogICAgICAgIE1hdGguUEkgKiAyLAogICAgICApOwogICAgICBjdHguZmlsbCgpOwogICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMC42KSc7CiAgICAgIGN0eC5maWxsVGV4dCgKICAgICAgICBhZ2VudC5sYXN0QWN0aW9uLnRvU3RyaW5nKCksCiAgICAgICAgYWdlbnQueCAqIFRJTEVfU0laRSArIFRJTEVfU0laRSAvIDIsCiAgICAgICAgYWdlbnQueSAqIFRJTEVfU0laRSArIFRJTEVfU0laRSAvIDIgKyA4LAogICAgICApOwogICAgICBpZiAoYWdlbnQubGFzdFN5bWJvbCA+IDApIHsKICAgICAgICBjb25zdCBzeW1ib2wgPSB0aGlzLnN0YXRlLmNvbW1zQWxwaGFiZXQ/LlthZ2VudC5sYXN0U3ltYm9sXSA/PyAnKic7CiAgICAgICAgdGhpcy5idWJibGVzLnNob3dNZXNzYWdlKGFnZW50LCBzeW1ib2wpOwogICAgICB9CiAgICB9CiAgICBkcmF3SGVhdG1hcChjdHgsIGFnZW50cyk7CiAgICBkcmF3RGF5TmlnaHQoY3R4LCB3b3JsZCk7CiAgICB0aGlzLmJ1YmJsZXMudXBkYXRlKGFnZW50cyk7CiAgfQp9Cg==",
    "app/storage/idb.js": "data:text/javascript;base64,Y29uc3QgREJfTkFNRSA9ICdjb2xvbnktc2ltLW9mZmxpbmUnOwpjb25zdCBEQl9WRVJTSU9OID0gMTsKCmNvbnN0IFNUT1JFX1NBVkVTID0gJ3NhdmVzJzsKY29uc3QgU1RPUkVfQlJBSU5TID0gJ2JyYWlucyc7CgpmdW5jdGlvbiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHsKICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiAhPT0gJ3VuZGVmaW5lZCc7Cn0KCmZ1bmN0aW9uIG9wZW5EYXRhYmFzZSgpIHsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKERCX05BTUUsIERCX1ZFUlNJT04pOwogICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoKSA9PiB7CiAgICAgIGNvbnN0IGRiID0gcmVxdWVzdC5yZXN1bHQ7CiAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhTVE9SRV9TQVZFUykpIHsKICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShTVE9SRV9TQVZFUywgeyBrZXlQYXRoOiAnaWQnLCBhdXRvSW5jcmVtZW50OiB0cnVlIH0pOwogICAgICB9CiAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhTVE9SRV9CUkFJTlMpKSB7CiAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfQlJBSU5TLCB7IGtleVBhdGg6ICdhZ2VudElkJyB9KTsKICAgICAgfQogICAgfTsKICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7CiAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWplY3QocmVxdWVzdC5lcnJvcik7CiAgfSk7Cn0KCmNsYXNzIE1lbW9yeVN0b3JhZ2UgewogIGNvbnN0cnVjdG9yKCkgewogICAgdGhpcy5zYXZlcyA9IFtdOwogICAgdGhpcy5icmFpbnMgPSBuZXcgTWFwKCk7CiAgfQoKICBhc3luYyBzYXZlU25hcHNob3Qoc25hcHNob3QpIHsKICAgIHRoaXMuc2F2ZXMucHVzaCh7IGlkOiBEYXRlLm5vdygpLCBzbmFwc2hvdCB9KTsKICAgIHJldHVybiB7IG9rOiB0cnVlLCBtZXNzYWdlOiAn0KHQvdC40LzQvtC6INGB0L7RhdGA0LDQvdGR0L0gKNC/0LDQvNGP0YLRjCknIH07CiAgfQoKICBhc3luYyBsb2FkTGF0ZXN0U25hcHNob3QoKSB7CiAgICBjb25zdCBsYXN0ID0gdGhpcy5zYXZlc1t0aGlzLnNhdmVzLmxlbmd0aCAtIDFdOwogICAgcmV0dXJuIGxhc3Q/LnNuYXBzaG90ID8/IG51bGw7CiAgfQoKICBhc3luYyBzYXZlQnJhaW4oYWdlbnRJZCwgZGF0YSkgewogICAgdGhpcy5icmFpbnMuc2V0KGFnZW50SWQsIGRhdGEpOwogIH0KCiAgYXN5bmMgbG9hZEJyYWlucygpIHsKICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYnJhaW5zLmVudHJpZXMoKSkubWFwKChbYWdlbnRJZCwgYmxvYl0pID0+ICh7IGFnZW50SWQsIGJsb2IgfSkpOwogIH0KfQoKY2xhc3MgSW5kZXhlZERCU3RvcmFnZSB7CiAgY29uc3RydWN0b3IoZGIpIHsKICAgIHRoaXMuZGIgPSBkYjsKICB9CgogIGFzeW5jIHNhdmVTbmFwc2hvdChzbmFwc2hvdCkgewogICAgY29uc3QgdHggPSB0aGlzLmRiLnRyYW5zYWN0aW9uKFNUT1JFX1NBVkVTLCAncmVhZHdyaXRlJyk7CiAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX1NBVkVTKTsKICAgIGF3YWl0IHJlcXVlc3RBc1Byb21pc2Uoc3RvcmUuYWRkKHsgc25hcHNob3QsIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSB9KSk7CiAgICBhd2FpdCB0cmFuc2FjdGlvbkRvbmUodHgpOwogICAgcmV0dXJuIHsgb2s6IHRydWUsIG1lc3NhZ2U6ICfQodC90LjQvNC+0Log0YHQvtGF0YDQsNC90ZHQvScgfTsKICB9CgogIGFzeW5jIGxvYWRMYXRlc3RTbmFwc2hvdCgpIHsKICAgIGNvbnN0IHR4ID0gdGhpcy5kYi50cmFuc2FjdGlvbihTVE9SRV9TQVZFUywgJ3JlYWRvbmx5Jyk7CiAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX1NBVkVTKTsKICAgIGNvbnN0IHJlcXVlc3QgPSBzdG9yZS5nZXRBbGwoKTsKICAgIGNvbnN0IGFsbCA9IGF3YWl0IHJlcXVlc3RBc1Byb21pc2UocmVxdWVzdCk7CiAgICBhd2FpdCB0cmFuc2FjdGlvbkRvbmUodHgpOwogICAgY29uc3QgbGFzdCA9IGFsbC5zb3J0KChhLCBiKSA9PiAoYS5jcmVhdGVkQXQgPz8gMCkgLSAoYi5jcmVhdGVkQXQgPz8gMCkpLnBvcCgpOwogICAgcmV0dXJuIGxhc3Q/LnNuYXBzaG90ID8/IG51bGw7CiAgfQoKICBhc3luYyBzYXZlQnJhaW4oYWdlbnRJZCwgYmxvYikgewogICAgY29uc3QgdHggPSB0aGlzLmRiLnRyYW5zYWN0aW9uKFNUT1JFX0JSQUlOUywgJ3JlYWR3cml0ZScpOwogICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZShTVE9SRV9CUkFJTlMpOwogICAgYXdhaXQgcmVxdWVzdEFzUHJvbWlzZShzdG9yZS5wdXQoeyBhZ2VudElkLCBibG9iLCB1cGRhdGVkQXQ6IERhdGUubm93KCkgfSkpOwogICAgYXdhaXQgdHJhbnNhY3Rpb25Eb25lKHR4KTsKICB9CgogIGFzeW5jIGxvYWRCcmFpbnMoKSB7CiAgICBjb25zdCB0eCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oU1RPUkVfQlJBSU5TLCAncmVhZG9ubHknKTsKICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoU1RPUkVfQlJBSU5TKTsKICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0QXNQcm9taXNlKHN0b3JlLmdldEFsbCgpKTsKICAgIGF3YWl0IHRyYW5zYWN0aW9uRG9uZSh0eCk7CiAgICByZXR1cm4gZGF0YTsKICB9Cn0KCmZ1bmN0aW9uIHJlcXVlc3RBc1Byb21pc2UocmVxdWVzdCkgewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUocmVxdWVzdC5yZXN1bHQpOwogICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHJlcXVlc3QuZXJyb3IpOwogIH0pOwp9CgpmdW5jdGlvbiB0cmFuc2FjdGlvbkRvbmUodHgpIHsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgdHgub25jb21wbGV0ZSA9ICgpID0+IHJlc29sdmUoKTsKICAgIHR4Lm9uZXJyb3IgPSAoKSA9PiByZWplY3QodHguZXJyb3IpOwogICAgdHgub25hYm9ydCA9ICgpID0+IHJlamVjdCh0eC5lcnJvcik7CiAgfSk7Cn0KCmxldCBzdG9yYWdlSW5zdGFuY2UgPSBudWxsOwoKZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0b3JhZ2UoKSB7CiAgaWYgKHN0b3JhZ2VJbnN0YW5jZSkgcmV0dXJuIHN0b3JhZ2VJbnN0YW5jZTsKICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHsKICAgIHN0b3JhZ2VJbnN0YW5jZSA9IG5ldyBNZW1vcnlTdG9yYWdlKCk7CiAgICByZXR1cm4gc3RvcmFnZUluc3RhbmNlOwogIH0KICB0cnkgewogICAgY29uc3QgZGIgPSBhd2FpdCBvcGVuRGF0YWJhc2UoKTsKICAgIHN0b3JhZ2VJbnN0YW5jZSA9IG5ldyBJbmRleGVkREJTdG9yYWdlKGRiKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS53YXJuKCdJbmRleGVkREIg0L3QtdC00L7RgdGC0YPQv9C10L0sINC40YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQv9Cw0LzRj9GC0YwnLCBlcnJvcik7CiAgICBzdG9yYWdlSW5zdGFuY2UgPSBuZXcgTWVtb3J5U3RvcmFnZSgpOwogIH0KICByZXR1cm4gc3RvcmFnZUluc3RhbmNlOwp9Cg==",
    "app/storage/snapshot.js": "data:text/javascript;base64,aW1wb3J0IHsgQkFTRV9DT05GSUcgfSBmcm9tICdhcHAvZGF0YS9jb25maWcuanMnOwoKZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZVNuYXBzaG90KHNpbXVsYXRpb24pIHsKICBjb25zdCBzbmFwc2hvdCA9IHNpbXVsYXRpb24uc25hcHNob3QoKTsKICByZXR1cm4gewogICAgdmVyc2lvbjogQkFTRV9DT05GSUcudmVyc2lvbiwKICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSwKICAgIGRhdGE6IHNuYXBzaG90LAogIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBhcHBseVNuYXBzaG90KHNpbXVsYXRpb24sIHNuYXBzaG90KSB7CiAgaWYgKCFzbmFwc2hvdD8uZGF0YSkgcmV0dXJuIGZhbHNlOwogIGNvbnN0IHsgd29ybGQsIGFnZW50cyB9ID0gc25hcHNob3QuZGF0YTsKICBzaW11bGF0aW9uLndvcmxkLnJlc291cmNlcyA9IHsgLi4uc2ltdWxhdGlvbi53b3JsZC5yZXNvdXJjZXMsIC4uLndvcmxkLnJlc291cmNlcyB9OwogIHNpbXVsYXRpb24ud29ybGQudGltZU9mRGF5ID0gd29ybGQudGltZU9mRGF5OwogIHNpbXVsYXRpb24uYWdlbnRzLmZvckVhY2goKGFnZW50LCBpbmRleCkgPT4gewogICAgY29uc3Qgc2F2ZWQgPSBhZ2VudHNbaW5kZXhdOwogICAgaWYgKCFzYXZlZCkgcmV0dXJuOwogICAgYWdlbnQueCA9IHNhdmVkLng7CiAgICBhZ2VudC55ID0gc2F2ZWQueTsKICAgIGFnZW50LmVuZXJneSA9IHNhdmVkLmVuZXJneTsKICAgIGFnZW50LnNhdGlldHkgPSBzYXZlZC5zYXRpZXR5OwogICAgYWdlbnQuaW52ZW50b3J5ID0gc2F2ZWQuaW52ZW50b3J5OwogIH0pOwogIHNpbXVsYXRpb24udGljayA9IHNuYXBzaG90LmRhdGEudGljazsKICByZXR1cm4gdHJ1ZTsKfQo=",
    "app/types.js": "data:text/javascript;base64,LyoqCiAqIEB0eXBlZGVmIHtPYmplY3R9IEFnZW50U3RhdGUKICogQHByb3BlcnR5IHtudW1iZXJ9IGlkCiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB4CiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB5CiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBlbmVyZ3kKICogQHByb3BlcnR5IHtudW1iZXJ9IHNhdGlldHkKICogQHByb3BlcnR5IHtudW1iZXJ9IHRoaW5rRXZlcnkKICogQHByb3BlcnR5IHtzdHJpbmd9IHJvbGUKICogQHByb3BlcnR5IHtzdHJpbmdbXX0gdHJhaXRzCiAqIEBwcm9wZXJ0eSB7aW1wb3J0KCdhcHAvYWkvbW9kZWxzL3RpbnlfbWxwLmpzJykuVGlueU1MUHxpbXBvcnQoJ2FwcC9haS9tb2RlbHMvdGlueV9ncnUuanMnKS5UaW55R1JVfG51bGx9IGJyYWluCiAqIEBwcm9wZXJ0eSB7bnVtYmVyW119IHJld2FyZHMKICogQHByb3BlcnR5IHtudW1iZXJ9IGxhc3RBY3Rpb24KICogQHByb3BlcnR5IHtudW1iZXJ9IGxhc3RTeW1ib2wKICogQHByb3BlcnR5IHtib29sZWFufSB1c2VGU00KICovCgovKioKICogQHR5cGVkZWYge09iamVjdH0gV29ybGRUaWxlCiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB4CiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB5CiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBiaW9tZQogKiBAcHJvcGVydHkge251bWJlcn0gcmVzb3VyY2VzCiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkYW5nZXIKICovCgovKioKICogQHR5cGVkZWYge09iamVjdH0gU2ltdWxhdGlvblNuYXBzaG90CiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aWNrCiAqIEBwcm9wZXJ0eSB7QWdlbnRTdGF0ZVtdfSBhZ2VudHMKICogQHByb3BlcnR5IHtXb3JsZFRpbGVbXX0gdGlsZXMKICogQHByb3BlcnR5IHtPYmplY3R9IHJlc291cmNlcwogKiBAcHJvcGVydHkge09iamVjdH0gbWV0cmljcwogKi8KCmV4cG9ydCBjb25zdCBNRVNTQUdFX1RZUEVTID0gewogIElOSVQ6ICdpbml0JywKICBTVEFURTogJ3N0YXRlJywKICBQQU5FTF9FVkVOVDogJ3BhbmVsOmV2ZW50JywKICBTSU1fQ09NTUFORDogJ3NpbTpjb21tYW5kJywKICBTVE9SQUdFX1JFU1VMVDogJ3N0b3JhZ2U6cmVzdWx0JywKICBFUlJPUjogJ2Vycm9yJywKfTsK",
    "app/utils/random.js": "data:text/javascript;base64,ZXhwb3J0IGZ1bmN0aW9uIHNlZWRlZFJhbmRvbShzZWVkID0gMSkgewogIGxldCB2YWx1ZSA9IHNlZWQgJSAyMTQ3NDgzNjQ3OwogIGlmICh2YWx1ZSA8PSAwKSB2YWx1ZSArPSAyMTQ3NDgzNjQ2OwogIHJldHVybiBmdW5jdGlvbiByYW5kb20oKSB7CiAgICB2YWx1ZSA9ICh2YWx1ZSAqIDE2ODA3KSAlIDIxNDc0ODM2NDc7CiAgICByZXR1cm4gKHZhbHVlIC0gMSkgLyAyMTQ3NDgzNjQ2OwogIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlKGFycmF5LCByYW5kID0gTWF0aC5yYW5kb20pIHsKICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGkgLT0gMSkgewogICAgY29uc3QgaiA9IE1hdGguZmxvb3IocmFuZCgpICogKGkgKyAxKSk7CiAgICBbYXJyYXlbaV0sIGFycmF5W2pdXSA9IFthcnJheVtqXSwgYXJyYXlbaV1dOwogIH0KICByZXR1cm4gYXJyYXk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kb21DaG9pY2UoYXJyYXksIHJhbmQgPSBNYXRoLnJhbmRvbSkgewogIHJldHVybiBhcnJheVtNYXRoLmZsb29yKHJhbmQoKSAqIGFycmF5Lmxlbmd0aCldOwp9Cg==",
    "app/worker/worker.entry.js": "data:text/javascript;base64,aW1wb3J0IHsgU2ltdWxhdGlvbiB9IGZyb20gJ2FwcC9jb3JlL3NpbS5qcyc7CmltcG9ydCB7IEJBU0VfQ09ORklHIH0gZnJvbSAnYXBwL2RhdGEvY29uZmlnLmpzJzsKaW1wb3J0IHsgTUVTU0FHRV9UWVBFUyB9IGZyb20gJ2FwcC90eXBlcy5qcyc7CmltcG9ydCB7IHNlcmlhbGl6ZVNuYXBzaG90LCBhcHBseVNuYXBzaG90IH0gZnJvbSAnYXBwL3N0b3JhZ2Uvc25hcHNob3QuanMnOwppbXBvcnQgeyBnZXRTdG9yYWdlIH0gZnJvbSAnYXBwL3N0b3JhZ2UvaWRiLmpzJzsKCmxldCBzaW11bGF0aW9uID0gbnVsbDsKbGV0IHJ1bm5pbmcgPSBmYWxzZTsKbGV0IHRpbWVyID0gbnVsbDsKbGV0IHRpY2tJbnRlcnZhbCA9IDEwMDAgLyBCQVNFX0NPTkZJRy50aWNrUmF0ZTsKCmZ1bmN0aW9uIGVuc3VyZVNpbXVsYXRpb24oY29uZmlnKSB7CiAgaWYgKCFzaW11bGF0aW9uKSB7CiAgICBzaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24oY29uZmlnID8/IEJBU0VfQ09ORklHKTsKICB9CiAgcmV0dXJuIHNpbXVsYXRpb247Cn0KCmZ1bmN0aW9uIHN0YXJ0TG9vcCgpIHsKICBpZiAocnVubmluZykgcmV0dXJuOwogIHJ1bm5pbmcgPSB0cnVlOwogIGNsZWFySW50ZXJ2YWwodGltZXIpOwogIHRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgdHJ5IHsKICAgICAgc2ltdWxhdGlvbi5zdGVwKCk7CiAgICAgIHNlbmRTdGF0ZSgpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgcG9zdE1lc3NhZ2UoeyB0eXBlOiBNRVNTQUdFX1RZUEVTLkVSUk9SLCBwYXlsb2FkOiBlcnJvci5tZXNzYWdlIH0pOwogICAgfQogIH0sIHRpY2tJbnRlcnZhbCk7Cn0KCmZ1bmN0aW9uIHN0b3BMb29wKCkgewogIHJ1bm5pbmcgPSBmYWxzZTsKICBjbGVhckludGVydmFsKHRpbWVyKTsKfQoKZnVuY3Rpb24gc2VuZFN0YXRlKGV4dHJhID0ge30pIHsKICBpZiAoIXNpbXVsYXRpb24pIHJldHVybjsKICBjb25zdCBzbmFwc2hvdCA9IHNpbXVsYXRpb24uc25hcHNob3QoKTsKICBwb3N0TWVzc2FnZSh7CiAgICB0eXBlOiBNRVNTQUdFX1RZUEVTLlNUQVRFLAogICAgcGF5bG9hZDogewogICAgICAuLi5zbmFwc2hvdCwKICAgICAgY29uZmlnOiBzaW11bGF0aW9uLmNvbmZpZywKICAgICAgaXNSdW5uaW5nOiBydW5uaW5nLAogICAgICAuLi5leHRyYSwKICAgIH0sCiAgfSk7Cn0KCmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVNhdmUoKSB7CiAgY29uc3Qgc3RvcmFnZSA9IGF3YWl0IGdldFN0b3JhZ2UoKTsKICBjb25zdCBzZXJpYWxpemVkID0gc2VyaWFsaXplU25hcHNob3Qoc2ltdWxhdGlvbik7CiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3RvcmFnZS5zYXZlU25hcHNob3Qoc2VyaWFsaXplZCk7CiAgcG9zdE1lc3NhZ2UoewogICAgdHlwZTogTUVTU0FHRV9UWVBFUy5TVE9SQUdFX1JFU1VMVCwKICAgIHBheWxvYWQ6IHsgYWN0aW9uOiAnc2F2ZScsIHJlc3VsdCB9LAogIH0pOwp9Cgphc3luYyBmdW5jdGlvbiBoYW5kbGVMb2FkKCkgewogIGNvbnN0IHN0b3JhZ2UgPSBhd2FpdCBnZXRTdG9yYWdlKCk7CiAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBzdG9yYWdlLmxvYWRMYXRlc3RTbmFwc2hvdCgpOwogIGlmIChzbmFwc2hvdCkgewogICAgYXBwbHlTbmFwc2hvdChzaW11bGF0aW9uLCBzbmFwc2hvdCk7CiAgICBzZW5kU3RhdGUoeyBzdG9yYWdlTWVzc2FnZTogJ9Ch0LXQudCyINC30LDQs9GA0YPQttC10L0nIH0pOwogIH0gZWxzZSB7CiAgICBzZW5kU3RhdGUoeyBzdG9yYWdlTWVzc2FnZTogJ9Cd0LXRgiDRgdC+0YXRgNCw0L3RkdC90L3Ri9GFINC00LDQvdC90YvRhScgfSk7CiAgfQp9Cgphc3luYyBmdW5jdGlvbiBoYW5kbGVFeHBvcnRCcmFpbnMoKSB7CiAgY29uc3QgYnJhaW5zID0gc2ltdWxhdGlvbi5hZ2VudHMubWFwKChhZ2VudCkgPT4gKHsKICAgIGFnZW50SWQ6IGFnZW50LmlkLAogICAgd2VpZ2h0czogQXJyYXkuZnJvbShhZ2VudC5icmFpbi5zZXJpYWxpemUoKSksCiAgfSkpOwogIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IHNpbXVsYXRpb24uY29uZmlnLnZlcnNpb24gPz8gJzAuMS4wJywgYnJhaW5zIH0pOwogIHBvc3RNZXNzYWdlKHsKICAgIHR5cGU6IE1FU1NBR0VfVFlQRVMuU1RPUkFHRV9SRVNVTFQsCiAgICBwYXlsb2FkOiB7IGFjdGlvbjogJ2JyYWluczpleHBvcnQnLCBkYXRhIH0sCiAgfSk7Cn0KCmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUltcG9ydEJyYWlucyhwYXlsb2FkKSB7CiAgdHJ5IHsKICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocGF5bG9hZCk7CiAgICBpZiAoIXBhcnNlZD8uYnJhaW5zKSB0aHJvdyBuZXcgRXJyb3IoJ9Cd0LXQutC+0YDRgNC10LrRgtC90YvQuSDRhNCw0LnQuycpOwogICAgZm9yIChjb25zdCBlbnRyeSBvZiBwYXJzZWQuYnJhaW5zKSB7CiAgICAgIGNvbnN0IGFnZW50ID0gc2ltdWxhdGlvbi5hZ2VudHMuZmluZCgoYSkgPT4gYS5pZCA9PT0gZW50cnkuYWdlbnRJZCk7CiAgICAgIGlmIChhZ2VudCAmJiBlbnRyeS53ZWlnaHRzKSB7CiAgICAgICAgYWdlbnQuYnJhaW4ubG9hZFdlaWdodHMobmV3IEZsb2F0MzJBcnJheShlbnRyeS53ZWlnaHRzKSk7CiAgICAgIH0KICAgIH0KICAgIHNlbmRTdGF0ZSh7IHN0b3JhZ2VNZXNzYWdlOiAn0JzQvtC30LPQuCDQuNC80L/QvtGA0YLQuNGA0L7QstCw0L3RiycgfSk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHBvc3RNZXNzYWdlKHsgdHlwZTogTUVTU0FHRV9UWVBFUy5FUlJPUiwgcGF5bG9hZDogZXJyb3IubWVzc2FnZSB9KTsKICB9Cn0KCnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGFzeW5jIChldmVudCkgPT4gewogIGNvbnN0IHsgdHlwZSwgcGF5bG9hZCB9ID0gZXZlbnQuZGF0YTsKICBzd2l0Y2ggKHR5cGUpIHsKICAgIGNhc2UgTUVTU0FHRV9UWVBFUy5JTklUOiB7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHBheWxvYWQ/LmNvbmZpZyA/IHsgLi4uQkFTRV9DT05GSUcsIC4uLnBheWxvYWQuY29uZmlnIH0gOiBCQVNFX0NPTkZJRzsKICAgICAgZW5zdXJlU2ltdWxhdGlvbihjb25maWcpOwogICAgICB0aWNrSW50ZXJ2YWwgPSAxMDAwIC8gKGNvbmZpZy50aWNrUmF0ZSA/PyBCQVNFX0NPTkZJRy50aWNrUmF0ZSk7CiAgICAgIHNlbmRTdGF0ZSgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgJ3NpbXVsYXRpb246c3RhcnQnOgogICAgICBzdGFydExvb3AoKTsKICAgICAgc2VuZFN0YXRlKCk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnc2ltdWxhdGlvbjpwYXVzZSc6CiAgICAgIHN0b3BMb29wKCk7CiAgICAgIHNlbmRTdGF0ZSgpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3NldHRpbmdzOnVwZGF0ZSc6CiAgICAgIGlmICgndGhpbmtFdmVyeScgaW4gcGF5bG9hZCkgc2ltdWxhdGlvbi5zZXRUaGlua0V2ZXJ5KHBheWxvYWQudGhpbmtFdmVyeSk7CiAgICAgIGlmICgnYWxsb3dMZWFybmluZycgaW4gcGF5bG9hZCkgc2ltdWxhdGlvbi5zZXRMZWFybmluZ0VuYWJsZWQocGF5bG9hZC5hbGxvd0xlYXJuaW5nKTsKICAgICAgaWYgKCdicmFpbk1vZGVsJyBpbiBwYXlsb2FkKSBzaW11bGF0aW9uLnNldEJyYWluTW9kZWwocGF5bG9hZC5icmFpbk1vZGVsKTsKICAgICAgaWYgKCd0aWNrUmF0ZScgaW4gcGF5bG9hZCkgewogICAgICAgIHRpY2tJbnRlcnZhbCA9IDEwMDAgLyBwYXlsb2FkLnRpY2tSYXRlOwogICAgICAgIGlmIChydW5uaW5nKSB7CiAgICAgICAgICBzdG9wTG9vcCgpOwogICAgICAgICAgc3RhcnRMb29wKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHNlbmRTdGF0ZSgpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3N0b3JhZ2U6c2F2ZSc6CiAgICAgIGF3YWl0IGhhbmRsZVNhdmUoKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdzdG9yYWdlOmxvYWQnOgogICAgICBhd2FpdCBoYW5kbGVMb2FkKCk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnYnJhaW5zOmV4cG9ydCc6CiAgICAgIGF3YWl0IGhhbmRsZUV4cG9ydEJyYWlucygpOwogICAgICBicmVhazsKICAgIGNhc2UgJ2JyYWluczppbXBvcnQnOgogICAgICBhd2FpdCBoYW5kbGVJbXBvcnRCcmFpbnMocGF5bG9hZCk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgYnJlYWs7CiAgfQp9KTsKCnNlbmRTdGF0ZSgpOwo=",
    "main.js": "data:text/javascript;base64,aW1wb3J0IHsgUGl4aUFwcCB9IGZyb20gJ2FwcC9yZW5kZXIvcGl4aV9hcHAuanMnOwppbXBvcnQgeyBDb250cm9sUGFuZWwgfSBmcm9tICdhcHAvcGFuZWwvcGFuZWwuanMnOwppbXBvcnQgeyBCQVNFX0NPTkZJRyB9IGZyb20gJ2FwcC9kYXRhL2NvbmZpZy5qcyc7CmltcG9ydCB7IE1FU1NBR0VfVFlQRVMgfSBmcm9tICdhcHAvdHlwZXMuanMnOwppbXBvcnQgeyBTaW11bGF0aW9uIH0gZnJvbSAnYXBwL2NvcmUvc2ltLmpzJzsKaW1wb3J0IHsgc2VyaWFsaXplU25hcHNob3QsIGFwcGx5U25hcHNob3QgfSBmcm9tICdhcHAvc3RvcmFnZS9zbmFwc2hvdC5qcyc7CmltcG9ydCB7IGdldFN0b3JhZ2UgfSBmcm9tICdhcHAvc3RvcmFnZS9pZGIuanMnOwoKY29uc3QgQ09ORklHX1NUT1JBR0VfS0VZID0gJ2NvbG9ueS1zaW0tY29uZmlnJzsKCmZ1bmN0aW9uIGxvYWRTYXZlZENvbmZpZygpIHsKICB0cnkgewogICAgY29uc3QgcmF3ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oQ09ORklHX1NUT1JBR0VfS0VZKTsKICAgIGlmICghcmF3KSByZXR1cm4gQkFTRV9DT05GSUc7CiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdyk7CiAgICByZXR1cm4geyAuLi5CQVNFX0NPTkZJRywgLi4ucGFyc2VkIH07CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUud2Fybign0J3QtSDRg9C00LDQu9C+0YHRjCDQt9Cw0LPRgNGD0LfQuNGC0Ywg0LrQvtC90YTQuNCzJywgZXJyb3IpOwogICAgcmV0dXJuIEJBU0VfQ09ORklHOwogIH0KfQoKZnVuY3Rpb24gcGVyc2lzdENvbmZpZyhjb25maWcpIHsKICB0cnkgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oQ09ORklHX1NUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShjb25maWcpKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS53YXJuKCfQndC1INGD0LTQsNC70L7RgdGMINGB0L7RhdGA0LDQvdC40YLRjCDQutC+0L3RhNC40LMnLCBlcnJvcik7CiAgfQp9CgpjbGFzcyBJbmxpbmVXb3JrZXIgewogIGNvbnN0cnVjdG9yKCkgewogICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgU2V0KCk7CiAgICB0aGlzLnNpbXVsYXRpb24gPSBudWxsOwogICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICB0aGlzLnRpbWVyID0gbnVsbDsKICAgIHRoaXMudGlja0ludGVydmFsID0gMTAwMCAvIEJBU0VfQ09ORklHLnRpY2tSYXRlOwogIH0KCiAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaykgewogICAgaWYgKHR5cGUgPT09ICdtZXNzYWdlJykgdGhpcy5saXN0ZW5lcnMuYWRkKGNhbGxiYWNrKTsKICB9CgogIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2spIHsKICAgIGlmICh0eXBlID09PSAnbWVzc2FnZScpIHRoaXMubGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFjayk7CiAgfQoKICBkaXNwYXRjaCh0eXBlLCBwYXlsb2FkKSB7CiAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHRoaXMubGlzdGVuZXJzKSB7CiAgICAgIGNhbGxiYWNrKHsgZGF0YTogeyB0eXBlLCBwYXlsb2FkIH0gfSk7CiAgICB9CiAgfQoKICBlbnN1cmVTaW11bGF0aW9uKGNvbmZpZykgewogICAgaWYgKCF0aGlzLnNpbXVsYXRpb24pIHsKICAgICAgdGhpcy5zaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24oY29uZmlnID8/IEJBU0VfQ09ORklHKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnNpbXVsYXRpb247CiAgfQoKICBzdGFydExvb3AoKSB7CiAgICBpZiAodGhpcy5ydW5uaW5nKSByZXR1cm47CiAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlOwogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIHRoaXMuc2ltdWxhdGlvbi5zdGVwKCk7CiAgICAgIHRoaXMuc2VuZFN0YXRlKCk7CiAgICB9LCB0aGlzLnRpY2tJbnRlcnZhbCk7CiAgfQoKICBzdG9wTG9vcCgpIHsKICAgIHRoaXMucnVubmluZyA9IGZhbHNlOwogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICB9CgogIHRlcm1pbmF0ZSgpIHsKICAgIHRoaXMuc3RvcExvb3AoKTsKICAgIHRoaXMubGlzdGVuZXJzLmNsZWFyKCk7CiAgfQoKICBhc3luYyBoYW5kbGVNZXNzYWdlKG1lc3NhZ2UpIHsKICAgIGNvbnN0IHsgdHlwZSwgcGF5bG9hZCB9ID0gbWVzc2FnZTsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlIE1FU1NBR0VfVFlQRVMuSU5JVDogewogICAgICAgIGNvbnN0IGNvbmZpZyA9IHBheWxvYWQ/LmNvbmZpZyA/IHsgLi4uQkFTRV9DT05GSUcsIC4uLnBheWxvYWQuY29uZmlnIH0gOiBCQVNFX0NPTkZJRzsKICAgICAgICB0aGlzLmVuc3VyZVNpbXVsYXRpb24oY29uZmlnKTsKICAgICAgICB0aGlzLnRpY2tJbnRlcnZhbCA9IDEwMDAgLyAoY29uZmlnLnRpY2tSYXRlID8/IEJBU0VfQ09ORklHLnRpY2tSYXRlKTsKICAgICAgICB0aGlzLnNlbmRTdGF0ZSgpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgJ3NpbXVsYXRpb246c3RhcnQnOgogICAgICAgIHRoaXMuc3RhcnRMb29wKCk7CiAgICAgICAgdGhpcy5zZW5kU3RhdGUoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2ltdWxhdGlvbjpwYXVzZSc6CiAgICAgICAgdGhpcy5zdG9wTG9vcCgpOwogICAgICAgIHRoaXMuc2VuZFN0YXRlKCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldHRpbmdzOnVwZGF0ZSc6CiAgICAgICAgaWYgKCd0aGlua0V2ZXJ5JyBpbiBwYXlsb2FkKSB0aGlzLnNpbXVsYXRpb24uc2V0VGhpbmtFdmVyeShwYXlsb2FkLnRoaW5rRXZlcnkpOwogICAgICAgIGlmICgnYWxsb3dMZWFybmluZycgaW4gcGF5bG9hZCkgdGhpcy5zaW11bGF0aW9uLnNldExlYXJuaW5nRW5hYmxlZChwYXlsb2FkLmFsbG93TGVhcm5pbmcpOwogICAgICAgIGlmICgnYnJhaW5Nb2RlbCcgaW4gcGF5bG9hZCkgdGhpcy5zaW11bGF0aW9uLnNldEJyYWluTW9kZWwocGF5bG9hZC5icmFpbk1vZGVsKTsKICAgICAgICBpZiAoJ3RpY2tSYXRlJyBpbiBwYXlsb2FkKSB7CiAgICAgICAgICB0aGlzLnRpY2tJbnRlcnZhbCA9IDEwMDAgLyBwYXlsb2FkLnRpY2tSYXRlOwogICAgICAgICAgaWYgKHRoaXMucnVubmluZykgewogICAgICAgICAgICB0aGlzLnN0b3BMb29wKCk7CiAgICAgICAgICAgIHRoaXMuc3RhcnRMb29wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuc2VuZFN0YXRlKCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3N0b3JhZ2U6c2F2ZSc6IHsKICAgICAgICBjb25zdCBzdG9yYWdlID0gYXdhaXQgZ2V0U3RvcmFnZSgpOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0b3JhZ2Uuc2F2ZVNuYXBzaG90KHNlcmlhbGl6ZVNuYXBzaG90KHRoaXMuc2ltdWxhdGlvbikpOwogICAgICAgIHRoaXMuZGlzcGF0Y2goTUVTU0FHRV9UWVBFUy5TVE9SQUdFX1JFU1VMVCwgeyBhY3Rpb246ICdzYXZlJywgcmVzdWx0IH0pOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgJ3N0b3JhZ2U6bG9hZCc6IHsKICAgICAgICBjb25zdCBzdG9yYWdlID0gYXdhaXQgZ2V0U3RvcmFnZSgpOwogICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgc3RvcmFnZS5sb2FkTGF0ZXN0U25hcHNob3QoKTsKICAgICAgICBpZiAoc25hcHNob3QpIHsKICAgICAgICAgIGFwcGx5U25hcHNob3QodGhpcy5zaW11bGF0aW9uLCBzbmFwc2hvdCk7CiAgICAgICAgICB0aGlzLnNlbmRTdGF0ZSh7IHN0b3JhZ2VNZXNzYWdlOiAn0KHQtdC50LIg0LfQsNCz0YDRg9C20LXQvScgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2VuZFN0YXRlKHsgc3RvcmFnZU1lc3NhZ2U6ICfQndC10YIg0YHQvtGF0YDQsNC90ZHQvdC90YvRhSDQtNCw0L3QvdGL0YUnIH0pOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlICdicmFpbnM6ZXhwb3J0JzogewogICAgICAgIGNvbnN0IGJyYWlucyA9IHRoaXMuc2ltdWxhdGlvbi5hZ2VudHMubWFwKChhZ2VudCkgPT4gKHsKICAgICAgICAgIGFnZW50SWQ6IGFnZW50LmlkLAogICAgICAgICAgd2VpZ2h0czogQXJyYXkuZnJvbShhZ2VudC5icmFpbi5zZXJpYWxpemUoKSksCiAgICAgICAgfSkpOwogICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IHRoaXMuc2ltdWxhdGlvbi5jb25maWcudmVyc2lvbiA/PyAnMC4xLjAnLCBicmFpbnMgfSk7CiAgICAgICAgdGhpcy5kaXNwYXRjaChNRVNTQUdFX1RZUEVTLlNUT1JBR0VfUkVTVUxULCB7IGFjdGlvbjogJ2JyYWluczpleHBvcnQnLCBkYXRhIH0pOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgJ2JyYWluczppbXBvcnQnOiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocGF5bG9hZCk7CiAgICAgICAgICBpZiAoIXBhcnNlZD8uYnJhaW5zKSB0aHJvdyBuZXcgRXJyb3IoJ9Cd0LXQutC+0YDRgNC10LrRgtC90YvQuSDRhNCw0LnQuycpOwogICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBwYXJzZWQuYnJhaW5zKSB7CiAgICAgICAgICAgIGNvbnN0IGFnZW50ID0gdGhpcy5zaW11bGF0aW9uLmFnZW50cy5maW5kKChhKSA9PiBhLmlkID09PSBlbnRyeS5hZ2VudElkKTsKICAgICAgICAgICAgaWYgKGFnZW50ICYmIGVudHJ5LndlaWdodHMpIHsKICAgICAgICAgICAgICBhZ2VudC5icmFpbi5sb2FkV2VpZ2h0cyhuZXcgRmxvYXQzMkFycmF5KGVudHJ5LndlaWdodHMpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5zZW5kU3RhdGUoeyBzdG9yYWdlTWVzc2FnZTogJ9Cc0L7Qt9Cz0Lgg0LjQvNC/0L7RgNGC0LjRgNC+0LLQsNC90YsnIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoKE1FU1NBR0VfVFlQRVMuRVJST1IsIGVycm9yLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgfQogICAgICBkZWZhdWx0OgogICAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgc2VuZFN0YXRlKGV4dHJhID0ge30pIHsKICAgIGlmICghdGhpcy5zaW11bGF0aW9uKSByZXR1cm47CiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMuc2ltdWxhdGlvbi5zbmFwc2hvdCgpOwogICAgdGhpcy5kaXNwYXRjaChNRVNTQUdFX1RZUEVTLlNUQVRFLCB7CiAgICAgIC4uLnNuYXBzaG90LAogICAgICBjb25maWc6IHRoaXMuc2ltdWxhdGlvbi5jb25maWcsCiAgICAgIGlzUnVubmluZzogdGhpcy5ydW5uaW5nLAogICAgICAuLi5leHRyYSwKICAgIH0pOwogIH0KCiAgcG9zdE1lc3NhZ2UobWVzc2FnZSkgewogICAgdm9pZCB0aGlzLmhhbmRsZU1lc3NhZ2UobWVzc2FnZSk7CiAgfQp9CgpmdW5jdGlvbiBjcmVhdGVCbG9iV29ya2VyKHNjcmlwdFVybCkgewogIGlmICh0eXBlb2YgQmxvYiA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIFVSTCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBudWxsOwogIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYGltcG9ydCAiJHtzY3JpcHRVcmx9IjtgXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcgfSk7CiAgY29uc3Qgb2JqZWN0VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICB0cnkgewogICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcihvYmplY3RVcmwsIHsgdHlwZTogJ21vZHVsZScgfSk7CiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4gewogICAgICB0cnkgewogICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwob2JqZWN0VXJsKTsKICAgICAgfSBjYXRjaCAocmV2b2tlRXJyb3IpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0L7RgdCy0L7QsdC+0LTQuNGC0YwgVVJMINCy0L7RgNC60LXRgNCwJywgcmV2b2tlRXJyb3IpOwogICAgICB9CiAgICB9OwogICAgd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBjbGVhbnVwLCB7IG9uY2U6IHRydWUgfSk7CiAgICB3b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBjbGVhbnVwLCB7IG9uY2U6IHRydWUgfSk7CiAgICByZXR1cm4gd29ya2VyOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBVUkwucmV2b2tlT2JqZWN0VVJMKG9iamVjdFVybCk7CiAgICB0aHJvdyBlcnJvcjsKICB9Cn0KCmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNpbXVsYXRpb25Xb3JrZXIoKSB7CiAgaWYgKHR5cGVvZiBXb3JrZXIgIT09ICdmdW5jdGlvbicpIHsKICAgIGNvbnNvbGUud2FybignQVBJIFdlYldvcmtlciDQvdC10LTQvtGB0YLRg9C/0L3Qviwg0LjRgdC/0L7Qu9GM0LfRg9C10Lwg0YTQvtC70LHRjdC6INC90LAg0LPQu9Cw0LLQvdGL0Lkg0L/QvtGC0L7QuicpOwogICAgcmV0dXJuIG5ldyBJbmxpbmVXb3JrZXIoKTsKICB9CgogIHRyeSB7CiAgICByZXR1cm4gbmV3IFdvcmtlcignLi9nYW1lL3dvcmtlci93b3JrZXIuZW50cnkuanMnLCB7IHR5cGU6ICdtb2R1bGUnIH0pOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLndhcm4oJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0YHQvtC30LTQsNGC0Ywg0LzQvtC00YPQu9GM0L3Ri9C5INCy0L7RgNC60LXRgCDQv9C+INC+0YLQvdC+0YHQuNGC0LXQu9GM0L3QvtC80YMg0L/Rg9GC0LgnLCBlcnJvcik7CiAgfQoKICB0cnkgewogICAgY29uc3QgYmFzZVVybCA9CiAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnCiAgICAgICAgPyB3aW5kb3cubG9jYXRpb24uaHJlZgogICAgICAgIDogdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJwogICAgICAgID8gZG9jdW1lbnQuYmFzZVVSSQogICAgICAgIDogbnVsbDsKICAgIGlmICghYmFzZVVybCkgdGhyb3cgbmV3IEVycm9yKCfQndC1INGD0LTQsNC70L7RgdGMINC+0L/RgNC10LTQtdC70LjRgtGMINCx0LDQt9C+0LLRi9C5IFVSTCDQtNC70Y8gQmxvYi3QstC+0YDQutC10YDQsCcpOwogICAgY29uc3Qgc2NyaXB0VXJsID0gbmV3IFVSTCgnLi9nYW1lL3dvcmtlci93b3JrZXIuZW50cnkuanMnLCBiYXNlVXJsKS5ocmVmOwogICAgY29uc3Qgd29ya2VyID0gY3JlYXRlQmxvYldvcmtlcihzY3JpcHRVcmwpOwogICAgaWYgKHdvcmtlcikgewogICAgICBjb25zb2xlLmluZm8oJ9CY0YHQv9C+0LvRjNC30YPQtdGC0YHRjyBCbG9iLdCy0L7RgNC60LXRgCDQtNC70Y8g0YHQuNC80YPQu9GP0YbQuNC4Jyk7CiAgICAgIHJldHVybiB3b3JrZXI7CiAgICB9CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUud2Fybign0J3QtSDRg9C00LDQu9C+0YHRjCDRgdC+0LfQtNCw0YLRjCBCbG9iLdCy0L7RgNC60LXRgCwg0LjRgdC/0L7Qu9GM0LfRg9C10LwgaW5saW5lINGA0LXQttC40LwnLCBlcnJvcik7CiAgfQoKICBjb25zb2xlLndhcm4oJ9CS0L7Qt9Cy0YDQsNGJ0LDQtdC8IGlubGluZS3QstC+0YDQutC10YAg0LIg0LrQsNGH0LXRgdGC0LLQtSDQutGA0LDQudC90LXQs9C+INGE0L7Qu9Cx0Y3QutCwJyk7CiAgcmV0dXJuIG5ldyBJbmxpbmVXb3JrZXIoKTsKfQoKY29uc3QgcmVuZGVyQXBwID0gbmV3IFBpeGlBcHAoeyBjb250YWluZXJJZDogJ2dhbWUtcm9vdCcgfSk7CmxldCB3b3JrZXIgPSBudWxsOwpjb25zdCBwZW5kaW5nTWVzc2FnZXMgPSBbXTsKY29uc3QgbGF0ZXN0U3RhdGUgPSB7CiAgdGljazogMCwKICBhZ2VudHM6IFtdLAogIHdvcmxkOiBCQVNFX0NPTkZJRy53b3JsZCwKICBjb21tczogW10sCiAgbWV0cmljczoge30sCiAgY29uZmlnOiBCQVNFX0NPTkZJRywKICBpc1J1bm5pbmc6IGZhbHNlLAp9OwoKY29uc3QgcGFuZWwgPSBuZXcgQ29udHJvbFBhbmVsKHsKICBjb250YWluZXJJZDogJ3BhbmVsLXJvb3QnLAogIG9uQ29tbWFuZDogKHR5cGUsIHBheWxvYWQpID0+IHsKICAgIGlmICghd29ya2VyKSB7CiAgICAgIHBlbmRpbmdNZXNzYWdlcy5wdXNoKHsgdHlwZSwgcGF5bG9hZCB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgd29ya2VyLnBvc3RNZXNzYWdlKHsgdHlwZSwgcGF5bG9hZCB9KTsKICB9LAp9KTsKCmZ1bmN0aW9uIGhhbmRsZVdvcmtlck1lc3NhZ2UoZXZlbnQpIHsKICBjb25zdCB7IHR5cGUsIHBheWxvYWQgfSA9IGV2ZW50LmRhdGE7CiAgc3dpdGNoICh0eXBlKSB7CiAgICBjYXNlIE1FU1NBR0VfVFlQRVMuU1RBVEU6IHsKICAgICAgT2JqZWN0LmFzc2lnbihsYXRlc3RTdGF0ZSwgcGF5bG9hZCk7CiAgICAgIGlmICghbGF0ZXN0U3RhdGUuY29tbXNBbHBoYWJldCkgewogICAgICAgIGxhdGVzdFN0YXRlLmNvbW1zQWxwaGFiZXQgPSBCQVNFX0NPTkZJRy5jb21tcy5hbHBoYWJldC5zcGxpdCgnJyk7CiAgICAgIH0KICAgICAgcGVyc2lzdENvbmZpZyhsYXRlc3RTdGF0ZS5jb25maWcpOwogICAgICByZW5kZXJBcHAudXBkYXRlKHsgLi4ubGF0ZXN0U3RhdGUsIGNvbW1zQWxwaGFiZXQ6IGxhdGVzdFN0YXRlLmNvbW1zQWxwaGFiZXQgfSk7CiAgICAgIHBhbmVsLnVwZGF0ZShsYXRlc3RTdGF0ZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVNTQUdFX1RZUEVTLlNUT1JBR0VfUkVTVUxUOiB7CiAgICAgIGlmIChwYXlsb2FkLmFjdGlvbiA9PT0gJ2JyYWluczpleHBvcnQnKSB7CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtwYXlsb2FkLmRhdGFdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTsKICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSAnYnJhaW5zLmpzb24nOwogICAgICAgIGEuY2xpY2soKTsKICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgIH0gZWxzZSBpZiAocGF5bG9hZC5yZXN1bHQ/Lm1lc3NhZ2UpIHsKICAgICAgICBsYXRlc3RTdGF0ZS5zdG9yYWdlTWVzc2FnZSA9IHBheWxvYWQucmVzdWx0Lm1lc3NhZ2U7CiAgICAgICAgcGFuZWwudXBkYXRlKGxhdGVzdFN0YXRlKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVTU0FHRV9UWVBFUy5FUlJPUjogewogICAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0YHQuNC80YPQu9GP0YbQuNC4JywgcGF5bG9hZCk7CiAgICAgIGxhdGVzdFN0YXRlLnN0b3JhZ2VNZXNzYWdlID0gU3RyaW5nKHBheWxvYWQpOwogICAgICBwYW5lbC51cGRhdGUobGF0ZXN0U3RhdGUpOwogICAgICBicmVhazsKICAgIH0KICAgIGRlZmF1bHQ6CiAgICAgIGJyZWFrOwogIH0KfQoKY3JlYXRlU2ltdWxhdGlvbldvcmtlcigpLnRoZW4oKGNyZWF0ZWRXb3JrZXIpID0+IHsKICB3b3JrZXIgPSBjcmVhdGVkV29ya2VyOwogIHdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlV29ya2VyTWVzc2FnZSk7CiAgd29ya2VyLnBvc3RNZXNzYWdlKHsgdHlwZTogTUVTU0FHRV9UWVBFUy5JTklULCBwYXlsb2FkOiB7IGNvbmZpZzogbG9hZFNhdmVkQ29uZmlnKCkgfSB9KTsKICB3aGlsZSAocGVuZGluZ01lc3NhZ2VzLmxlbmd0aCkgewogICAgY29uc3QgbWVzc2FnZSA9IHBlbmRpbmdNZXNzYWdlcy5zaGlmdCgpOwogICAgd29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOwogIH0KfSk7Cg=="
  }
}